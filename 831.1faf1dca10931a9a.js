"use strict";(self.webpackChunkPractises_Management=self.webpackChunkPractises_Management||[]).push([[831],{374:(I,Z,d)=>{d.d(Z,{p:()=>f});var x=d(1223),h=d(3958);let f=(()=>{class w{constructor(c){this.userSrv=c}canActivate(c,_){var e,S;return"ROLE_ADMIN"==(null===(S=null===(e=this.userSrv.getPerson())||void 0===e?void 0:e.rol)||void 0===S?void 0:S.toString())}}return w.\u0275fac=function(c){return new(c||w)(x.LFG(h.K))},w.\u0275prov=x.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})()},3831:(I,Z,d)=>{d.r(Z),d.d(Z,{PersonModule:()=>he});var x=d(9808),h=d(1451),f=(()=>{return(r=f||(f={}))[r.ROLE_ADMIN=0]="ROLE_ADMIN",r[r.ROLE_STUDENT=1]="ROLE_STUDENT",r[r.ROLE_TEACHER=2]="ROLE_TEACHER",r[r.ROLE_LABOR_TUTOR=3]="ROLE_LABOR_TUTOR",f;var r})(),w=d(5226),s=d.n(w),c=d(2382),_=d(2340),e=d(1223),S=d(9275),C=d(4004),T=d(262),N=d(515),E=d(3958),q=d(5295),U=d(520);let k=(()=>{class r{constructor(t,n,i){this.userService=t,this.authService=n,this.http=i}validate(t){return this.http.get(_.N.serverAddress+"/exist-person/"+t.value,this.authService.getHeadersToken()).pipe((0,S.g)(1500),(0,C.U)(n=>{var i,o;return""==n.mensaje?(null===(i=t.get("dni"))||void 0===i||i.setErrors(null),null):(null===(o=t.get("dni"))||void 0===o||o.setErrors({exist:!0}),{exist:!0})}),(0,T.K)(n=>N.E))}createPerson(t){return this.http.post(_.N.serverAddress+"/auth/register/",t,this.authService.getHeadersToken())}disable(t){let n={};return n.dni=t,this.http.post(_.N.serverAddress+"/disable-user",n,this.authService.getHeadersToken())}enable(t){let n={};return n.dni=t,this.http.post(_.N.serverAddress+"/enable-user/",n,this.authService.getHeadersToken())}getLaborTutor(){return this.http.get(_.N.serverAddress+"/labor-tutor/",this.authService.getHeadersToken())}getTeachers(){return this.http.get(_.N.serverAddress+"/teacher/",this.authService.getHeadersToken())}getStudentsFind(t){return this.http.get(_.N.serverAddress+"/student?name="+t,this.authService.getHeadersToken())}getLaborTutorFind(t){return this.http.get(_.N.serverAddress+"/labor-tutor?name="+t,this.authService.getHeadersToken())}getTeachersFind(t){return this.http.get(_.N.serverAddress+"/teacher?name="+t,this.authService.getHeadersToken())}getStudents(){return this.http.get(_.N.serverAddress+"/student/",this.authService.getHeadersToken())}removeStudent(t){return this.http.delete(_.N.serverAddress+"/student/"+t,this.authService.getHeadersToken())}removeTeacher(t){return this.http.delete(_.N.serverAddress+"/teacher/"+t,this.authService.getHeadersToken())}removeLaborTutor(t){return this.http.delete(_.N.serverAddress+"/labor-tutor/"+t,this.authService.getHeadersToken())}getPersonByDni(t){return this.http.get(_.N.serverAddress+"/person/"+t,this.authService.getHeadersToken())}editTeacher(t){return this.http.put(_.N.serverAddress+"/teacher/"+t.dni,t,this.authService.getHeadersToken())}editAdmin(t){return this.http.put(_.N.serverAddress+"/administrator/"+t.dni,t,this.authService.getHeadersToken())}editStudent(t){return this.http.put(_.N.serverAddress+"/student/"+t.dni,t,this.authService.getHeadersToken())}editTutor(t){return this.http.put(_.N.serverAddress+"/labor-tutor/"+t.dni,t,this.authService.getHeadersToken())}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(E.K),e.LFG(q.e),e.LFG(U.eN))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var F=d(8212),R=d(8083),L=d(9976);function D(r,a){1&r&&e._UZ(0,"img",45)}function H(r,a){1&r&&(e.TgZ(0,"p",46),e._uU(1,"Sin personas"),e.qZA())}function J(r,a){1&r&&(e.TgZ(0,"p",47),e._uU(1,"No hay personas registradas con el rol elegido"),e.qZA())}function G(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"img",54),e.NdJ("click",function(i){return e.CHM(t),e.oxw(2).showMenu(i)}),e.qZA()}}function Y(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"p",44),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit;return e.oxw().toggleDisable(i.dni,i.enabled)}),e._uU(1),e.qZA()}if(2&r){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.enabled?"Deshabilitar":"Habilitar")}}function j(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"div",48),e.TgZ(1,"div"),e._UZ(2,"img",49),e.qZA(),e.TgZ(3,"p"),e._uU(4),e.qZA(),e.TgZ(5,"p"),e._uU(6),e.qZA(),e.TgZ(7,"p"),e._uU(8),e.qZA(),e.YNc(9,G,1,0,"img",50),e.TgZ(10,"div",51),e.TgZ(11,"p",44),e.NdJ("click",function(i){const u=e.CHM(t).$implicit;return e.oxw().edit(i,u.dni)}),e._uU(12,"Editar"),e.qZA(),e.YNc(13,Y,2,1,"p",52),e.TgZ(14,"p",53),e.NdJ("click",function(i){const u=e.CHM(t).$implicit;return e.oxw().remove(i,u.dni)}),e._uU(15,"Borrar"),e.qZA(),e.qZA(),e.qZA()}if(2&r){const t=a.$implicit;e.xp6(2),e.s9C("src",t.image,e.LSH),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.lastName),e.xp6(2),e.Oqu(t.dni),e.xp6(1),e.Q6J("ngIf","ROLE_ADMIN"!=t.rol.toString()),e.xp6(4),e.Q6J("ngIf","ROLE_TEACHER"==t.rol.toString())}}function P(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"app-file-upload",55),e.NdJ("fileName",function(i){return e.CHM(t),e.oxw().setImage(i)}),e.qZA()}}function l(r,a){1&r&&e._UZ(0,"img",56)}function p(r,a){1&r&&e._UZ(0,"img",57)}function v(r,a){1&r&&e._UZ(0,"img",58)}function A(r,a){if(1&r&&e._UZ(0,"img",59),2&r){const t=e.oxw();e.s9C("title",t.existPerson)}}function y(r,a){1&r&&e._UZ(0,"img",60)}function B(r,a){1&r&&e._UZ(0,"img",61)}function Q(r,a){1&r&&e._UZ(0,"img",62)}function z(r,a){1&r&&e._UZ(0,"img",63)}const K=function(r){return{noData:r}};let W=(()=>{class r{constructor(t,n,i,o,u,g,m,b){this.personSvr=t,this.userService=n,this.authService=i,this.http=o,this.formBuilder=u,this.dashboardService=g,this.router=m,this.route=b,this.rolSelected=f.ROLE_TEACHER,this.rolSelectedString="",this.rolAdmin=f.ROLE_ADMIN,this.imageSelected="",this.date=new Date,this.persons=[]}ngOnInit(){this.buildForm(),this.getPersons()}setImage(t){this.imageSelected=_.N.serverFileAddress+"/files/"+t}showFileInput(){return!document.querySelector("#newPersonContainer").classList.contains("noShow")}closeModal(){this.getPersons(),this.formGroup.reset(),this.imageSelected="",document.querySelector("#newPersonContainer").classList.add("noShow")}buildForm(){this.formGroup=this.formBuilder.group({name:["",[c.kI.required]],lastName:["",[c.kI.required]],birthDate:["",[c.kI.required]],dni:["",[c.kI.required,c.kI.pattern("[0-9]{8}[A-Za-z]{1}")],[this.personSvr]],address:["",[c.kI.required]],telefone:["",[c.kI.required,c.kI.pattern("^[0-9]{9}$")]],email:["",[c.kI.required,c.kI.email]],password:["",[c.kI.required,c.kI.minLength(8)]]})}get existPerson(){var t;return(null===(t=this.formGroup.get("dni"))||void 0===t?void 0:t.errors).exist?"Dni registrado":"Indique un dni v\xe1lido"}getPersons(){if(this.rolSelected==f.ROLE_TEACHER){this.rolSelectedString="Profesores",this.dashboardService.setTitle("Profesores");let t=this.personSvr.getTeachers().subscribe({next:n=>{t.unsubscribe(),this.persons=n}})}else if(this.rolSelected==f.ROLE_STUDENT){this.rolSelectedString="Estudiantes",this.dashboardService.setTitle("Estudiantes");let t=this.personSvr.getStudents().subscribe({next:n=>{t.unsubscribe(),this.persons=n}})}else if(this.rolSelected==f.ROLE_LABOR_TUTOR){this.rolSelectedString="Tutores",this.dashboardService.setTitle("Tutores laborales");let t=this.personSvr.getLaborTutor().subscribe({next:n=>{t.unsubscribe(),this.persons=n}})}}find(t){if(this.rolSelected==f.ROLE_TEACHER){this.rolSelectedString="Profesores";let n=this.personSvr.getTeachersFind(t).subscribe({next:i=>{n.unsubscribe(),this.persons=i}})}else if(this.rolSelected==f.ROLE_STUDENT){this.rolSelectedString="Estudiantes";let n=this.personSvr.getStudentsFind(t).subscribe({next:i=>{n.unsubscribe(),this.persons=i}})}else if(this.rolSelected==f.ROLE_LABOR_TUTOR){this.rolSelectedString="Tutores";let n=this.personSvr.getLaborTutorFind(t).subscribe({next:i=>{n.unsubscribe(),this.persons=i}})}}setPerson(t){let n=t.target.value;"teacher"==n?this.rolSelected=f.ROLE_TEACHER:"student"==n?this.rolSelected=f.ROLE_STUDENT:"labor-tutor"==n&&(this.rolSelected=f.ROLE_LABOR_TUTOR),this.getPersons()}showMenu(t){var n;null===(n=t.target.parentElement)||void 0===n||n.classList.add("viewMenu")}noShowMenu(t){t.target.classList.contains("options")||document.querySelectorAll(".person").forEach(o=>{o.classList.remove("viewMenu")})}toggleDisable(t,n){if(n){let i=this.personSvr.disable(t).subscribe({next:()=>{i.unsubscribe(),s().fire({icon:"success",title:"\xa1Hecho!",text:"El usuario con dni "+t+" se ha deshabilitado"}),this.getPersons()},error:o=>{i.unsubscribe(),s().fire({icon:"error",title:"Oops...",text:o.error.mensaje}),this.getPersons()}})}else{let i=this.personSvr.enable(t).subscribe({next:()=>{i.unsubscribe(),s().fire({icon:"success",title:"\xa1Hecho!",text:"El usuario con dni "+t+" se ha habilitado"}),this.getPersons()},error:o=>{i.unsubscribe(),s().fire({icon:"error",title:"Oops...",text:o.error.mensaje}),this.getPersons()}})}}remove(t,n){s().fire({title:"Borrar usuario",text:"Se borrar\xe1n todos los datos relacionados irreversiblemente",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Borrar"}).then(i=>{if(i.isConfirmed)switch(this.rolSelected){case f.ROLE_TEACHER:{let o=this.personSvr.removeTeacher(n).subscribe({next:()=>{o.unsubscribe(),s().fire({icon:"success",title:"\xa1Hecho!",text:"Borrado"}),this.getPersons()},error:u=>{o.unsubscribe(),s().fire({icon:"error",title:"Oops...",text:u.error.mensaje})}});break}case f.ROLE_LABOR_TUTOR:{let o=this.personSvr.removeLaborTutor(n).subscribe({next:()=>{o.unsubscribe(),s().fire({icon:"success",title:"\xa1Hecho!",text:"Borrado"}),this.getPersons()},error:u=>{o.unsubscribe(),s().fire({title:"Oops...",text:u.error.mensaje})}});break}case f.ROLE_STUDENT:{let o=this.personSvr.removeStudent(n).subscribe({next:()=>{o.unsubscribe(),s().fire({icon:"success",title:"\xa1Hecho!",text:"Borrado"}),this.getPersons()},error:u=>{o.unsubscribe(),s().fire({icon:"error",title:"Oops...",text:u.error.mensaje})}});break}}})}addPerson(t){this.rolToCreate=t,document.querySelector("#newPersonContainer").classList.remove("noShow")}createUser(){if(this.formGroup.valid)if(""==this.imageSelected)s().fire({icon:"error",title:"Ooops...",text:"Seleccione una imagen de perfil"});else{let t=this.formGroup.value;t.image=this.imageSelected,t.rol=this.rolToCreate;let n=this.personSvr.createPerson(t).subscribe({next:()=>{n.unsubscribe(),this.getPersons()},error:o=>{n.unsubscribe(),this.getPersons(),s().fire({icon:"error",title:"Ooops...",text:o.error.mensaje})}});this.formGroup.reset(),this.imageSelected="",document.querySelector("#newPersonContainer").classList.add("noShow")}else s().fire({icon:"error",title:"Ooops...",text:"Rellene el formulario correctamente"})}edit(t,n){this.router.navigate([n+"/edit"],{relativeTo:this.route})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(k),e.Y36(E.K),e.Y36(q.e),e.Y36(U.eN),e.Y36(c.qu),e.Y36(F.s),e.Y36(h.F0),e.Y36(h.gz))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-person-management"]],decls:68,vars:23,consts:[["id","searchDivMain",1,"inNewIntro"],["id","bienvenida"],["id","text"],["id","addPerson","src","assets/img/add-icon.png","alt","A\xf1adir","title","A\xf1adir",3,"click"],["id","addPerson","src","assets/img/admin.png","alt","A\xf1adir administrador","title","A\xf1adir administrador",1,"adminIcon",3,"click"],[3,"change"],["value","teacher"],["value","student"],["value","labor-tutor"],["id","searchElement",3,"query"],["id","containerElement",3,"ngClass","click"],["id","noDataImg","src","assets/img/students.png",4,"ngIf"],["id","noDataPTittle",4,"ngIf"],["id","noDataP",4,"ngIf"],["class","person",4,"ngFor","ngForOf"],["id","newPersonContainer",1,"noShow"],["id","newperson"],["id","close","src","assets/img/close.png","title","Cerrar","alt","Cerrar",3,"click"],["id","fileUser"],["id","file",3,"fileName",4,"ngIf"],[3,"formGroup"],["name","name","formControlName","name","type","text"],["class","warning","src","assets/img/warning.png","title","Nombre es requerido",4,"ngIf"],["name","lastName","formControlName","lastName","type","text"],["class","warning","src","assets/img/warning.png","title","Apellidos requeridos",4,"ngIf"],["for","birthDate"],["name","birthDate","formControlName","birthDate","type","date",3,"max"],["class","warning","src","assets/img/warning.png","title","La fecha de nacimiento es requerido",4,"ngIf"],["for","dni"],["name","dni","formControlName","dni","type","dni"],["class","warning","src","assets/img/warning.png",3,"title",4,"ngIf"],["for","address"],["name","address","formControlName","address","type","text"],["class","warning","src","assets/img/warning.png","title","La direcci\xf3n es requerida",4,"ngIf"],["for","telefone"],["name","telefone","formControlName","telefone","type","tel"],["class","warning","src","assets/img/warning.png","title","El tel\xe9fono es requerido",4,"ngIf"],["for","email"],["name","email","formControlName","email","type","email"],["class","warning","src","assets/img/warning.png","title","El correo es requerido",4,"ngIf"],["for","password"],["name","password","formControlName","password","type","password"],["class","warning","src","assets/img/warning.png","title","La contrase\xf1a es requerida",4,"ngIf"],["id","createUser"],[3,"click"],["id","noDataImg","src","assets/img/students.png"],["id","noDataPTittle"],["id","noDataP"],[1,"person"],[3,"src"],["class","options","src","assets/img/points.png","alt","Opciones","title","Opciones",3,"click",4,"ngIf"],[1,"more-option"],[3,"click",4,"ngIf"],[1,"danger",3,"click"],["src","assets/img/points.png","alt","Opciones","title","Opciones",1,"options",3,"click"],["id","file",3,"fileName"],["src","assets/img/warning.png","title","Nombre es requerido",1,"warning"],["src","assets/img/warning.png","title","Apellidos requeridos",1,"warning"],["src","assets/img/warning.png","title","La fecha de nacimiento es requerido",1,"warning"],["src","assets/img/warning.png",1,"warning",3,"title"],["src","assets/img/warning.png","title","La direcci\xf3n es requerida",1,"warning"],["src","assets/img/warning.png","title","El tel\xe9fono es requerido",1,"warning"],["src","assets/img/warning.png","title","El correo es requerido",1,"warning"],["src","assets/img/warning.png","title","La contrase\xf1a es requerida",1,"warning"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"p"),e._uU(4,"Administraci\xf3n de personas"),e.qZA(),e.TgZ(5,"p"),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"img",3),e.NdJ("click",function(){return n.addPerson(n.rolSelected)}),e.qZA(),e.TgZ(8,"img",4),e.NdJ("click",function(){return n.addPerson(n.rolAdmin)}),e.qZA(),e.TgZ(9,"select",5),e.NdJ("change",function(o){return n.setPerson(o)}),e.TgZ(10,"option",6),e._uU(11,"Profesores"),e.qZA(),e.TgZ(12,"option",7),e._uU(13,"Estudiantes"),e.qZA(),e.TgZ(14,"option",8),e._uU(15,"Tutores"),e.qZA(),e.qZA(),e.TgZ(16,"search",9),e.NdJ("query",function(o){return n.find(o)}),e.qZA(),e.qZA(),e.TgZ(17,"div",10),e.NdJ("click",function(o){return n.noShowMenu(o)}),e.YNc(18,D,1,0,"img",11),e.YNc(19,H,2,0,"p",12),e.YNc(20,J,2,0,"p",13),e.YNc(21,j,16,6,"div",14),e.qZA(),e.qZA(),e.TgZ(22,"div",15),e.TgZ(23,"div",16),e.TgZ(24,"img",17),e.NdJ("click",function(){return n.closeModal()}),e.qZA(),e.TgZ(25,"p"),e._uU(26),e.qZA(),e.TgZ(27,"div",18),e.TgZ(28,"p"),e._uU(29,"Foto de perfil"),e.qZA(),e.YNc(30,P,1,0,"app-file-upload",19),e.qZA(),e.TgZ(31,"form",20),e.TgZ(32,"label"),e._uU(33,"Nombre"),e.qZA(),e._UZ(34,"input",21),e.YNc(35,l,1,0,"img",22),e.TgZ(36,"label"),e._uU(37,"Apellidos"),e.qZA(),e._UZ(38,"input",23),e.YNc(39,p,1,0,"img",24),e.TgZ(40,"label",25),e._uU(41,"Fecha de nacimiento"),e.qZA(),e._UZ(42,"input",26),e.ALo(43,"date"),e.YNc(44,v,1,0,"img",27),e.TgZ(45,"label",28),e._uU(46,"Dni"),e.qZA(),e._UZ(47,"input",29),e.YNc(48,A,1,1,"img",30),e.TgZ(49,"label",31),e._uU(50,"Direcci\xf3n"),e.qZA(),e._UZ(51,"input",32),e.YNc(52,y,1,0,"img",33),e.TgZ(53,"label",34),e._uU(54,"Tel\xe9fono"),e.qZA(),e._UZ(55,"input",35),e.YNc(56,B,1,0,"img",36),e.TgZ(57,"label",37),e._uU(58,"Correo"),e.qZA(),e._UZ(59,"input",38),e.YNc(60,Q,1,0,"img",39),e.TgZ(61,"label",40),e._uU(62,"Contrase\xf1a"),e.qZA(),e._UZ(63,"input",41),e.YNc(64,z,1,0,"img",42),e.qZA(),e.TgZ(65,"div",43),e.TgZ(66,"button",44),e.NdJ("click",function(){return n.createUser()}),e._uU(67,"Crear usuario"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){let i,o,u,g,m,b,O,M;e.xp6(6),e.hij(" ",n.rolSelectedString," de la aplicaci\xf3n "),e.xp6(11),e.Q6J("ngClass",e.VKq(21,K,0==n.persons.length)),e.xp6(1),e.Q6J("ngIf",0==n.persons.length),e.xp6(1),e.Q6J("ngIf",0==n.persons.length),e.xp6(1),e.Q6J("ngIf",0==n.persons.length),e.xp6(1),e.Q6J("ngForOf",n.persons),e.xp6(5),e.hij("Creaci\xf3n de ",n.rolToCreate==n.rolAdmin?"administradores":n.rolSelectedString,""),e.xp6(4),e.Q6J("ngIf",n.showFileInput),e.xp6(1),e.Q6J("formGroup",n.formGroup),e.xp6(4),e.Q6J("ngIf",n.formGroup.get("name").touched&&(null==(i=n.formGroup.get("name"))?null:i.errors)),e.xp6(4),e.Q6J("ngIf",n.formGroup.get("lastName").touched&&(null==(o=n.formGroup.get("lastName"))?null:o.errors)),e.xp6(3),e.s9C("max",e.xi3(43,18,n.date,"yyyy-MM-dd")),e.xp6(2),e.Q6J("ngIf",n.formGroup.get("birthDate").touched&&(null==(u=n.formGroup.get("birthDate"))?null:u.errors)),e.xp6(4),e.Q6J("ngIf",n.formGroup.get("dni").touched&&(null==(g=n.formGroup.get("dni"))?null:g.errors)),e.xp6(4),e.Q6J("ngIf",n.formGroup.get("address").touched&&(null==(m=n.formGroup.get("address"))?null:m.errors)),e.xp6(4),e.Q6J("ngIf",n.formGroup.get("telefone").touched&&(null==(b=n.formGroup.get("telefone"))?null:b.errors)),e.xp6(4),e.Q6J("ngIf",n.formGroup.get("email").touched&&(null==(O=n.formGroup.get("email"))?null:O.errors)),e.xp6(4),e.Q6J("ngIf",n.formGroup.get("password").touched&&(null==(M=n.formGroup.get("password"))?null:M.errors))}},directives:[c.YN,c.Kr,R.g,x.mk,x.O5,x.sg,L.Y,c._Y,c.JL,c.sg,c.Fj,c.JJ,c.u],pipes:[x.uU],styles:["#searchDivMain[_ngcontent-%COMP%]{height:100%;overflow:auto}#bienvenida[_ngcontent-%COMP%]{height:160px;position:relative;display:flex}#bienvenida[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:50%;display:flex;flex-direction:column;justify-content:center}#bienvenida[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){align-items:flex-end}#text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(1){font-weight:600;margin-bottom:5px;font-size:20px}#text[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:nth-child(2){opacity:.7}#text[_ngcontent-%COMP%]{padding-left:5%}#containerTable[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%}table[_ngcontent-%COMP%]{width:80%}#containerElement[_ngcontent-%COMP%]{width:100%;height:60%;display:flex;justify-content:center;gap:42px;flex-wrap:wrap}.person[_ngcontent-%COMP%]{overflow:hidden;position:relative;justify-content:center;display:flex;flex-direction:column;align-content:center;align-items:center;max-width:168px;background-color:#efefef;height:229px;width:90%;border-radius:5px;box-shadow:0 5px 5px #bebebe}.person[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){border-radius:50%;width:110px;height:110px;overflow:hidden;display:flex;justify-content:center;align-items:center;margin-bottom:10px}.person[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(2){font-size:20px}.person[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(3){opacity:.7;font-size:12px}.person[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(4){position:relative;top:10px;font-size:13px}.person[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1)   img[_ngcontent-%COMP%]{height:100%}select[_ngcontent-%COMP%]{position:absolute;top:104px;right:48px;border:none;background-color:#ececec;width:128px;height:30px}#addPerson[_ngcontent-%COMP%]{position:absolute;top:109px;right:193px;width:20px}.options[_ngcontent-%COMP%]{width:14px;position:absolute;top:11px;right:7px}.more-option[_ngcontent-%COMP%]{animation-name:more;animation-duration:.2s;border-radius:5px;overflow:hidden;position:absolute;top:5px;right:0;width:125px;box-shadow:0 5px 5px #46464621;height:max-content;display:none}@keyframes more{0%{transform:scale(.2)}to{transform:scale(1)}}.viewMenu[_ngcontent-%COMP%]   .more-option[_ngcontent-%COMP%]{display:initial!important}.more-option[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-top:5px;font-size:initial!important;opacity:initial!important;width:100%;height:30px;padding-left:15px;transition:.2s;background-color:#fff}.more-option[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{background-color:#e6e6e6}.danger[_ngcontent-%COMP%]:hover{background-color:#ff6060!important;color:#fff}#searchElement[_ngcontent-%COMP%]{position:absolute;right:20px;top:53px}#newPersonContainer[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;bottom:0;left:0;right:0;background-color:#00000072;display:flex;justify-content:center;align-items:center}#newperson[_ngcontent-%COMP%]{width:90%;max-width:400px;height:400px;background-color:#fff;overflow:auto;position:relative;top:-20px}.noShow[_ngcontent-%COMP%]{display:none!important}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:80%}form[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{border:none;height:30px;background-color:#e9e9e9;margin-bottom:5px;margin-top:5px;padding-right:10px;padding-left:10px}#newperson[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:20px;margin-bottom:23px;margin-top:27px;margin-left:32px}#fileUser[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;width:100%!important;height:200px!important;margin-bottom:10px}#createUser[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center}#createUser[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{border:none;height:30px;padding-left:10px;padding-right:10px;width:150px;margin-bottom:10px}#fileUser[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{margin-bottom:14px}.warning[_ngcontent-%COMP%]{width:20px!important;position:relative;bottom:29px;right:-173px}.adminIcon[_ngcontent-%COMP%]{right:220px!important}#close[_ngcontent-%COMP%]{width:11px;position:absolute;top:21px;right:16px}.noData[_ngcontent-%COMP%]{flex-direction:column!important;align-items:center!important;flex-wrap:nowrap!important;gap:12px!important}#noDataImg[_ngcontent-%COMP%]{width:90%;max-width:258px}#noDataP[_ngcontent-%COMP%]{opacity:.7;max-width:253px;text-align:center}#noDataPTittle[_ngcontent-%COMP%]{font-size:20px}"]}),r})();function V(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"app-file-upload",10),e.NdJ("fileName",function(i){return e.CHM(t),e.oxw().setNewImage(i)}),e.qZA()}}function X(r,a){1&r&&e._UZ(0,"img",30)}function ee(r,a){1&r&&e._UZ(0,"img",31)}function te(r,a){1&r&&e._UZ(0,"img",32)}function ne(r,a){1&r&&e._UZ(0,"img",33)}function re(r,a){1&r&&e._UZ(0,"img",34)}function ie(r,a){1&r&&e._UZ(0,"img",35)}function oe(r,a){if(1&r&&(e.TgZ(0,"form",11),e.TgZ(1,"p",12),e._uU(2,"Datos del usuario"),e.qZA(),e.TgZ(3,"div",13),e.TgZ(4,"div"),e.TgZ(5,"label"),e._uU(6,"Nombre"),e.qZA(),e._UZ(7,"input",14),e.YNc(8,X,1,0,"img",15),e.TgZ(9,"label"),e._uU(10,"Apellidos"),e.qZA(),e._UZ(11,"input",16),e.YNc(12,ee,1,0,"img",17),e.TgZ(13,"label",18),e._uU(14,"Nacimiento"),e.qZA(),e._UZ(15,"input",19),e.ALo(16,"date"),e.YNc(17,te,1,0,"img",20),e.TgZ(18,"label",21),e._uU(19,"Direcci\xf3n"),e.qZA(),e._UZ(20,"input",22),e.YNc(21,ne,1,0,"img",23),e.qZA(),e.TgZ(22,"div"),e.TgZ(23,"label",24),e._uU(24,"Tel\xe9fono"),e.qZA(),e._UZ(25,"input",25),e.YNc(26,re,1,0,"img",26),e.TgZ(27,"label",27),e._uU(28,"Correo"),e.qZA(),e._UZ(29,"input",28),e.YNc(30,ie,1,0,"img",29),e.qZA(),e.qZA(),e.qZA()),2&r){const t=e.oxw();let n,i,o,u,g,m;e.Q6J("formGroup",t.formGroup),e.xp6(7),e.uIk("disabled",t.editMode?null:""),e.xp6(1),e.Q6J("ngIf",t.formGroup.get("name").touched&&(null==(n=t.formGroup.get("name"))?null:n.errors)),e.xp6(3),e.uIk("disabled",t.editMode?null:""),e.xp6(1),e.Q6J("ngIf",t.formGroup.get("lastName").touched&&(null==(i=t.formGroup.get("lastName"))?null:i.errors)),e.xp6(3),e.s9C("max",e.xi3(16,14,t.date,"yyyy-MM-dd")),e.uIk("disabled",t.editMode?null:""),e.xp6(2),e.Q6J("ngIf",t.formGroup.get("birthDate").touched&&(null==(o=t.formGroup.get("birthDate"))?null:o.errors)),e.xp6(3),e.uIk("disabled",t.editMode?null:""),e.xp6(1),e.Q6J("ngIf",t.formGroup.get("address").touched&&(null==(u=t.formGroup.get("address"))?null:u.errors)),e.xp6(4),e.uIk("disabled",t.editMode?null:""),e.xp6(1),e.Q6J("ngIf",t.formGroup.get("telefone").touched&&(null==(g=t.formGroup.get("telefone"))?null:g.errors)),e.xp6(3),e.uIk("disabled",t.editMode?null:""),e.xp6(1),e.Q6J("ngIf",t.formGroup.get("email").touched&&(null==(m=t.formGroup.get("email"))?null:m.errors))}}function se(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){return e.CHM(t),e.oxw().save()}),e._uU(1,"Guardar"),e.qZA()}}function ae(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"button",37),e.NdJ("click",function(){return e.CHM(t),e.oxw().changePassword()}),e._uU(1,"Cambiar Contrase\xf1a"),e.qZA()}}let le=(()=>{class r{constructor(t,n,i,o){this.personServiceService=t,this.rutaActiva=n,this.formBuilder=i,this.userSrv=o,this.currentPerson={},this.date=new Date,this.editMode=!1}ngOnInit(){let t=this.rutaActiva.snapshot.params.dni,n=this.personServiceService.getPersonByDni(t).subscribe({next:i=>{var o,u;n.unsubscribe(),this.currentPerson=i,(this.userSrv.getDni()==t||"ROLE_ADMIN"==(null===(u=null===(o=this.userSrv.getPerson())||void 0===o?void 0:o.rol)||void 0===u?void 0:u.toString()))&&(this.editMode=!0),this.buildForm()},error:i=>{n.unsubscribe(),s().fire({icon:"error",title:"Oops...",text:i.error.mensaje}),this.back()}})}reloadPerson(){let t=this.personServiceService.getPersonByDni(this.rutaActiva.snapshot.params.dni).subscribe({next:n=>{t.unsubscribe(),this.currentPerson=n},error:n=>{t.unsubscribe(),s().fire({icon:"error",title:"Oops...",text:n.error.mensaje}),this.back()}})}setNewImage(t){let n=this.personServiceService.getPersonByDni(this.currentPerson.dni).subscribe({next:i=>{var o,u,g,m;n.unsubscribe();let b=i;if(b.password=void 0,b.image=_.N.serverFileAddress+"/files/"+t,"ROLE_TEACHER"==(null===(o=this.currentPerson.rol)||void 0===o?void 0:o.toString())){let O=this.personServiceService.editTeacher(b).subscribe({next:()=>{O.unsubscribe(),this.reloadPerson(),s().fire({icon:"success",title:"\xa1Hecho!"})},error:M=>{O.unsubscribe(),s().fire({icon:"error",title:"Oops...",text:M.error.mensaje})}})}else if("ROLE_STUDENT"==(null===(u=this.currentPerson.rol)||void 0===u?void 0:u.toString())){let O=this.personServiceService.editStudent(b).subscribe({next:()=>{O.unsubscribe(),this.reloadPerson(),s().fire({icon:"success",title:"\xa1Hecho!"})},error:M=>{O.unsubscribe(),s().fire({icon:"error",title:"Oops...",text:M.error.mensaje})}})}else if("ROLE_LABOR_TUTOR"==(null===(g=this.currentPerson.rol)||void 0===g?void 0:g.toString())){let O=this.personServiceService.editTutor(b).subscribe({next:()=>{O.unsubscribe(),this.reloadPerson(),s().fire({icon:"success",title:"\xa1Hecho!"})},error:M=>{O.unsubscribe(),s().fire({icon:"error",title:"Oops...",text:M.error.mensaje})}})}else if("ROLE_ADMIN"==(null===(m=this.currentPerson.rol)||void 0===m?void 0:m.toString())){let O=this.personServiceService.editAdmin(b).subscribe({next:()=>{O.unsubscribe(),this.reloadPerson(),s().fire({icon:"success",title:"\xa1Hecho!"})},error:M=>{O.unsubscribe(),s().fire({icon:"error",title:"Oops...",text:M.error.mensaje})}})}},error:i=>{n.unsubscribe(),s().fire({icon:"error",title:"Oops...",text:i.error.mensaje}),this.back()}})}buildForm(){var t;let n=null===(t=this.currentPerson.birthDate)||void 0===t?void 0:t.toString().split("T")[0];this.formGroup=this.formBuilder.group({name:[this.currentPerson.name,[c.kI.required]],lastName:[this.currentPerson.lastName,[c.kI.required]],birthDate:[n,[c.kI.required]],address:[this.currentPerson.address,[c.kI.required]],telefone:[this.currentPerson.telefone,[c.kI.required,c.kI.pattern("^[0-9]{9}$")]],email:[this.currentPerson.email,[c.kI.required,c.kI.email]]})}back(){history.back()}save(){this.formGroup.valid?this.editPerson():s().fire({icon:"error",title:"Oops...",text:"Rellene todos los campos correctamente"})}changePassword(){s().fire({title:"Indique nueva contrase\xf1a",input:"password",inputAttributes:{autocapitalize:"off"},preConfirm:t=>{t.length<8&&s().showValidationMessage("La contrase\xf1a debe ser igual o superior a 8 car\xe1cteres")},showCancelButton:!0,confirmButtonText:"Cambiar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0,allowOutsideClick:()=>!s().isLoading()}).then(t=>{var n,i,o,u;let g=this.currentPerson;if(g.password=t.value,"ROLE_TEACHER"==(null===(n=this.currentPerson.rol)||void 0===n?void 0:n.toString())){let m=this.personServiceService.editTeacher(g).subscribe({next:()=>{m.unsubscribe(),this.reloadPerson(),s().fire({icon:"success",title:"\xa1Hecho!"})},error:b=>{m.unsubscribe(),s().fire({icon:"error",title:"Oops...",text:b.error.mensaje})}})}else if("ROLE_STUDENT"==(null===(i=this.currentPerson.rol)||void 0===i?void 0:i.toString())){let m=this.personServiceService.editStudent(g).subscribe({next:()=>{m.unsubscribe(),this.reloadPerson(),s().fire({icon:"success",title:"\xa1Hecho!"})},error:b=>{m.unsubscribe(),s().fire({icon:"error",title:"Oops...",text:b.error.mensaje})}})}else if("ROLE_LABOR_TUTOR"==(null===(o=this.currentPerson.rol)||void 0===o?void 0:o.toString())){let m=this.personServiceService.editTutor(g).subscribe({next:()=>{m.unsubscribe(),this.reloadPerson(),s().fire({icon:"success",title:"\xa1Hecho!"})},error:b=>{m.unsubscribe(),s().fire({icon:"error",title:"Oops...",text:b.error.mensaje})}})}else if("ROLE_ADMIN"==(null===(u=this.currentPerson.rol)||void 0===u?void 0:u.toString())){let m=this.personServiceService.editAdmin(g).subscribe({next:()=>{m.unsubscribe(),this.reloadPerson(),s().fire({icon:"success",title:"\xa1Hecho!"})},error:b=>{m.unsubscribe(),s().fire({icon:"error",title:"Oops...",text:b.error.mensaje})}})}})}editPerson(){var t,n,i,o;let u=this.formGroup.value;if(u.dni=this.currentPerson.dni,u.password=void 0,"ROLE_TEACHER"==(null===(t=this.currentPerson.rol)||void 0===t?void 0:t.toString())){let g=this.personServiceService.editTeacher(u).subscribe({next:()=>{g.unsubscribe(),this.reloadPerson(),s().fire({icon:"success",title:"\xa1Hecho!"})},error:m=>{g.unsubscribe(),s().fire({icon:"error",title:"Oops...",text:m.error.mensaje})}})}else if("ROLE_STUDENT"==(null===(n=this.currentPerson.rol)||void 0===n?void 0:n.toString())){let g=this.personServiceService.editStudent(u).subscribe({next:()=>{g.unsubscribe(),this.reloadPerson(),s().fire({icon:"success",title:"\xa1Hecho!"})},error:m=>{g.unsubscribe(),s().fire({icon:"error",title:"Oops...",text:m.error.mensaje})}})}else if("ROLE_LABOR_TUTOR"==(null===(i=this.currentPerson.rol)||void 0===i?void 0:i.toString())){let g=this.personServiceService.editTutor(u).subscribe({next:()=>{g.unsubscribe(),this.reloadPerson(),s().fire({icon:"success",title:"\xa1Hecho!"})},error:m=>{g.unsubscribe(),this.reloadPerson(),s().fire({icon:"error",title:"Oops...",text:m.error.mensaje})}})}else if("ROLE_ADMIN"==(null===(o=this.currentPerson.rol)||void 0===o?void 0:o.toString())){let g=this.personServiceService.editAdmin(u).subscribe({next:()=>{g.unsubscribe(),this.reloadPerson(),s().fire({icon:"success",title:"\xa1Hecho!"})},error:m=>{g.unsubscribe(),this.reloadPerson(),s().fire({icon:"error",title:"Oops...",text:m.error.mensaje})}})}}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(k),e.Y36(h.gz),e.Y36(c.qu),e.Y36(E.K))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-edit-person"]],decls:15,vars:7,consts:[["id","mainDiv",1,"inNewIntro"],["id","title"],[1,"degreesText",3,"click"],["id","content"],["id","image"],["id","imageUpload",3,"fileName",4,"ngIf"],[3,"src"],[3,"formGroup",4,"ngIf"],["id","save",3,"click",4,"ngIf"],["id","save2",3,"click",4,"ngIf"],["id","imageUpload",3,"fileName"],[3,"formGroup"],["id","titleData"],["id","formContainer"],["name","name","formControlName","name","type","text"],["class","warning","src","assets/img/warning.png","title","Nombre es requerido",4,"ngIf"],["name","lastName","formControlName","lastName","type","text"],["class","warning","src","assets/img/warning.png","title","Apellidos requeridos",4,"ngIf"],["for","birthDate"],["name","birthDate","formControlName","birthDate","type","date",3,"max"],["class","warning","src","assets/img/warning.png","title","La fecha de nacimiento es requerido",4,"ngIf"],["for","address"],["name","address","formControlName","address","type","text"],["class","warning","src","assets/img/warning.png","title","La direcci\xf3n es requerida",4,"ngIf"],["for","telefone"],["name","telefone","formControlName","telefone","type","tel"],["class","warning","src","assets/img/warning.png","title","El tel\xe9fono es requerido",4,"ngIf"],["for","email"],["name","email","formControlName","email","type","email"],["class","warning","src","assets/img/warning.png","title","El correo es requerido",4,"ngIf"],["src","assets/img/warning.png","title","Nombre es requerido",1,"warning"],["src","assets/img/warning.png","title","Apellidos requeridos",1,"warning"],["src","assets/img/warning.png","title","La fecha de nacimiento es requerido",1,"warning"],["src","assets/img/warning.png","title","La direcci\xf3n es requerida",1,"warning"],["src","assets/img/warning.png","title","El tel\xe9fono es requerido",1,"warning"],["src","assets/img/warning.png","title","El correo es requerido",1,"warning"],["id","save",3,"click"],["id","save2",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"p"),e.TgZ(3,"span",2),e.NdJ("click",function(){return n.back()}),e._uU(4,"Personas > "),e.qZA(),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"div",3),e.TgZ(7,"div"),e.TgZ(8,"div",4),e.YNc(9,V,1,0,"app-file-upload",5),e._UZ(10,"img",6),e.qZA(),e.qZA(),e.TgZ(11,"div"),e.YNc(12,oe,31,17,"form",7),e.YNc(13,se,2,0,"button",8),e.YNc(14,ae,2,0,"button",9),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.AsE("",n.currentPerson.name," ",n.currentPerson.lastName,""),e.xp6(4),e.Q6J("ngIf",n.editMode),e.xp6(1),e.s9C("src",n.currentPerson.image,e.LSH),e.xp6(2),e.Q6J("ngIf",n.formGroup),e.xp6(1),e.Q6J("ngIf",n.editMode),e.xp6(1),e.Q6J("ngIf",n.editMode))},directives:[x.O5,L.Y,c._Y,c.JL,c.sg,c.Fj,c.JJ,c.u],pipes:[x.uU],styles:["#mainDiv[_ngcontent-%COMP%]{width:100%;height:100%;overflow:auto}#title[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{padding-left:4%}#title[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:nth-child(1){font-size:20px;font-weight:600}#title[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:nth-child(2){opacity:.7}#title[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:nth-child(1){margin-top:40px}.degreesText[_ngcontent-%COMP%]{opacity:.7}#content[_ngcontent-%COMP%]{display:flex;width:100%;margin-top:7%!important;height:70%;margin-top:40px}#content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:50%;height:100%;align-items:center;display:flex;align-content:center;justify-content:center}#image[_ngcontent-%COMP%]{border-radius:50%;overflow:hidden;height:250px;width:250px;margin-top:8%;position:relative}#image[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:100%}.warning[_ngcontent-%COMP%]{width:20px;position:relative;top:-24px;left:83%;margin-bottom:-20px}form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:50%}#content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){flex-direction:column}#content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2) > form[_ngcontent-%COMP%]{width:90%;display:flex;flex-direction:column}#titleData[_ngcontent-%COMP%]{font-size:20px;margin-bottom:20px}input[_ngcontent-%COMP%]{border:none;height:30px;width:80%;margin-top:5px;background-color:#e7e7e7;padding-left:5px;padding-right:5px}label[_ngcontent-%COMP%]{margin-bottom:5px;margin-top:5px}#formContainer[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;flex-wrap:wrap}#formContainer[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:50%;display:flex;flex-direction:column;min-width:220px}#content[_ngcontent-%COMP%]{margin-top:20px!important}#save[_ngcontent-%COMP%]{height:30px;margin-top:20px;width:100px;border:none}#save2[_ngcontent-%COMP%]{height:30px;margin-top:20px;width:150px;border:none}@media (max-width: 1034px){#content[_ngcontent-%COMP%]{flex-direction:column;width:100%;display:flex;align-items:center}#content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1){width:100%}#content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){width:100%;margin-top:40px}#image[_ngcontent-%COMP%]{margin-top:2%}}@media (max-width: 560px){form[_ngcontent-%COMP%]{margin-top:100px}#formContainer[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%}#save[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:31px}}#imageUpload[_ngcontent-%COMP%]{width:100%;height:100%;opacity:0;position:absolute;top:0}"]}),r})();const de=[{path:"management",component:W,canActivate:[d(374).p]},{path:"management/:dni/edit",component:le}];let ue=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[h.Bz.forChild(de)],h.Bz]}),r})();!function(){function r(a,t,n){this.el=a,this.vcr=t,this.renderer=n,this.dtOptions={}}r.prototype.ngOnInit=function(){var a=this;this.dtTrigger?this.dtTrigger.subscribe(function(t){a.displayTable(t)}):this.displayTable(null)},r.prototype.ngOnDestroy=function(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.dt&&this.dt.destroy(!0)},r.prototype.displayTable=function(a){var t=this;a&&(this.dtOptions=a),this.dtInstance=new Promise(function(n,i){Promise.resolve(t.dtOptions).then(function(o){0===Object.keys(o).length&&0===$("tbody tr",t.el.nativeElement).length?i("Both the table and dtOptions cannot be empty"):setTimeout(function(){var g={rowCallback:function(m,b,O){if(o.columns){var M=o.columns;t.applyNgPipeTransform(m,M),t.applyNgRefTemplate(m,M,b)}o.rowCallback&&o.rowCallback(m,b,O)}};g=Object.assign({},o,g),t.dt=$(t.el.nativeElement).DataTable(g),n(t.dt)})})})},r.prototype.applyNgPipeTransform=function(a,t){t.filter(function(i){return i.ngPipeInstance&&!i.ngTemplateRef}).forEach(function(i){var o=i.ngPipeInstance,u=i.ngPipeArgs||[],g=t.findIndex(function(M){return M.data===i.data}),m=a.childNodes.item(g),b=$(m).text(),O=o.transform.apply(o,function(r,a,t){if(t||2===arguments.length)for(var o,n=0,i=a.length;n<i;n++)(o||!(n in a))&&(o||(o=Array.prototype.slice.call(a,0,n)),o[n]=a[n]);return r.concat(o||Array.prototype.slice.call(a))}([b],u,!1));$(m).text(O)})},r.prototype.applyNgRefTemplate=function(a,t,n){var i=this;t.filter(function(u){return u.ngTemplateRef&&!u.ngPipeInstance}).forEach(function(u){var g=u.ngTemplateRef,m=g.ref,b=g.context,O=t.findIndex(function(ve){return ve.data===u.data}),M=a.childNodes.item(O);$(M).html("");var fe=Object.assign({},b,null==b?void 0:b.userData,{adtData:n}),_e=i.vcr.createEmbeddedView(m,fe);i.renderer.appendChild(M,_e.rootNodes[0])})},r.\u0275fac=function(t){return new(t||r)(e.Y36(e.SBq),e.Y36(e.s_b),e.Y36(e.Qsj))},r.\u0275dir=e.lG2({type:r,selectors:[["","datatable",""]],inputs:{dtOptions:"dtOptions",dtTrigger:"dtTrigger"}})}();var ge=function(){function r(){}return r.forRoot=function(){return{ngModule:r}},r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[x.ez]]}),r}(),me=d(4466);let he=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[x.ez,ge,ue,me.m,c.UX,c.u5]]}),r})()},8083:(I,Z,d)=>{d.d(Z,{g:()=>h});var x=d(1223);let h=(()=>{class f{constructor(){this.query=new x.vpe}ngOnInit(){}send(s){this.query.emit(s.target.value)}}return f.\u0275fac=function(s){return new(s||f)},f.\u0275cmp=x.Xpm({type:f,selectors:[["search"]],outputs:{query:"query"},decls:3,vars:0,consts:[["id","input-div"],["autocomplete","off","name","search","type","text","placeholder","Buscar",3,"keyup"],["src","assets/img/find.png","id","find-img"]],template:function(s,c){1&s&&(x.TgZ(0,"div",0),x.TgZ(1,"input",1),x.NdJ("keyup",function(e){return c.send(e)}),x.qZA(),x._UZ(2,"img",2),x.qZA())},styles:["input[_ngcontent-%COMP%]{border:none;background-color:#f0f0f0;height:39px;width:100%;max-width:230px;border-radius:7px;padding-left:50px}#input-div[_ngcontent-%COMP%]{position:relative}#find-img[_ngcontent-%COMP%]{width:19px;position:absolute;top:10px;left:15px}input[_ngcontent-%COMP%]:focus{outline:none!important}"]}),f})()},9976:(I,Z,d)=>{d.d(Z,{Y:()=>_});var x=d(520),h=d(1223),f=d(2340);let w=(()=>{class e{constructor(C){this.http=C}upload(C){const T=new FormData;T.append("file",C);const N=new x.aW("POST",`${f.N.serverFileAddress}/upload`,T,{reportProgress:!0,responseType:"json"});return this.http.request(N)}}return e.\u0275fac=function(C){return new(C||e)(h.LFG(x.eN))},e.\u0275prov=h.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var s=d(9808);function c(e,S){if(1&e&&(h.TgZ(0,"p",4),h._uU(1),h.qZA()),2&e){const C=h.oxw();h.xp6(1),h.hij("",C.progress," %")}}let _=(()=>{class e{constructor(C){this.fileService=C,this.textToShow="",this.fileName=new h.vpe,this.progress=0,this.message=""}ngOnInit(){}selectFile(C){this.selectedFiles=C.target.files,this.upload()}upload(){if(this.progress=0,this.selectedFiles){const C=this.selectedFiles.item(0);C&&(this.currentFile=C,this.fileService.upload(this.currentFile).subscribe({next:T=>{T.type===x.dt.UploadProgress?this.progress=Math.round(100*T.loaded/T.total):T instanceof x.Zn&&this.fileName.emit(T.body.id)},error:T=>{this.progress=0,this.message=T.error&&T.error.message?T.error.message:"Error al subir",this.currentFile=void 0}})),this.selectedFiles=void 0}}}return e.\u0275fac=function(C){return new(C||e)(h.Y36(w))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-file-upload"]],inputs:{textToShow:"textToShow"},outputs:{fileName:"fileName"},decls:5,vars:2,consts:[[1,"custom-input-file","col-md-6","col-sm-6","col-xs-6"],["type","file","accept",".bmp,.jpg,.png",1,"input-file",3,"change"],["src","assets/img/upload.png"],["id","progress",4,"ngIf"],["id","progress"]],template:function(C,T){1&C&&(h.TgZ(0,"div",0),h.TgZ(1,"input",1),h.NdJ("change",function(E){return T.selectFile(E)}),h.qZA(),h._uU(2),h._UZ(3,"img",2),h.YNc(4,c,2,1,"p",3),h.qZA()),2&C&&(h.xp6(2),h.hij(" ",T.textToShow," "),h.xp6(2),h.Q6J("ngIf",0!=T.progress))},directives:[s.O5],styles:[".custom-input-file[_ngcontent-%COMP%]{background-color:#f6f6f6;cursor:pointer;margin:0 auto;border:1px dashed grey;overflow:hidden;position:relative;text-align:center;width:100%;height:100%}.custom-input-file[_ngcontent-%COMP%]   .input-file[_ngcontent-%COMP%]{border:10000px solid transparent;cursor:pointer;font-size:10000px;margin:0;opacity:0;outline:0 none;padding:0;position:absolute;right:-1000px;top:-1000px}.input-file[_ngcontent-%COMP%]{z-index:10}img[_ngcontent-%COMP%]{width:70px;margin-top:20px;animation-duration:2s;animation-name:animate;margin-bottom:20px;animation-iteration-count:infinite}div[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:5px;align-items:center;justify-content:center;padding:20px}@keyframes animate{0%{transform:translateY(0)}50%{transform:translateY(-10px)}to{transform:translateY(0)}}"]}),e})()},9275:(I,Z,d)=>{d.d(Z,{g:()=>j});var x=d(727);class h extends x.w0{constructor(l,p){super()}schedule(l,p=0){return this}}const f={setInterval(...P){const{delegate:l}=f;return((null==l?void 0:l.setInterval)||setInterval)(...P)},clearInterval(P){const{delegate:l}=f;return((null==l?void 0:l.clearInterval)||clearInterval)(P)},delegate:void 0};var w=d(8737);const c={now:()=>(c.delegate||Date).now(),delegate:void 0};class _{constructor(l,p=_.now){this.schedulerActionCtor=l,this.now=p}schedule(l,p=0,v){return new this.schedulerActionCtor(this,l).schedule(v,p)}}_.now=c.now;const S=new class e extends _{constructor(l,p=_.now){super(l,p),this.actions=[],this._active=!1,this._scheduled=void 0}flush(l){const{actions:p}=this;if(this._active)return void p.push(l);let v;this._active=!0;do{if(v=l.execute(l.state,l.delay))break}while(l=p.shift());if(this._active=!1,v){for(;l=p.shift();)l.unsubscribe();throw v}}}(class s extends h{constructor(l,p){super(l,p),this.scheduler=l,this.work=p,this.pending=!1}schedule(l,p=0){if(this.closed)return this;this.state=l;const v=this.id,A=this.scheduler;return null!=v&&(this.id=this.recycleAsyncId(A,v,p)),this.pending=!0,this.delay=p,this.id=this.id||this.requestAsyncId(A,this.id,p),this}requestAsyncId(l,p,v=0){return f.setInterval(l.flush.bind(l,this),v)}recycleAsyncId(l,p,v=0){if(null!=v&&this.delay===v&&!1===this.pending)return p;f.clearInterval(p)}execute(l,p){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const v=this._execute(l,p);if(v)return v;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(l,p){let A,v=!1;try{this.work(l)}catch(y){v=!0,A=y||new Error("Scheduled action threw falsy error")}if(v)return this.unsubscribe(),A}unsubscribe(){if(!this.closed){const{id:l,scheduler:p}=this,{actions:v}=p;this.work=this.state=this.scheduler=null,this.pending=!1,(0,w.P)(v,this),null!=l&&(this.id=this.recycleAsyncId(p,l,null)),this.delay=null,super.unsubscribe()}}}),C=S;var T=d(7272),N=d(5698),E=d(4482),q=d(5403),U=d(5032),F=d(4004),L=d(5577);function D(P,l){return l?p=>(0,T.z)(l.pipe((0,N.q)(1),function k(){return(0,E.e)((P,l)=>{P.subscribe(new q.Q(l,U.Z))})}()),p.pipe(D(P))):(0,L.z)((p,v)=>P(p,v).pipe((0,N.q)(1),function R(P){return(0,F.U)(()=>P)}(p)))}var H=d(8306),J=d(3532);function j(P,l=S){const p=function Y(P=0,l,p=C){let v=-1;return null!=l&&((0,J.K)(l)?p=l:v=l),new H.y(A=>{let y=function G(P){return P instanceof Date&&!isNaN(P)}(P)?+P-p.now():P;y<0&&(y=0);let B=0;return p.schedule(function(){A.closed||(A.next(B++),0<=v?this.schedule(void 0,v):A.complete())},y)})}(P,l);return D(()=>p)}}}]);
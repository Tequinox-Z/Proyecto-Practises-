"use strict";(self.webpackChunkPractises_Management=self.webpackChunkPractises_Management||[]).push([[844],{9844:(qe,C,c)=>{c.r(C),c.d(C,{CenterModule:()=>Oe});var m=c(9808),u=c(8118),M=c(5226),p=c.n(M),g=c(9898),_=c(2340),s=c(2382),e=c(1223),h=c(9207),f=c(8212),Z=c(6162),x=c(520);let w=(()=>{class n{constructor(t){this.http=t}upload(t){const o=new FormData;o.append("file",t);const r=new x.aW("POST",`${_.N.serverAddress}/upload`,o,{reportProgress:!0,responseType:"json"});return this.http.request(r)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(x.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function b(n,i){if(1&n&&(e.TgZ(0,"p",4),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij("",t.progress," %")}}let v=(()=>{class n{constructor(t){this.fileService=t,this.textToShow="",this.fileName=new e.vpe,this.progress=0,this.message=""}ngOnInit(){}selectFile(t){this.selectedFiles=t.target.files,this.upload()}upload(){if(this.progress=0,this.selectedFiles){const t=this.selectedFiles.item(0);t&&(this.currentFile=t,this.fileService.upload(this.currentFile).subscribe({next:o=>{o.type===x.dt.UploadProgress?this.progress=Math.round(100*o.loaded/o.total):o instanceof x.Zn&&(console.log(o),this.fileName.emit(o.body.id))},error:o=>{console.log(o),this.progress=0,this.message=o.error&&o.error.message?o.error.message:"Error al subir",this.currentFile=void 0}})),this.selectedFiles=void 0}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(w))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-file-upload"]],inputs:{textToShow:"textToShow"},outputs:{fileName:"fileName"},decls:5,vars:2,consts:[[1,"custom-input-file","col-md-6","col-sm-6","col-xs-6"],["type","file","accept",".bmp,.jpg,.png",1,"input-file",3,"change"],["src","assets/img/upload.png"],["id","progress",4,"ngIf"],["id","progress"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"input",1),e.NdJ("change",function(a){return o.selectFile(a)}),e.qZA(),e._uU(2),e._UZ(3,"img",2),e.YNc(4,b,2,1,"p",3),e.qZA()),2&t&&(e.xp6(2),e.hij(" ",o.textToShow," "),e.xp6(2),e.Q6J("ngIf",0!=o.progress))},directives:[m.O5],styles:[".custom-input-file[_ngcontent-%COMP%]{background-color:#f6f6f6;cursor:pointer;margin:0 auto;border:1px dashed grey;overflow:hidden;position:relative;text-align:center;width:100%;height:100%}.custom-input-file[_ngcontent-%COMP%]   .input-file[_ngcontent-%COMP%]{border:10000px solid transparent;cursor:pointer;font-size:10000px;margin:0;opacity:0;outline:0 none;padding:0;position:absolute;right:-1000px;top:-1000px}img[_ngcontent-%COMP%]{width:70px;margin-top:20px;animation-duration:2s;animation-name:animate;margin-bottom:20px;animation-iteration-count:infinite}div[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:5px;align-items:center;justify-content:center;padding:20px}@keyframes animate{0%{transform:translateY(0)}50%{transform:translateY(-10px)}to{transform:translateY(0)}}"]}),n})();function T(n,i){1&n&&e._UZ(0,"app-loading")}function O(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).updateLocation()}),e._uU(1,"Guardar localizaci\xf3n"),e.qZA()}}function P(n,i){1&n&&e._UZ(0,"img",28)}function q(n,i){1&n&&e._UZ(0,"img",29)}function A(n,i){1&n&&e._UZ(0,"img",30)}function y(n,i){1&n&&e._UZ(0,"img",31)}function N(n,i){1&n&&e._UZ(0,"img",32)}function U(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).updateSchool()}),e._uU(1,"Guardar datos"),e.qZA()}}function S(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",3),e.TgZ(1,"div",4),e.TgZ(2,"p"),e._uU(3,"Bienvenido de nuevo"),e.qZA(),e._UZ(4,"div"),e._UZ(5,"img",5),e.qZA(),e.TgZ(6,"div",6),e.TgZ(7,"p"),e._uU(8,"Tu centro, de un vistazo"),e.qZA(),e.TgZ(9,"p"),e._uU(10),e.qZA(),e.qZA(),e.TgZ(11,"div",7),e.TgZ(12,"div"),e.TgZ(13,"p"),e._uU(14," Estudiantes "),e.qZA(),e.TgZ(15,"p"),e._uU(16),e.qZA(),e.qZA(),e.TgZ(17,"div"),e.TgZ(18,"p"),e._uU(19," Profesores "),e.qZA(),e.TgZ(20,"p"),e._uU(21),e.qZA(),e.qZA(),e.TgZ(22,"div"),e.TgZ(23,"p"),e._uU(24," Administradores "),e.qZA(),e.TgZ(25,"p"),e._uU(26),e.qZA(),e.qZA(),e.TgZ(27,"div"),e.TgZ(28,"p"),e._uU(29," Empresas "),e.qZA(),e.TgZ(30,"p"),e._uU(31),e.qZA(),e.qZA(),e.qZA(),e.TgZ(32,"div",8),e.TgZ(33,"p"),e._uU(34,"Ubicaci\xf3n del centro"),e.qZA(),e._UZ(35,"div",9),e.YNc(36,O,2,0,"button",10),e.qZA(),e.TgZ(37,"div",11),e.TgZ(38,"p"),e._uU(39,"Datos del centro"),e.qZA(),e.TgZ(40,"div",12),e.TgZ(41,"form",13),e.TgZ(42,"div"),e._UZ(43,"input",14),e.YNc(44,P,1,0,"img",15),e.qZA(),e.TgZ(45,"div"),e._UZ(46,"input",16),e.YNc(47,q,1,0,"img",17),e.qZA(),e.TgZ(48,"div"),e._UZ(49,"input",18),e.YNc(50,A,1,0,"img",19),e.qZA(),e.TgZ(51,"div"),e._UZ(52,"input",20),e.YNc(53,y,1,0,"img",21),e.qZA(),e.TgZ(54,"div"),e._UZ(55,"input",22),e.YNc(56,N,1,0,"img",23),e.qZA(),e.YNc(57,U,2,0,"button",24),e.qZA(),e.TgZ(58,"div",25),e.TgZ(59,"app-file-upload",26),e.NdJ("fileName",function(r){return e.CHM(t),e.oxw().setFileName(r)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();let o,r,a,l,d;e.xp6(5),e.s9C("src",t.school.image,e.LSH),e.xp6(5),e.Oqu(t.school.name),e.xp6(6),e.hij(" ",t.briefing.students," "),e.xp6(5),e.hij(" ",t.briefing.teachers," "),e.xp6(5),e.hij(" ",t.briefing.administrators," "),e.xp6(5),e.hij(" ",t.briefing.business," "),e.xp6(5),e.Q6J("ngIf",t.showSaveUbication),e.xp6(5),e.Q6J("formGroup",t.formGroup),e.xp6(3),e.Q6J("ngIf",t.formGroup.get("name").touched&&(null==(o=t.formGroup.get("name"))?null:o.errors)),e.xp6(3),e.Q6J("ngIf",t.formGroup.get("address").touched&&(null==(r=t.formGroup.get("address"))?null:r.errors)),e.xp6(3),e.Q6J("ngIf",t.formGroup.get("password").touched&&(null==(a=t.formGroup.get("password"))?null:a.errors)),e.xp6(3),e.Q6J("ngIf",t.formGroup.get("openingTime").touched&&(null==(l=t.formGroup.get("openingTime"))?null:l.errors)),e.xp6(3),e.Q6J("ngIf",t.formGroup.get("closingTime").touched&&(null==(d=t.formGroup.get("closingTime"))?null:d.errors)),e.xp6(1),e.Q6J("ngIf",!t.formGroup.invalid),e.xp6(2),e.Q6J("textToShow","Seleccione nueva imagen para el centro")}}let k=(()=>{class n{constructor(t,o,r,a,l){this.centerSrv=t,this.router=o,this.route=r,this.dashboardSvr=a,this.formBuilder=l,this.mapbox=g,this.map=null,this.showSaveUbication=!1}ngOnInit(){this.mapbox.accessToken=_.N.mapBoxToken,this.centerSrv.getCenterOfAdministrator().subscribe({next:t=>{this.formGroup=this.formBuilder.group({name:[t.name,[s.kI.required]],address:[t.address,[s.kI.required]],password:[t.password,[s.kI.required,s.kI.minLength(8)]],openingTime:[t.openingTime,[s.kI.required,s.kI.max(10)]],closingTime:[t.closingTime,[s.kI.required,s.kI.min(12)]]}),this.dashboardSvr.setTitle(t.name),this.centerSrv.briefing(t).subscribe({next:o=>{this.briefing=o},error:o=>{p().fire({icon:"error",title:"Oops...",text:null==o.error.mensaje?"Servidor no disponible":o.error.mensaje})}}),this.loadMap(t),this.school=t},error:t=>{this.router.navigate(["../centers"],{relativeTo:this.route})}})}setFileName(t){this.school.image=_.N.serverFileAddress+t,this.centerSrv.updateCenter(this.school).subscribe({error:o=>{p().fire({icon:"error",title:"Oops...",text:null==o.error.mensaje?"Servidor no disponible":o.error.mensaje})}})}loadMap(t){this.centerSrv.getUbication(t).subscribe({next:o=>{this.school.location=o,this.map=new g.Map({container:"map",style:"mapbox://styles/mapbox/light-v10",zoom:15,center:[o.longitude,o.latitude]}),new g.Marker({draggable:!0,color:"#ff8000"}).setLngLat([o.longitude,o.latitude]).addTo(this.map).on("drag",a=>{console.log(a),this.school.location.latitude=a.target._lngLat.lat,this.school.location.longitude=a.target._lngLat.lng,this.showSaveUbication=!0})},error:o=>{p().fire({icon:"error",title:"Oops...",text:null==o.error.mensaje?"Servidor no disponible":o.error.mensaje})}})}updateLocation(){this.centerSrv.updateLocation(this.school).subscribe({next:()=>{this.showSaveUbication=!1,p().fire({icon:"success",title:"\xa1Guardado!"})},error:t=>{p().fire({icon:"error",title:"Oops...",text:null==t.error.mensaje?"Servidor no disponible":t.error.mensaje})}})}updateSchool(){let t=this.school.id,r=this.formGroup.value;r.image=this.school.image,r.id=t,this.centerSrv.updateCenter(r).subscribe({next:a=>{this.school=a,p().fire({icon:"success",title:"\xa1Guardado!"})},error:a=>{p().fire({icon:"error",title:"Oops...",text:null==a.error.mensaje?"Servidor no disponible":a.error.mensaje})}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h.F),e.Y36(u.F0),e.Y36(u.gz),e.Y36(f.s),e.Y36(s.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-my-center"]],decls:3,vars:2,consts:[["id","mainDashboard"],[4,"ngIf"],["id","app-my-center",4,"ngIf"],["id","app-my-center"],["id","portada"],[3,"src"],["id","nameSchool"],["id","resume-zone"],["id","map-container"],["id","map"],["id","saveLocation",3,"click",4,"ngIf"],["id","centerData"],["id","dataa"],["id","form",3,"formGroup"],["name","name","type","text","formControlName","name","placeholder","Nombre"],["class","warning2","src","assets/img/warning.png","title","Nombre es requerido","alt","Nombre es requerido",4,"ngIf"],["name","address","type","text","formControlName","address","placeholder","Direcci\xf3n"],["class","warning2","src","assets/img/warning.png","title","Direcci\xf3n es requerido","alt","Direcci\xf3n es requerido",4,"ngIf"],["name","password","type","password","formControlName","password","placeholder","Contrase\xf1a"],["class","warning2","src","assets/img/warning.png","title","La contrase\xf1a debe ser superior a 8 car\xe1cteres","alt","La contrase\xf1a debe ser superior a 8 car\xe1cteres",4,"ngIf"],["name","openingTime","type","time","formControlName","openingTime"],["class","warning2","src","assets/img/warning.png","title","La hora de apertura tiene que ser antes a la de cierre","alt","La hora de apertura tiene que ser antes a la de cierre",4,"ngIf"],["name","closingTime","type","time","formControlName","closingTime"],["class","warning2","src","assets/img/warning.png","title","La hora de cierre tiene que ser desp\xe9s a la de apertura","alt","La hora de cierre tiene que ser desp\xe9s a la de apertura",4,"ngIf"],["id","saveLocation","class","dataButton",3,"click",4,"ngIf"],["id","imageUp"],["id","fileUpload",3,"textToShow","fileName"],["id","saveLocation",3,"click"],["src","assets/img/warning.png","title","Nombre es requerido","alt","Nombre es requerido",1,"warning2"],["src","assets/img/warning.png","title","Direcci\xf3n es requerido","alt","Direcci\xf3n es requerido",1,"warning2"],["src","assets/img/warning.png","title","La contrase\xf1a debe ser superior a 8 car\xe1cteres","alt","La contrase\xf1a debe ser superior a 8 car\xe1cteres",1,"warning2"],["src","assets/img/warning.png","title","La hora de apertura tiene que ser antes a la de cierre","alt","La hora de apertura tiene que ser antes a la de cierre",1,"warning2"],["src","assets/img/warning.png","title","La hora de cierre tiene que ser desp\xe9s a la de apertura","alt","La hora de cierre tiene que ser desp\xe9s a la de apertura",1,"warning2"],["id","saveLocation",1,"dataButton",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.YNc(1,T,1,0,"app-loading",1),e.YNc(2,S,60,15,"div",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",!o.school),e.xp6(1),e.Q6J("ngIf",o.school))},directives:[m.O5,Z.N,s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,v],styles:["#mainDashboard[_ngcontent-%COMP%]{overflow:auto}div[_ngcontent-%COMP%]{height:100%;width:100%}app-loading-component[_ngcontent-%COMP%]{width:50px;height:50px}#app-my-center[_ngcontent-%COMP%]{width:100%;height:100%}#portada[_ngcontent-%COMP%]{width:100%;position:relative;height:140px;overflow:hidden}#portada[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:100%;min-width:500px;z-index:1;position:relative;top:-100%}#portada[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{position:absolute;top:50px;z-index:3;left:5%;color:#fff;font-size:25px;text-shadow:1px 1px black}#portada[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;z-index:2;background-color:#0000004b}#nameSchool[_ngcontent-%COMP%]{width:100%;height:20px;position:relative}#nameSchool[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(1){margin-top:20px}#nameSchool[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(1){margin-left:4%}#nameSchool[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(2){position:absolute;right:4%;top:0px}#resume-zone[_ngcontent-%COMP%]{width:100%;padding-left:30px;padding-right:30px;display:flex;justify-content:center;align-items:center;height:max-content;gap:3%;flex-wrap:wrap;margin-top:20px}#resume-zone[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{box-shadow:0 5px 5px #c9c9c9;max-width:200px;height:70px;border-radius:5px;position:relative;color:#fff;display:flex;margin-top:10px;align-items:center;justify-content:center;min-width:100px}#resume-zone[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1){background-color:#ff642b}#resume-zone[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){background-color:#6767ff}#resume-zone[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){background-color:#4b75ff}#resume-zone[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4){background-color:#f33}#resume-zone[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(1){position:absolute;top:7px;font-size:12px;left:15px}#resume-zone[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(2){font-size:25px;margin-top:10px}#map-container[_ngcontent-%COMP%]{width:100%;margin-top:20px;display:flex;justify-content:center;align-items:center;position:relative;flex-direction:column}#map-container[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{position:absolute;top:0;left:4%;margin-top:20px;margin-bottom:20px}#map[_ngcontent-%COMP%]{margin-top:20px;width:90%;height:500px}#saveLocation[_ngcontent-%COMP%]{background-color:var(--color);height:35px;color:#fff;border:none;width:150px;position:absolute;left:4%;bottom:0}#centerData[_ngcontent-%COMP%]{width:100%;margin-top:20px!important;padding-top:40px;height:max-content;position:relative;padding-bottom:70px!important}#centerData[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{position:absolute;top:0;left:4%}form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:90%;max-width:300px;display:inline-block}form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:20px}form[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;flex-direction:column;justify-content:center;align-items:center}form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;height:30px;border-radius:5px;width:100%;padding-left:20px;margin:10px;padding-right:10px;background-color:#dcdcdc}#imageUp[_ngcontent-%COMP%]{width:50%;height:200px}#dataa[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;height:max-content!important}#dataa[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:50%}#form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative}#imageUp[_ngcontent-%COMP%]{margin-right:30px}@media (max-width: 600px){#dataa[_ngcontent-%COMP%]{flex-direction:column!important}#form[_ngcontent-%COMP%]{width:100%!important}#form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:unset;margin-bottom:10px!important}#imageUp[_ngcontent-%COMP%]{width:90%!important;margin-right:unset!important}.warning2[_ngcontent-%COMP%]{top:4px!important;right:-29px!important}}.warning2[_ngcontent-%COMP%]{position:absolute;top:15px;right:-40px}.dataButton[_ngcontent-%COMP%]{margin-bottom:20px}"]}),n})();c(1002);var I=c(8545),F=c(3958),J=c(8083),Y=c(2886);function j(n,i){1&n&&(e.TgZ(0,"p"),e._uU(1,"\xa1Bienvenido!"),e.qZA())}function L(n,i){1&n&&(e.TgZ(0,"p"),e._uU(1," Para comenzar, selecciona tu centro, introduce tu contrase\xf1a de acceso y podr\xe1s gestionar el mismo. Tambi\xe9n puedes "),e.TgZ(2,"span",11),e._uU(3,"A\xf1adir un nuevo centro"),e.qZA(),e.qZA())}function Q(n,i){1&n&&(e.TgZ(0,"p"),e._uU(1,"Centros"),e.qZA())}function D(n,i){1&n&&(e.TgZ(0,"p"),e._uU(1," Vea los centros registrados en la plataforma e obtenga informaci\xf3n sobre su localizaci\xf3n, trabajadores de contacto y ciclos "),e.qZA())}function z(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"img",20),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit;return e.oxw(3).viewUbication(r.id)}),e.qZA()}}function B(n,i){1&n&&e._UZ(0,"img",21)}function E(n,i){1&n&&e._UZ(0,"img",22)}function G(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"img",23),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit;return e.oxw(3).configureSchool(r.id)}),e.qZA()}}function H(n,i){if(1&n&&(e.TgZ(0,"div",14),e._UZ(1,"img",15),e.TgZ(2,"p"),e._uU(3),e.qZA(),e.TgZ(4,"p"),e._uU(5),e.qZA(),e.YNc(6,z,1,0,"img",16),e.YNc(7,B,1,0,"img",17),e.YNc(8,E,1,0,"img",18),e.YNc(9,G,1,0,"img",19),e.qZA()),2&n){const t=i.$implicit,o=e.oxw(3);e.xp6(1),e.s9C("src",t.image,e.LSH),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.address),e.xp6(1),e.Q6J("ngIf",!o.setMode),e.xp6(1),e.Q6J("ngIf",!o.setMode),e.xp6(1),e.Q6J("ngIf",!o.setMode),e.xp6(1),e.Q6J("ngIf",o.setMode)}}function X(n,i){if(1&n&&(e.TgZ(0,"div",12),e.YNc(1,H,10,7,"div",13),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.centers)}}function $(n,i){1&n&&(e.TgZ(0,"div",24),e._UZ(1,"img",25),e.TgZ(2,"p"),e._uU(3,"Ning\xfan centro coincide con la b\xfasqueda"),e.qZA(),e.qZA())}function R(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",2),e.TgZ(1,"div",3),e.TgZ(2,"div",4),e.YNc(3,j,2,0,"p",5),e.YNc(4,L,4,0,"p",5),e.YNc(5,Q,2,0,"p",5),e.YNc(6,D,2,0,"p",5),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"search",7),e.NdJ("query",function(r){return e.CHM(t),e.oxw().buscar(r)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div"),e.YNc(10,X,2,1,"div",8),e.YNc(11,$,4,0,"div",9),e.qZA(),e.TgZ(12,"app-map-button",10),e.NdJ("mapMode",function(){return e.CHM(t),e.oxw().showMap()}),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("ngIf",t.setMode),e.xp6(1),e.Q6J("ngIf",t.setMode),e.xp6(1),e.Q6J("ngIf",!t.setMode),e.xp6(1),e.Q6J("ngIf",!t.setMode),e.xp6(4),e.Q6J("ngIf",0!=t.centers.length),e.xp6(1),e.Q6J("ngIf",0==t.centers.length)}}function V(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",26),e.TgZ(1,"img",27),e.NdJ("click",function(){return e.CHM(t),e.oxw().showListOfSchool()}),e.qZA(),e.TgZ(2,"div",3),e.TgZ(3,"div",4),e.TgZ(4,"p"),e._uU(5,"Seleccionar en mapa"),e.qZA(),e.TgZ(6,"p"),e._uU(7," Seleccione su centro conociendo la ubicaci\xf3n en la que se encuentra el mismo, por defecto se mostrar\xe1 la ubicaci\xf3n actual del dispositivo "),e.qZA(),e.qZA(),e._UZ(8,"div",6),e.qZA(),e.TgZ(9,"div",28),e._UZ(10,"div",29),e.qZA(),e.qZA()}}let K=(()=>{class n{constructor(t,o,r,a,l){this.centerSvr=t,this.dashboardSvr=o,this.router=r,this.userService=a,this.route=l,this.mapbox=g,this.map=null,this.centers=[],this.locations=[],this.setMode=!0,this.mapMode=!1}ngOnInit(){var t;(null===(t=this.userService.getPerson())||void 0===t?void 0:t.rol)+""=="ROLE_ADMIN"?this.centerSvr.getCenterOfAdministrator().subscribe({next:()=>{this.setMode=!1},error:()=>{this.setMode=!0}}):this.setMode=!1,this.dashboardSvr.setTitle("Centros"),this.mapbox.accessToken=_.N.mapBoxToken,this.centerSvr.getAllCenters().subscribe({next:o=>{this.centers=o},error:o=>{p().fire({icon:"error",title:"Oops...",text:null==o.error.mensaje?"Servidor no disponible":o.error.mensaje})}})}buscar(t){this.centerSvr.getCentersByName(t).subscribe({next:o=>{this.centers=o},error:o=>{p().fire({icon:"error",title:"Oops...",text:null==o.error.mensaje?"Servidor no disponible":o.error.mensaje})}})}showListOfSchool(){this.mapMode=!1}showMap(){this.mapMode=!0,this.centerSvr.getAllLocations().subscribe({next:t=>{this.locations=t,navigator.geolocation.getCurrentPosition(o=>{var r;this.map=new g.Map({container:"mapCenters",style:"mapbox://styles/mapbox/light-v10",zoom:15,center:[o.coords.longitude,o.coords.latitude]}),this.map.addControl(new g.NavigationControl),this.map.addControl(new g.FullscreenControl),this.map.addControl(new I({accessToken:_.N.mapBoxToken})),document.querySelector(".mapboxgl-ctrl-geocoder--input").placeholder="Buscar",t.forEach(l=>{let d;d=this.setMode?"<span>"+l.name+"</span><div class='enginepop'><img id='"+l.id+"' class='enginemap' src='assets/img/engine.png'></div>":"<span>"+l.name+"</span><div class='enginepop'></div>";const Pe=new g.Popup({offset:25}).setHTML(d);new g.Marker({draggable:!1,color:"#ff8000"}).setPopup(Pe).setLngLat([l.longitude,l.latitude]).addTo(this.map)}),null===(r=document.querySelector("#mapCenters"))||void 0===r||r.addEventListener("click",l=>{let d=l.target;d.classList.contains("enginemap")&&this.configureSchool(parseInt(d.id))})})},error:t=>{p().fire({icon:"error",title:"Oops...",text:null==t.error.mensaje?"Servidor no disponible":t.error.mensaje})}})}configureSchool(t){p().fire({title:"Indique contrase\xf1a",input:"password",inputAttributes:{autocapitalize:"off"},preConfirm:o=>{let r={};return r.id=t,r.password=o,this.centerSvr.setCurrentAdministrator(r).toPromise().then(()=>{this.router.navigate(["../my-center"],{relativeTo:this.route})}).catch(a=>{p().showValidationMessage(a.error.mensaje)})},showCancelButton:!0,cancelButtonText:"Cancelar",confirmButtonText:"Administrar",showLoaderOnConfirm:!0,allowOutsideClick:()=>!p().isLoading()})}viewUbication(t){let o={};o.id=t,this.centerSvr.getUbication(o).subscribe({next:r=>{this.router.navigate(["../ubication/",r.latitude,r.longitude],{relativeTo:this.route})},error:r=>{p().fire({icon:"error",title:"Oops...",text:null==r.error.mensaje?"Servidor no disponible":r.error.mensaje})}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h.F),e.Y36(f.s),e.Y36(u.F0),e.Y36(F.K),e.Y36(u.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-search-center"]],decls:2,vars:2,consts:[["id","searchDivMain",4,"ngIf"],["id","searchDivMain","class","mapView",4,"ngIf"],["id","searchDivMain"],["id","bienvenida"],["id","text"],[4,"ngIf"],["id","searchDiv"],[3,"query"],["id","schools",4,"ngIf"],["id","no-centers",4,"ngIf"],[3,"mapMode"],["routerLink","../new-center",1,"bold"],["id","schools"],["class","school",4,"ngFor","ngForOf"],[1,"school"],[3,"src"],["src","assets/img/location.png",3,"click",4,"ngIf"],["class","leftIcon","src","assets/img/call.png",4,"ngIf"],["class","rightIcon","src","assets/img/curso.png",4,"ngIf"],["src","assets/img/engine.png",3,"click",4,"ngIf"],["src","assets/img/location.png",3,"click"],["src","assets/img/call.png",1,"leftIcon"],["src","assets/img/curso.png",1,"rightIcon"],["src","assets/img/engine.png",3,"click"],["id","no-centers"],["src","assets/img/school.png"],["id","searchDivMain",1,"mapView"],["id","back","src","assets/img/back-map.png",3,"click"],["id","map"],["id","mapCenters"]],template:function(t,o){1&t&&(e.YNc(0,R,13,6,"div",0),e.YNc(1,V,11,0,"div",1)),2&t&&(e.Q6J("ngIf",!o.mapMode),e.xp6(1),e.Q6J("ngIf",o.mapMode))},directives:[m.O5,u.rH,J.g,m.sg,Y.$],styles:["#searchDivMain[_ngcontent-%COMP%]{height:100%;overflow:auto}#bienvenida[_ngcontent-%COMP%]{height:160px;display:flex}#bienvenida[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:50%;display:flex;flex-direction:column;justify-content:center}#bienvenida[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){align-items:flex-end}#text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(1){font-weight:600;margin-bottom:5px;font-size:20px}#text[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:nth-child(2){opacity:.7}#text[_ngcontent-%COMP%]{padding-left:5%}#searchDiv[_ngcontent-%COMP%]{padding-right:5%}#no-centers[_ngcontent-%COMP%]{display:flex;height:350px;width:100%;flex-direction:column;align-content:center;justify-content:center;align-items:center}#no-centers[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:130px}#no-centers[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:17px;margin-top:20px}app-map-button[_ngcontent-%COMP%]{position:absolute;bottom:30px;right:50px}.school[_ngcontent-%COMP%]{background-color:#dfdfdf;box-shadow:0 2px 5px #a1a1a1}#schools[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;flex-wrap:wrap;justify-content:center}.school[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:nth-child(1){height:180px;position:relative;top:-20px}.school[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(2){font-size:18px;position:absolute;left:25px;top:175px}.school[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(3){opacity:.5;margin-left:25px;position:absolute;top:200px;left:0px}.school[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;position:relative;overflow:hidden;align-items:center;margin-left:3%;margin-right:3%;margin-bottom:40px;width:240px;height:290px;border-radius:10px}.school[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:nth-child(4){width:24px;position:absolute;bottom:15px}#map[_ngcontent-%COMP%]{display:flex;width:100%;height:70%;justify-content:center}#mapCenters[_ngcontent-%COMP%]{width:90%;height:100%}.marker[_ngcontent-%COMP%]{background-image:url(https://pmmciex.com/wp-content/uploads/2020/07/ubicacionnaranja.png);background-size:cover;width:50px;height:50px;border-radius:50%;cursor:pointer}#back[_ngcontent-%COMP%]{position:absolute;top:42px;width:25px;left:1.5%}@media (max-width: 600px){#bienvenida[_ngcontent-%COMP%]{flex-direction:column;justify-content:center;align-items:center;margin-top:40px;margin-bottom:40px}#text[_ngcontent-%COMP%]{width:90%!important;margin-bottom:30px;padding-left:unset!important}#searchDiv[_ngcontent-%COMP%]{width:100%!important;align-items:flex-start!important;padding-left:30px;padding-right:unset!important}.mapView[_ngcontent-%COMP%]{height:60%}#back[_ngcontent-%COMP%]{top:20px;left:5%}}.leftIcon[_ngcontent-%COMP%]{width:20px;position:absolute;bottom:19px;left:40px}.rightIcon[_ngcontent-%COMP%]{width:20px;position:absolute;bottom:19px;right:40px}"]}),n})(),W=(()=>{class n{constructor(){this.next=new e.vpe}ngOnInit(){}click(){this.next.emit()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-next"]],outputs:{next:"next"},decls:2,vars:0,consts:[[1,"background-color",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"p",0),e.NdJ("click",function(){return o.click()}),e._uU(1,"Continuar"),e.qZA())},styles:["p[_ngcontent-%COMP%]{width:100%;height:100%;color:#fff;display:flex;align-items:center;justify-content:center}"]}),n})(),ee=(()=>{class n{constructor(){this.back=new e.vpe}ngOnInit(){}click(){this.back.emit()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-back"]],outputs:{back:"back"},decls:2,vars:0,consts:[[1,"background-color",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"p",0),e.NdJ("click",function(){return o.click()}),e._uU(1,"Atr\xe1s"),e.qZA())},styles:["p[_ngcontent-%COMP%]{width:100%;height:100%;color:#fff;display:flex;align-items:center;justify-content:center}"]}),n})();function te(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",6),e.TgZ(1,"div",7),e.TgZ(2,"p"),e._uU(3,"Asistente de creaci\xf3n de nuevo centro"),e.qZA(),e.TgZ(4,"div",8),e.TgZ(5,"div",9),e.TgZ(6,"p"),e._uU(7," Este asistente le guiar\xe1 a lo largo de la creaci\xf3n de este nuevo centro "),e.qZA(),e.TgZ(8,"p"),e._uU(9," Si alg\xfan dato no es correcto se le indicar\xe1 con "),e._UZ(10,"img",10),e.qZA(),e.TgZ(11,"p"),e._uU(12," En dicho caso, ponga el cursor encima para ver el error "),e.qZA(),e.TgZ(13,"p"),e._uU(14," Puede actualizar los datos del nuevo centro una vez creado si es necesario "),e.qZA(),e.qZA(),e.TgZ(15,"div",11),e.TgZ(16,"app-next",12),e.NdJ("next",function(){e.CHM(t);const r=e.oxw();return r.page=r.page+1}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",13),e._UZ(18,"img",14),e.qZA(),e.qZA()}}function ne(n,i){1&n&&e._UZ(0,"img",35)}function oe(n,i){1&n&&e._UZ(0,"img",36)}function ie(n,i){1&n&&e._UZ(0,"img",37)}function re(n,i){1&n&&e._UZ(0,"img",38)}function ae(n,i){1&n&&e._UZ(0,"img",39)}function se(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"app-next",40),e.NdJ("next",function(){return e.CHM(t),e.oxw(2).showMap()}),e.qZA()}}function ce(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",15),e.TgZ(1,"div",16),e.TgZ(2,"div",17),e.TgZ(3,"p",18),e.TgZ(4,"span",19),e._uU(5,"Paso 1 de 2"),e.qZA(),e._uU(6,"Datos del centro"),e.qZA(),e.TgZ(7,"p",20),e._uU(8,"Rellene los siguientes datos para el centro"),e.qZA(),e.TgZ(9,"div",21),e.TgZ(10,"div"),e._UZ(11,"input",22),e.YNc(12,ne,1,0,"img",23),e.qZA(),e.TgZ(13,"div"),e._UZ(14,"input",24),e.YNc(15,oe,1,0,"img",25),e.qZA(),e.TgZ(16,"div"),e._UZ(17,"input",26),e.YNc(18,ie,1,0,"img",27),e.qZA(),e.TgZ(19,"div"),e._UZ(20,"input",28),e.YNc(21,re,1,0,"img",29),e.qZA(),e.TgZ(22,"div"),e._UZ(23,"input",30),e.YNc(24,ae,1,0,"img",31),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"div",32),e.TgZ(26,"app-file-upload",33),e.NdJ("fileName",function(r){return e.CHM(t),e.oxw().setFileName(r)}),e.qZA(),e.qZA(),e.YNc(27,se,1,0,"app-next",34),e.qZA()}if(2&n){const t=e.oxw();let o,r,a,l,d;e.xp6(12),e.Q6J("ngIf",t.formGroup.get("name").touched&&(null==(o=t.formGroup.get("name"))?null:o.errors)),e.xp6(3),e.Q6J("ngIf",t.formGroup.get("address").touched&&(null==(r=t.formGroup.get("address"))?null:r.errors)),e.xp6(3),e.Q6J("ngIf",t.formGroup.get("password").touched&&(null==(a=t.formGroup.get("password"))?null:a.errors)),e.xp6(3),e.Q6J("ngIf",t.formGroup.get("openingTime").touched&&(null==(l=t.formGroup.get("openingTime"))?null:l.errors)),e.xp6(3),e.Q6J("ngIf",t.formGroup.get("closingTime").touched&&(null==(d=t.formGroup.get("closingTime"))?null:d.errors)),e.xp6(2),e.Q6J("textToShow","Seleccione imagen para el centro"),e.xp6(1),e.Q6J("ngIf",!t.formGroup.invalid&&t.newSchool.image)}}function pe(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"app-next",40),e.NdJ("next",function(){return e.CHM(t),e.oxw(2).sendData()}),e.qZA()}}function le(n,i){if(1&n&&(e.TgZ(0,"div",41),e.TgZ(1,"div"),e.TgZ(2,"p",18),e.TgZ(3,"span",19),e._uU(4,"Paso 2 de 2"),e.qZA(),e._uU(5,"Ubicaci\xf3n del centro"),e.qZA(),e.TgZ(6,"p",20),e._uU(7,"Seleccione d\xf3nde se encuentra su centro"),e.qZA(),e._UZ(8,"img",42),e.qZA(),e.TgZ(9,"div",43),e._UZ(10,"div",44),e.qZA(),e.YNc(11,pe,1,0,"app-next",34),e.qZA()),2&n){const t=e.oxw();e.xp6(11),e.Q6J("ngIf",t.location.latitude&&t.location.longitude)}}function ge(n,i){1&n&&e._UZ(0,"img",51)}function de(n,i){1&n&&e._UZ(0,"img",51)}function me(n,i){1&n&&e._UZ(0,"img",51)}function ue(n,i){1&n&&(e.TgZ(0,"div",11),e._UZ(1,"app-next",52),e.qZA())}function _e(n,i){if(1&n&&(e.TgZ(0,"div",45),e.TgZ(1,"div",7),e.TgZ(2,"p",46),e._uU(3,"Creando centro ..."),e.qZA(),e.TgZ(4,"div",8),e.TgZ(5,"div",47),e.TgZ(6,"p"),e.YNc(7,ge,1,0,"img",48),e._uU(8," Creando centro ... "),e.qZA(),e.TgZ(9,"p"),e.YNc(10,de,1,0,"img",48),e._uU(11," Asignando ubicaci\xf3n ... "),e.qZA(),e.TgZ(12,"p"),e.YNc(13,me,1,0,"img",48),e._uU(14," Asignando administrador al centro ... "),e.qZA(),e.TgZ(15,"p",49),e._uU(16," Centro creado con \xe9xito "),e.qZA(),e.qZA(),e.YNc(17,ue,2,0,"div",50),e.qZA(),e.qZA(),e.TgZ(18,"div",13),e._UZ(19,"img",14),e.qZA(),e.qZA()),2&n){const t=e.oxw();e.xp6(7),e.Q6J("ngIf",t.serverStep>0),e.xp6(3),e.Q6J("ngIf",t.serverStep>1),e.xp6(3),e.Q6J("ngIf",t.serverStep>2),e.xp6(4),e.Q6J("ngIf",t.finish)}}function he(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"app-back",53),e.NdJ("back",function(){e.CHM(t);const r=e.oxw();return r.page=r.page-1}),e.qZA()}}function Ce(n,i){if(1&n&&(e.TgZ(0,"div",8),e.TgZ(1,"p"),e._uU(2,"Movimiento detectado"),e.qZA(),e.TgZ(3,"p"),e._uU(4),e.ALo(5,"date"),e.qZA(),e._UZ(6,"img",9),e.qZA()),2&n){const t=i.$implicit;e.xp6(4),e.Oqu(e.xi3(5,1,t.date,"dd/MM/yyyy HH:mm:ss"))}}function ve(n,i){if(1&n&&(e.TgZ(0,"div",6),e.YNc(1,Ce,7,4,"div",7),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.movements)}}function Me(n,i){1&n&&(e.TgZ(0,"div",10),e._UZ(1,"img",11),e.TgZ(2,"p"),e._uU(3,"No se han detectado movimientos"),e.qZA(),e.qZA())}const we=[{path:"centers",component:K},{path:"my-center",component:k},{path:"new-center",component:(()=>{class n{constructor(t,o,r){this.dashboardSvr=t,this.formBuilder=o,this.centerSvr=r,this.newSchool={},this.page=1,this.showNext=!0,this.showBack=!0,this.mapbox=g,this.map=null,this.finish=!1,this.serverStep=0,this.location={}}ngOnInit(){this.dashboardSvr.setTitle("Nuevo centro"),this.mapbox.accessToken=_.N.mapBoxToken,this.buildForm()}buildForm(){this.formGroup=this.formBuilder.group({name:["",[s.kI.required]],address:["",[s.kI.required]],password:["",[s.kI.required,s.kI.minLength(8)]],openingTime:["",[s.kI.required,s.kI.max(10)]],closingTime:["",[s.kI.required,s.kI.min(12)]]})}setFileName(t){this.newSchool.image=_.N.serverFileAddress+t}showMap(){this.page=this.page+1,navigator.geolocation.getCurrentPosition(t=>{let o={};null!=this.location.longitude&&null!=this.location.latitude?o=this.location:(o.latitude=t.coords.latitude,o.longitude=t.coords.longitude),this.map=new g.Map({container:"mapa",style:"mapbox://styles/mapbox/light-v10",zoom:15,center:[o.longitude,o.latitude]}),this.marker=new g.Marker({color:"#ff8000"}),null!=this.location.longitude&&null!=this.location.latitude&&this.marker.setLngLat([o.longitude,o.latitude]).addTo(this.map),this.map.on("click",this.add_marker.bind(this)),this.map.addControl(new g.NavigationControl),this.map.addControl(new g.FullscreenControl)})}add_marker(t){let o=t.lngLat;this.location.latitude=o.lat,this.location.longitude=o.lng,this.marker.setLngLat(o).addTo(this.map)}sendData(){this.page=this.page+1;let t=this.newSchool.image;this.newSchool=this.formGroup.value,this.newSchool.image=t,this.newSchool.openingTime=this.newSchool.openingTime,this.newSchool.closingTime=this.newSchool.closingTime,this.centerSvr.createCenter(this.newSchool).subscribe({next:o=>{this.serverStep++,this.centerSvr.setLocation(o,this.location).subscribe({next:r=>{this.serverStep++,this.centerSvr.setCurrentAdministrator(o).subscribe({next:a=>{this.serverStep++,this.finish=!0},error:a=>{p().fire({icon:"error",title:"Oops...",text:null==a.error.mensaje?"Servidor no disponible":a.error.mensaje})}})},error:r=>{p().fire({icon:"error",title:"Oops...",text:null==r.error.mensaje?"Servidor no disponible":r.error.mensaje})}})},error:o=>{p().fire({icon:"error",title:"Oops...",text:null==o.error.mensaje?"Servidor no disponible":o.error.mensaje})}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(f.s),e.Y36(s.qu),e.Y36(h.F))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-new-center"]],decls:6,vars:6,consts:[[3,"formGroup"],["id","page1","class","page",4,"ngIf"],["id","page2","class","page",4,"ngIf"],["id","page3","class","page",4,"ngIf"],["id","page4","class","page",4,"ngIf"],["class","buttonfloat","id","back",3,"back",4,"ngIf"],["id","page1",1,"page"],["id","text-info",1,"div-center"],["id","content-text"],[1,"text"],["src","assets/img/warning.png",1,"warning"],["id","next-button"],["id","next",3,"next"],["id","center-imagen",1,"div-center"],["src","assets/img/school.png","id","schoolImg"],["id","page2",1,"page"],[1,"div-center"],["id","center"],[1,"titlepage"],["id","step"],[1,"sub"],["id","form"],["name","name","type","text","formControlName","name","placeholder","Nombre"],["class","warning2","src","assets/img/warning.png","title","Nombre es requerido","alt","Nombre es requerido",4,"ngIf"],["name","address","type","text","formControlName","address","placeholder","Direcci\xf3n"],["class","warning2","src","assets/img/warning.png","title","Direcci\xf3n es requerido","alt","Direcci\xf3n es requerido",4,"ngIf"],["name","password","type","password","formControlName","password","placeholder","Contrase\xf1a"],["class","warning2","src","assets/img/warning.png","title","La contrase\xf1a debe ser superior a 8 car\xe1cteres","alt","La contrase\xf1a debe ser superior a 8 car\xe1cteres",4,"ngIf"],["name","openingTime","type","time","formControlName","openingTime"],["class","warning2","src","assets/img/warning.png","title","La hora de apertura tiene que ser antes a la de cierre","alt","La hora de apertura tiene que ser antes a la de cierre",4,"ngIf"],["name","closingTime","type","time","formControlName","closingTime"],["class","warning2","src","assets/img/warning.png","title","La hora de cierre tiene que ser desp\xe9s a la de apertura","alt","La hora de cierre tiene que ser desp\xe9s a la de apertura",4,"ngIf"],["id","",1,"div-center"],["id","fileUpload",3,"textToShow","fileName"],["class","buttonfloat nextForm","id","next",3,"next",4,"ngIf"],["src","assets/img/warning.png","title","Nombre es requerido","alt","Nombre es requerido",1,"warning2"],["src","assets/img/warning.png","title","Direcci\xf3n es requerido","alt","Direcci\xf3n es requerido",1,"warning2"],["src","assets/img/warning.png","title","La contrase\xf1a debe ser superior a 8 car\xe1cteres","alt","La contrase\xf1a debe ser superior a 8 car\xe1cteres",1,"warning2"],["src","assets/img/warning.png","title","La hora de apertura tiene que ser antes a la de cierre","alt","La hora de apertura tiene que ser antes a la de cierre",1,"warning2"],["src","assets/img/warning.png","title","La hora de cierre tiene que ser desp\xe9s a la de apertura","alt","La hora de cierre tiene que ser desp\xe9s a la de apertura",1,"warning2"],["id","next",1,"buttonfloat","nextForm",3,"next"],["id","page3",1,"page"],["id","ubication-img","src","assets/img/ubication.png"],["id","map-c"],["id","mapa"],["id","page4",1,"page"],["id","creating-text"],["id","steps",1,"text"],["class","ok","src","assets/img/tick.png",4,"ngIf"],[1,"neg"],["id","next-button",4,"ngIf"],["src","assets/img/tick.png",1,"ok"],["id","next","routerLink","../my-center"],["id","back",1,"buttonfloat",3,"back"]],template:function(t,o){1&t&&(e.TgZ(0,"form",0),e.YNc(1,te,19,0,"div",1),e.YNc(2,ce,28,7,"div",2),e.YNc(3,le,12,1,"div",3),e.YNc(4,_e,20,4,"div",4),e.YNc(5,he,1,0,"app-back",5),e.qZA()),2&t&&(e.Q6J("formGroup",o.formGroup),e.xp6(1),e.Q6J("ngIf",1==o.page),e.xp6(1),e.Q6J("ngIf",2==o.page),e.xp6(1),e.Q6J("ngIf",3==o.page),e.xp6(1),e.Q6J("ngIf",4==o.page),e.xp6(1),e.Q6J("ngIf",1!=o.page&&4!=o.page))},directives:[s._Y,s.JL,s.sg,m.O5,W,s.Fj,s.JJ,s.u,v,u.rH,ee],styles:[".page[_ngcontent-%COMP%]{height:100%;width:100%;overflow:auto;display:flex}#next[_ngcontent-%COMP%]{right:20px}.buttonfloat[_ngcontent-%COMP%]{position:absolute;bottom:20px}#next[_ngcontent-%COMP%], #back[_ngcontent-%COMP%]{width:130px;height:30px}#back[_ngcontent-%COMP%]{left:20px}.nextForm[_ngcontent-%COMP%]{right:30px}#schoolImg[_ngcontent-%COMP%]{width:400px}#page1[_ngcontent-%COMP%]{flex-wrap:nowrap;justify-content:center;align-items:center}#text-info[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:nth-child(1){font-size:20px;position:relative;top:-10px;left:-20px;font-weight:600}.text[_ngcontent-%COMP%]{max-width:400px;margin-left:70px}.text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:10px;opacity:.7;text-align:justify}#text-info[_ngcontent-%COMP%]   #next[_ngcontent-%COMP%]{width:120px!important}form[_ngcontent-%COMP%]{height:100%;width:100%}.div-center[_ngcontent-%COMP%]{width:50%;display:flex;flex-direction:column;flex-wrap:nowrap;align-content:center;justify-content:center;align-items:center}#next-button[_ngcontent-%COMP%]{width:160px;height:40px;margin-left:70px}.warning[_ngcontent-%COMP%]{width:25px;position:relative;top:5px}span[_ngcontent-%COMP%]{color:var(--color)}.sub[_ngcontent-%COMP%]{opacity:.7;margin-bottom:10px}.titlepage[_ngcontent-%COMP%]{font-size:20px;margin-bottom:10px;font-weight:600}#form[_ngcontent-%COMP%]{width:100%}#step[_ngcontent-%COMP%]{margin-right:10px}#form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:block;width:100%;position:relative}.warning2[_ngcontent-%COMP%]{width:25px;right:20px;position:absolute}#form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:30px;padding-right:10px;width:100%;max-width:240px;margin-bottom:10px;height:30px;background-color:#e7e7e7;border-radius:2px;border:unset}@media (max-width: 840px){#center-imagen[_ngcontent-%COMP%]{display:none}#text-info[_ngcontent-%COMP%]{width:100%;text-align:center;padding-left:5%;position:relative;padding-right:5%}.text[_ngcontent-%COMP%]{margin-left:unset!important;max-width:400px!important}#content-text[_ngcontent-%COMP%]{text-align:center;display:flex;flex-direction:column;justify-content:center;align-items:center;flex-wrap:nowrap}.text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:justify}#next-button[_ngcontent-%COMP%]{margin-left:unset!important}#text-info[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:nth-child(1){left:unset!important}}@media (max-width: 660px){#page2[_ngcontent-%COMP%]{flex-direction:column;justify-content:center;align-items:center}#fileUpload[_ngcontent-%COMP%]{width:80%}.div-center[_ngcontent-%COMP%]{width:100%}#form[_ngcontent-%COMP%]{position:relative;left:30px}}#ubication-img[_ngcontent-%COMP%]{width:70px;position:absolute;top:53px;right:60px}#page3[_ngcontent-%COMP%]{flex-direction:column}#page3[_ngcontent-%COMP%]   .titlepage[_ngcontent-%COMP%]{margin-top:60px}#page3[_ngcontent-%COMP%]   .titlepage[_ngcontent-%COMP%], #page3[_ngcontent-%COMP%]   .sub[_ngcontent-%COMP%]{margin-left:60px}#mapa[_ngcontent-%COMP%]{height:95%;width:90%;margin-top:10px}#map-c[_ngcontent-%COMP%]{width:100%;height:70%;display:flex;justify-content:center}.ok[_ngcontent-%COMP%]{width:15px}@media (max-width: 500px){#ubication-img[_ngcontent-%COMP%]{display:none}}"]}),n})()},{path:"ubication/:latitude/:longitude",component:c(699).p},{path:"movements",component:(()=>{class n{constructor(t,o,r){this.centerSvr=t,this.router=o,this.dashboardSrv=r,this.movements=[]}ngOnInit(){this.dashboardSrv.setTitle("Movimientos inusuales"),this.centerSvr.getCenterOfAdministrator().subscribe({next:t=>{this.school=t,this.centerSvr.getMovementsBySchool(t).subscribe({next:o=>{this.movements=o.reverse()}})},error:()=>{this.router.navigateByUrl("../centers")}})}deleteAll(){p().fire({title:"\xbfBorrar todo?",text:"Esta acci\xf3n es no es reversible",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Borrar"}).then(t=>{t.isConfirmed&&this.centerSvr.deleteAllMovement(this.school).subscribe({next:()=>{this.movements=[]}})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h.F),e.Y36(u.F0),e.Y36(f.s))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-unusual-movements"]],decls:11,vars:2,consts:[["id","mainDivMovements"],["id","titleMovement"],[3,"click"],["id","container"],["id","tableMovements",4,"ngIf"],["id","noMovements",4,"ngIf"],["id","tableMovements"],["class","movementDetect",4,"ngFor","ngForOf"],[1,"movementDetect"],["src","assets/img/movement-icon.png"],["id","noMovements"],["src","assets/img/movements.png"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"p"),e._uU(3,"Movimientos inusuales"),e.qZA(),e.TgZ(4,"p"),e._uU(5,"Movimientos detectados en el centro"),e.qZA(),e.TgZ(6,"button",2),e.NdJ("click",function(){return o.deleteAll()}),e._uU(7,"Borrar todo"),e.qZA(),e.qZA(),e.TgZ(8,"div",3),e.YNc(9,ve,2,1,"div",4),e.YNc(10,Me,4,0,"div",5),e.qZA(),e.qZA()),2&t&&(e.xp6(9),e.Q6J("ngIf",0!=o.movements.length),e.xp6(1),e.Q6J("ngIf",0==o.movements.length))},directives:[m.O5,m.sg],pipes:[m.uU],styles:["#mainDivMovements[_ngcontent-%COMP%]{width:100%;height:100%;overflow:auto}#titleMovement[_ngcontent-%COMP%]{margin-top:40px;height:93px;width:100%}#titleMovement[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{padding-left:4%}#titleMovement[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:nth-child(1){font-size:20px;font-weight:600}#titleMovement[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:nth-child(2){opacity:.7}#container[_ngcontent-%COMP%]{display:flex;justify-content:center}#tableMovements[_ngcontent-%COMP%]{border:1px solid rgb(186,186,186);width:90%}#noMovements[_ngcontent-%COMP%]{height:70%;margin-top:50px;width:100%}#noMovements[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{max-width:200px;width:90%}#noMovements[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}#noMovements[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{margin-top:20px}.movementDetect[_ngcontent-%COMP%]{height:60px;background-color:#e9e9e9;position:relative;transition:.5s}.movementDetect[_ngcontent-%COMP%]:hover{background-color:#ccc}.movementDetect[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(2){position:absolute;right:20px;top:20px}.movementDetect[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(1){position:absolute;left:60px;top:20px}.movementDetect[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:27px;position:absolute;left:18px;top:15px}@media (max-width: 450px){.movementDetect[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(1){display:none}}button[_ngcontent-%COMP%]{height:40px;color:#fff;padding-left:20px;padding-right:20px;background-color:#ff2b2b;border:none;position:absolute;right:0px;margin-right:4%;top:50px}@media (max-width: 420px){button[_ngcontent-%COMP%]{top:unset!important;bottom:30px;margin-right:10%}}"]}),n})()}];let be=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[u.Bz.forChild(we)],u.Bz]}),n})();var Te=c(4466);let Oe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[m.ez,be,Te.m,s.UX]]}),n})()}}]);
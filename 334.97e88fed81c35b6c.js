"use strict";(self.webpackChunkPractises_Management=self.webpackChunkPractises_Management||[]).push([[334],{2334:(lt,h,a)=>{a.r(h),a.d(h,{BusinessModule:()=>pt});var u=a(9808),d=a(1451),b=a(5226),c=a.n(b),g=a(2340),l=(a(1002),a(9898)),C=a(8545),t=a(1223),_=a(164),f=a(8212),x=a(3958),w=a(8083),Z=a(2886);function M(n,o){1&n&&(t.TgZ(0,"span",11),t._uU(1,"O bien cree una nueva empresa"),t.qZA())}function O(n,o){if(1&n&&(t.TgZ(0,"div",14),t._UZ(1,"img",15),t.TgZ(2,"p"),t._uU(3),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.qZA(),t._UZ(6,"img",16),t._UZ(7,"img",17),t._UZ(8,"img",18),t.qZA()),2&n){const e=o.$implicit,i=t.oxw(3);t.xp6(1),t.s9C("src",e.image,t.LSH),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.cif),t.xp6(1),t.hYB("routerLink","../ubication/",e.latitude,"/",e.longitude,""),t.xp6(2),t.MGl("src","assets/img/",i.isAdmin?"edit.png":"view.png","",t.LSH),t.s9C("title",i.isAdmin?"Editar":"Ver"),t.s9C("alt",i.isAdmin?"Editar":"Ver"),t.MGl("routerLink","edit/",e.cif,"")}}function T(n,o){if(1&n&&(t.TgZ(0,"div",12),t.YNc(1,O,9,9,"div",13),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.locations)}}function P(n,o){1&n&&(t.TgZ(0,"div",19),t._UZ(1,"img",20),t.TgZ(2,"p"),t._uU(3,"Ninguna empresa coincide con la b\xfasqueda"),t.qZA(),t.qZA())}function A(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",2),t.TgZ(1,"div",3),t.TgZ(2,"div",4),t.TgZ(3,"p"),t._uU(4,"Empresas"),t.qZA(),t.TgZ(5,"p"),t._uU(6," Vea las empresas registradas en la plataforma e obtenga informaci\xf3n sobre su localizaci\xf3n, trabajadores de contacto y m\xe1s. "),t.YNc(7,M,2,0,"span",5),t.qZA(),t.qZA(),t.TgZ(8,"div",6),t.TgZ(9,"search",7),t.NdJ("query",function(s){return t.CHM(e),t.oxw().buscar(s)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"div"),t.YNc(11,T,2,1,"div",8),t.YNc(12,P,4,0,"div",9),t.qZA(),t.TgZ(13,"app-map-button",10),t.NdJ("mapMode",function(){return t.CHM(e),t.oxw().showMap()}),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(7),t.Q6J("ngIf",e.isAdmin),t.xp6(4),t.Q6J("ngIf",0!=e.locations.length),t.xp6(1),t.Q6J("ngIf",0==e.locations.length)}}function B(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",21),t.TgZ(1,"img",22),t.NdJ("click",function(){return t.CHM(e),t.oxw().showListOfSchool()}),t.qZA(),t.TgZ(2,"div",3),t.TgZ(3,"div",4),t.TgZ(4,"p"),t._uU(5,"Ver en mapa"),t.qZA(),t.TgZ(6,"p"),t._uU(7," Vea las empresas disponibles conociendo la ubicaci\xf3n en la que se encuentra el mismo, por defecto se mostrar\xe1 la ubicaci\xf3n actual del dispositivo "),t.qZA(),t.qZA(),t._UZ(8,"div",6),t.qZA(),t.TgZ(9,"div",23),t._UZ(10,"div",24),t.qZA(),t.qZA()}}let N=(()=>{class n{constructor(e,i,s,r,m){this.businessSvr=e,this.dashboardSvr=i,this.router=s,this.route=r,this.userSrv=m,this.isAdmin=!1,this.mapbox=l,this.map=null,this.locations=[],this.mapMode=!1}ngOnInit(){"ROLE_ADMIN"==this.userSrv.getPerson().rol.toString()&&(this.isAdmin=!0),this.dashboardSvr.setTitle("Empresas"),this.mapbox.accessToken=g.N.mapBoxToken,this.businessSvr.getAllLocations().subscribe({next:e=>{this.locations=e},error:e=>{c().fire({icon:"error",title:"Oops...",text:null==e.error.mensaje?"Servidor no disponible":e.error.mensaje})}})}buscar(e){this.businessSvr.getBusinessByName(e).subscribe({next:i=>{this.locations=i},error:i=>{c().fire({icon:"error",title:"Oops...",text:null==i.error.mensaje?"Servidor no disponible":i.error.mensaje})}})}showListOfSchool(){this.mapMode=!1}showMap(){this.mapMode=!0,this.businessSvr.getAllLocations().subscribe({next:e=>{this.locations=e,navigator.geolocation.getCurrentPosition(i=>{this.map=new l.Map({container:"mapCenters",style:"mapbox://styles/mapbox/light-v10",zoom:15,center:[i.coords.longitude,i.coords.latitude]}),this.map.addControl(new l.NavigationControl),this.map.addControl(new l.FullscreenControl),this.map.addControl(new C({accessToken:g.N.mapBoxToken})),document.querySelector(".mapboxgl-ctrl-geocoder--input").placeholder="Buscar",e.forEach(r=>{console.log(r);const m=new l.Popup({offset:25}).setHTML("<span>"+r.name+"</span><div class='enginepop'></div>");new l.Marker({draggable:!1,color:"#ff8000"}).setPopup(m).setLngLat([r.longitude,r.latitude]).addTo(this.map)})})},error:e=>{c().fire({icon:"error",title:"Oops...",text:null==e.error.mensaje?"Servidor no disponible":e.error.mensaje})}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_.m),t.Y36(f.s),t.Y36(d.F0),t.Y36(d.gz),t.Y36(x.K))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-search-business"]],decls:2,vars:2,consts:[["id","searchDivMain","class","inNewIntro inNewIntro",4,"ngIf"],["id","searchDivMain","class","mapView inNewIntroMap",4,"ngIf"],["id","searchDivMain",1,"inNewIntro","inNewIntro"],["id","bienvenida"],["id","text"],["class","bold","routerLink","../new-business",4,"ngIf"],["id","searchDiv"],[3,"query"],["id","schools",4,"ngIf"],["id","no-centers",4,"ngIf"],[3,"mapMode"],["routerLink","../new-business",1,"bold"],["id","schools"],["class","school",4,"ngFor","ngForOf"],[1,"school"],[3,"src"],["src","assets/img/location.png","title","Ver ubicaci\xf3n","alt","Ver ubicaci\xf3n","title","Ver ubicaci\xf3n","alt","Ver ubicaci\xf3n",3,"routerLink"],["src","assets/img/call.png","title","Contacto","alt","Contacto","title","Obtener n\xfameros de contacto","alt","Obtener n\xfameros de contacto",1,"leftIcon"],[1,"rightIcon",3,"src","title","alt","routerLink"],["id","no-centers"],["src","assets/img/business.png"],["id","searchDivMain",1,"mapView","inNewIntroMap"],["id","back","src","assets/img/back-map.png",3,"click"],["id","map"],["id","mapCenters"]],template:function(e,i){1&e&&(t.YNc(0,A,14,3,"div",0),t.YNc(1,B,11,0,"div",1)),2&e&&(t.Q6J("ngIf",!i.mapMode),t.xp6(1),t.Q6J("ngIf",i.mapMode))},directives:[u.O5,d.rH,w.g,u.sg,Z.$],styles:["#searchDivMain[_ngcontent-%COMP%]{height:100%;overflow:auto}#bienvenida[_ngcontent-%COMP%]{height:160px;display:flex}#bienvenida[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:50%;display:flex;flex-direction:column;justify-content:center}.bold[_ngcontent-%COMP%]{font-weight:600;color:var(--color)}.bold[_ngcontent-%COMP%]:hover{-webkit-text-decoration-line:underline;text-decoration-line:underline}#bienvenida[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){align-items:flex-end}#text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(1){font-weight:600;margin-bottom:5px;font-size:20px}#text[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:nth-child(2){opacity:.7}#text[_ngcontent-%COMP%]{padding-left:5%}#searchDiv[_ngcontent-%COMP%]{padding-right:5%}#no-centers[_ngcontent-%COMP%]{animation-name:inSchool;animation-duration:.5s;display:flex;height:350px;width:100%;flex-direction:column;align-content:center;justify-content:center;align-items:center}#no-centers[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:261px}#no-centers[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:17px;margin-top:20px}app-map-button[_ngcontent-%COMP%]{position:absolute;bottom:64px;right:50px}.school[_ngcontent-%COMP%]{background-color:#dfdfdf;animation-name:inSchool;animation-duration:.5s;box-shadow:0 2px 5px #a1a1a1}#schools[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;flex-wrap:wrap;justify-content:center}.school[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:nth-child(1){height:180px;position:relative;top:-20px}.school[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(2){font-size:18px;position:absolute;left:25px;top:175px}.school[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(3){opacity:.5;margin-left:25px;position:absolute;top:200px;left:0px}.school[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;position:relative;overflow:hidden;align-items:center;margin-left:3%;margin-right:3%;margin-bottom:40px;width:240px;height:290px;border-radius:10px}.school[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:nth-child(4){width:24px;position:absolute;bottom:15px}#map[_ngcontent-%COMP%]{display:flex;width:100%;height:70%;justify-content:center}#mapCenters[_ngcontent-%COMP%]{width:90%;height:100%}.marker[_ngcontent-%COMP%]{background-image:url(https://pmmciex.com/wp-content/uploads/2020/07/ubicacionnaranja.png);background-size:cover;width:50px;height:50px;border-radius:50%;cursor:pointer}#back[_ngcontent-%COMP%]{position:absolute;top:42px;width:25px;margin-left:10px}@media (max-width: 600px){#bienvenida[_ngcontent-%COMP%]{flex-direction:column;justify-content:center;align-items:center;margin-top:40px;margin-bottom:40px}#text[_ngcontent-%COMP%]{width:90%!important;margin-bottom:30px;padding-left:unset!important}#searchDiv[_ngcontent-%COMP%]{width:100%!important;align-items:flex-start!important;padding-left:30px;padding-right:unset!important}.mapView[_ngcontent-%COMP%]{height:60%}#back[_ngcontent-%COMP%]{top:20px;left:5%}}.leftIcon[_ngcontent-%COMP%]{width:20px;position:absolute;bottom:19px;left:40px}.rightIcon[_ngcontent-%COMP%]{width:20px;position:absolute;bottom:19px;right:40px}@keyframes inSchool{0%{transform:scale(.5);opacity:0}to{transform:scale(1);opacity:1}}"]}),n})();var S=a(4149),p=a(2382),q=a(9907),v=a(9976),I=a(3066);function k(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",6),t.TgZ(1,"div",7),t.TgZ(2,"p"),t._uU(3,"Asistente de creaci\xf3n de nueva empresa"),t.qZA(),t.TgZ(4,"div",8),t.TgZ(5,"div",9),t.TgZ(6,"p"),t._uU(7," Este asistente le guiar\xe1 a lo largo de la creaci\xf3n de esta nueva empresa "),t.qZA(),t.TgZ(8,"p"),t._uU(9," Si alg\xfan dato no es correcto se le indicar\xe1 con "),t._UZ(10,"img",10),t.qZA(),t.TgZ(11,"p"),t._uU(12," En dicho caso, ponga el cursor encima para ver el error "),t.qZA(),t.TgZ(13,"p"),t._uU(14," Puede actualizar los datos de la empresa una vez creada si es necesario "),t.qZA(),t.qZA(),t.TgZ(15,"div",11),t.TgZ(16,"app-next",12),t.NdJ("next",function(){t.CHM(e);const s=t.oxw();return s.page=s.page+1}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(17,"div",13),t._UZ(18,"img",14),t.qZA(),t.qZA()}}function y(n,o){1&n&&t._UZ(0,"img",31)}function U(n,o){1&n&&t._UZ(0,"img",32)}function F(n,o){if(1&n&&t._UZ(0,"img",33),2&n){const e=t.oxw(2);t.s9C("title",e.existBusiness),t.s9C("alt",e.existBusiness)}}function E(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"app-next",34),t.NdJ("next",function(){return t.CHM(e),t.oxw(2).showMap()}),t.qZA()}}function J(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",15),t.TgZ(1,"div",16),t.TgZ(2,"div",17),t.TgZ(3,"p",18),t.TgZ(4,"span",19),t._uU(5,"Paso 1 de 2"),t.qZA(),t._uU(6,"Datos de la empresa"),t.qZA(),t.TgZ(7,"p",20),t._uU(8,"Rellene los siguientes datos para la empresa"),t.qZA(),t.TgZ(9,"div",21),t.TgZ(10,"div"),t._UZ(11,"input",22),t.YNc(12,y,1,0,"img",23),t.qZA(),t.TgZ(13,"div"),t._UZ(14,"input",24),t.YNc(15,U,1,0,"img",25),t.qZA(),t.TgZ(16,"div"),t._UZ(17,"input",26),t.YNc(18,F,1,2,"img",27),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div",28),t.TgZ(20,"app-file-upload",29),t.NdJ("fileName",function(s){return t.CHM(e),t.oxw().setFileName(s)}),t.qZA(),t.qZA(),t.YNc(21,E,1,0,"app-next",30),t.qZA()}if(2&n){const e=t.oxw();let i,s,r;t.xp6(12),t.Q6J("ngIf",e.formGroup.get("name").touched&&(null==(i=e.formGroup.get("name"))?null:i.errors)),t.xp6(3),t.Q6J("ngIf",e.formGroup.get("numberOfStudents").touched&&(null==(s=e.formGroup.get("numberOfStudents"))?null:s.errors)),t.xp6(3),t.Q6J("ngIf",e.formGroup.get("cif").touched&&(null==(r=e.formGroup.get("cif"))?null:r.errors)),t.xp6(2),t.Q6J("textToShow","Seleccione imagen para la empresa"),t.xp6(1),t.Q6J("ngIf",!e.formGroup.invalid&&e.newBusiness.image)}}function j(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"app-next",34),t.NdJ("next",function(){return t.CHM(e),t.oxw(2).sendData()}),t.qZA()}}function Y(n,o){if(1&n&&(t.TgZ(0,"div",35),t.TgZ(1,"div"),t.TgZ(2,"p",18),t.TgZ(3,"span",19),t._uU(4,"Paso 2 de 2"),t.qZA(),t._uU(5,"Ubicaci\xf3n de la empresa"),t.qZA(),t.TgZ(6,"p",20),t._uU(7,"Seleccione d\xf3nde se encuentra esta empresa"),t.qZA(),t._UZ(8,"img",36),t.qZA(),t.TgZ(9,"div",37),t._UZ(10,"div",38),t.qZA(),t.YNc(11,j,1,0,"app-next",30),t.qZA()),2&n){const e=t.oxw();t.xp6(11),t.Q6J("ngIf",e.location.latitude&&e.location.longitude)}}function L(n,o){1&n&&t._UZ(0,"img",45)}function Q(n,o){1&n&&t._UZ(0,"img",45)}function z(n,o){1&n&&(t.TgZ(0,"div",11),t._UZ(1,"app-next",46),t.qZA())}function H(n,o){if(1&n&&(t.TgZ(0,"div",39),t.TgZ(1,"div",7),t.TgZ(2,"p",40),t._uU(3,"Creando empresa ..."),t.qZA(),t.TgZ(4,"div",8),t.TgZ(5,"div",41),t.TgZ(6,"p"),t.YNc(7,L,1,0,"img",42),t._uU(8," Creando empresa ... "),t.qZA(),t.TgZ(9,"p"),t.YNc(10,Q,1,0,"img",42),t._uU(11," Asignando ubicaci\xf3n ... "),t.qZA(),t.TgZ(12,"p",43),t._uU(13," Empresa creada con \xe9xito "),t.qZA(),t.qZA(),t.YNc(14,z,2,0,"div",44),t.qZA(),t.qZA(),t.TgZ(15,"div",13),t._UZ(16,"img",14),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(7),t.Q6J("ngIf",e.serverStep>0),t.xp6(3),t.Q6J("ngIf",e.serverStep>1),t.xp6(4),t.Q6J("ngIf",e.finish)}}function D(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"app-back",47),t.NdJ("back",function(){t.CHM(e);const s=t.oxw();return s.page=s.page-1}),t.qZA()}}let G=(()=>{class n{constructor(e,i,s){this.dashboardSvr=e,this.formBuilder=i,this.businessSvr=s,this.newBusiness={},this.page=1,this.showNext=!0,this.showBack=!0,this.mapbox=l,this.map=null,this.finish=!1,this.serverStep=0,this.location={}}ngOnInit(){this.dashboardSvr.setTitle("Nueva empresa"),this.mapbox.accessToken=g.N.mapBoxToken,this.buildForm()}buildForm(){this.formGroup=this.formBuilder.group({name:["",[p.kI.required]],numberOfStudents:["",[p.kI.required]],cif:["",[p.kI.required,p.kI.pattern("[A-Za-z]{1}[0-9]{8}")],[this.businessSvr]]})}get existBusiness(){var e;let i=null===(e=this.formGroup.get("cif"))||void 0===e?void 0:e.errors;return i.exist?"Cif registrado":i.pattern?"Indique un dni v\xe1lido":""}setFileName(e){this.newBusiness.image=g.N.serverFileAddress+"/files/"+e}showMap(){this.page=this.page+1,navigator.geolocation.getCurrentPosition(e=>{let i={};null!=this.location.longitude&&null!=this.location.latitude?i=this.location:(i.latitude=e.coords.latitude,i.longitude=e.coords.longitude),this.map=new l.Map({container:"mapa",style:"mapbox://styles/mapbox/light-v10",zoom:15,center:[i.longitude,i.latitude]}),this.marker=new l.Marker({color:"#ff8000"}),null!=this.location.longitude&&null!=this.location.latitude&&this.marker.setLngLat([i.longitude,i.latitude]).addTo(this.map),this.map.on("click",this.add_marker.bind(this)),this.map.addControl(new l.NavigationControl),this.map.addControl(new l.FullscreenControl)})}add_marker(e){let i=e.lngLat;this.location.latitude=i.lat,this.location.longitude=i.lng,this.marker.setLngLat(i).addTo(this.map)}sendData(){this.page=this.page+1;let e=this.newBusiness.image;this.newBusiness=this.formGroup.value,this.newBusiness.image=e,this.businessSvr.createBusiness(this.newBusiness).subscribe({next:i=>{this.serverStep++,this.businessSvr.setUbication(i,this.location).subscribe({next:()=>{this.serverStep++,this.finish=!0},error:s=>{c().fire({icon:"error",title:"Oops...",text:null==s.error.mensaje?"Servidor no disponible":s.error.mensaje})}})},error:i=>{c().fire({icon:"error",title:"Oops...",text:null==i.error.mensaje?"Servidor no disponible":i.error.mensaje})}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.s),t.Y36(p.qu),t.Y36(_.m))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-new-business"]],decls:6,vars:6,consts:[[1,"inNewIntro",3,"formGroup"],["id","page1","class","page",4,"ngIf"],["id","page2","class","page",4,"ngIf"],["id","page3","class","page",4,"ngIf"],["id","page4","class","page",4,"ngIf"],["class","buttonfloat","id","back",3,"back",4,"ngIf"],["id","page1",1,"page"],["id","text-info",1,"div-center"],["id","content-text"],[1,"text"],["src","assets/img/warning.png",1,"warning"],["id","next-button"],["id","next",3,"next"],["id","center-imagen",1,"div-center"],["src","assets/img/business.png","id","schoolImg"],["id","page2",1,"page"],[1,"div-center"],["id","center"],[1,"titlepage"],["id","step"],[1,"sub"],["id","form"],["name","name","type","text","formControlName","name","placeholder","Nombre"],["class","warning2","src","assets/img/warning.png","title","Nombre es requerido","alt","Nombre es requerido",4,"ngIf"],["name","numberOfStudents","type","number","min","0","formControlName","numberOfStudents","placeholder","N\xfamero de estudiantes"],["class","warning2","src","assets/img/warning.png","title","Indique un n\xfamero m\xe1ximo de estudiantes que en el que pueden hacer las pr\xe1cticas los alumnos","alt","Indique n\xfamero de estudiantes",4,"ngIf"],["name","cif","type","text","formControlName","cif","placeholder","Cif"],["class","warning2","src","assets/img/warning.png",3,"title","alt",4,"ngIf"],["id","",1,"div-center"],["id","fileUpload",3,"textToShow","fileName"],["class","buttonfloat nextForm","id","next",3,"next",4,"ngIf"],["src","assets/img/warning.png","title","Nombre es requerido","alt","Nombre es requerido",1,"warning2"],["src","assets/img/warning.png","title","Indique un n\xfamero m\xe1ximo de estudiantes que en el que pueden hacer las pr\xe1cticas los alumnos","alt","Indique n\xfamero de estudiantes",1,"warning2"],["src","assets/img/warning.png",1,"warning2",3,"title","alt"],["id","next",1,"buttonfloat","nextForm",3,"next"],["id","page3",1,"page"],["id","ubication-img","src","assets/img/ubication.png"],["id","map-c"],["id","mapa"],["id","page4",1,"page"],["id","creating-text"],["id","steps",1,"text"],["class","ok","src","assets/img/tick.png",4,"ngIf"],[1,"neg"],["id","next-button",4,"ngIf"],["src","assets/img/tick.png",1,"ok"],["id","next","routerLink","../my-center"],["id","back",1,"buttonfloat",3,"back"]],template:function(e,i){1&e&&(t.TgZ(0,"form",0),t.YNc(1,k,19,0,"div",1),t.YNc(2,J,22,5,"div",2),t.YNc(3,Y,12,1,"div",3),t.YNc(4,H,17,3,"div",4),t.YNc(5,D,1,0,"app-back",5),t.qZA()),2&e&&(t.Q6J("formGroup",i.formGroup),t.xp6(1),t.Q6J("ngIf",1==i.page),t.xp6(1),t.Q6J("ngIf",2==i.page),t.xp6(1),t.Q6J("ngIf",3==i.page),t.xp6(1),t.Q6J("ngIf",4==i.page),t.xp6(1),t.Q6J("ngIf",1!=i.page&&4!=i.page))},directives:[p._Y,p.JL,p.sg,u.O5,q.f,p.Fj,p.JJ,p.u,p.qQ,p.wV,v.Y,d.rH,I.A],styles:[".page[_ngcontent-%COMP%]{height:100%;width:100%;overflow:auto;display:flex}#next[_ngcontent-%COMP%]{right:20px}.buttonfloat[_ngcontent-%COMP%]{position:absolute;bottom:72px}#next[_ngcontent-%COMP%], #back[_ngcontent-%COMP%]{width:130px;height:30px}#back[_ngcontent-%COMP%]{left:40px}.nextForm[_ngcontent-%COMP%]{right:30px}#schoolImg[_ngcontent-%COMP%]{width:235px}#page1[_ngcontent-%COMP%]{flex-wrap:nowrap;justify-content:center;align-items:center}#text-info[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:nth-child(1){font-size:20px;position:relative;top:-10px;left:-20px;font-weight:600}.text[_ngcontent-%COMP%]{max-width:400px;margin-left:70px}.text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:10px;opacity:.7;text-align:justify}#text-info[_ngcontent-%COMP%]   #next[_ngcontent-%COMP%]{width:120px!important}form[_ngcontent-%COMP%]{height:100%;width:100%}.div-center[_ngcontent-%COMP%]{width:50%;display:flex;flex-direction:column;flex-wrap:nowrap;align-content:center;justify-content:center;align-items:center}#next-button[_ngcontent-%COMP%]{width:160px;height:40px;margin-left:70px}.warning[_ngcontent-%COMP%]{width:25px;position:relative;top:5px}span[_ngcontent-%COMP%]{color:var(--color)}.sub[_ngcontent-%COMP%]{opacity:.7;margin-bottom:10px}.titlepage[_ngcontent-%COMP%]{font-size:20px;margin-bottom:10px;font-weight:600}#form[_ngcontent-%COMP%]{width:100%}#step[_ngcontent-%COMP%]{margin-right:10px}#form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:block;width:100%;position:relative}.warning2[_ngcontent-%COMP%]{width:25px;right:20px;position:absolute}#form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:30px;padding-right:10px;width:100%;max-width:240px;margin-bottom:10px;height:30px;background-color:#e7e7e7;border-radius:2px;border:unset}@media (max-width: 840px){#center-imagen[_ngcontent-%COMP%]{display:none}#text-info[_ngcontent-%COMP%]{width:100%;text-align:center;padding-left:5%;position:relative;padding-right:5%}.text[_ngcontent-%COMP%]{margin-left:unset!important;max-width:400px!important}#content-text[_ngcontent-%COMP%]{text-align:center;display:flex;flex-direction:column;justify-content:center;align-items:center;flex-wrap:nowrap}.text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:justify}#next-button[_ngcontent-%COMP%]{margin-left:unset!important}#text-info[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:nth-child(1){left:unset!important}}@media (max-width: 660px){#page2[_ngcontent-%COMP%]{flex-direction:column;justify-content:center;align-items:center}#fileUpload[_ngcontent-%COMP%]{width:80%}.div-center[_ngcontent-%COMP%]{width:100%}#form[_ngcontent-%COMP%]{position:relative;left:30px}}#ubication-img[_ngcontent-%COMP%]{width:70px;position:absolute;top:53px;right:60px}#page3[_ngcontent-%COMP%]{flex-direction:column}#page3[_ngcontent-%COMP%]   .titlepage[_ngcontent-%COMP%]{margin-top:60px}#page3[_ngcontent-%COMP%]   .titlepage[_ngcontent-%COMP%], #page3[_ngcontent-%COMP%]   .sub[_ngcontent-%COMP%]{margin-left:60px}#mapa[_ngcontent-%COMP%]{height:95%;width:90%;margin-top:10px}#map-c[_ngcontent-%COMP%]{width:100%;height:70%;display:flex;justify-content:center}.ok[_ngcontent-%COMP%]{width:15px}@media (max-width: 500px){#ubication-img[_ngcontent-%COMP%]{display:none}}"]}),n})();var V=a(1447);function R(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",3),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().select(r.dni)}),t._UZ(1,"img",4),t.TgZ(2,"p"),t._uU(3),t.qZA(),t.qZA()}if(2&n){const e=o.$implicit;t.xp6(1),t.s9C("src",e.image,t.LSH),t.xp6(2),t.Oqu(e.name)}}let W=(()=>{class n{constructor(e){this.laborService=e,this.dni=new t.vpe,this.cif=""}ngOnInit(){this.laborService.getTutorsFree().subscribe({next:e=>{this.tutors=e},error:e=>{c().fire({icon:"error",title:"Oops...",text:e.error.mensaje})}})}select(e){this.dni.emit(e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(V.U))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-select-tutor-whitoutBusiness"]],inputs:{cif:"cif"},outputs:{dni:"dni"},decls:5,vars:1,consts:[["id","businessDiv"],["id","businessDivs"],["class","business",3,"click",4,"ngFor","ngForOf"],[1,"business",3,"click"],[3,"src"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"p"),t._uU(2,"Seleccione tutor"),t.qZA(),t.TgZ(3,"div",1),t.YNc(4,R,4,2,"div",2),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.Q6J("ngForOf",i.tutors))},directives:[u.sg],styles:["#businessDiv[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:nth-child(1){font-size:20px;margin-top:29px;margin-left:30px}#businessDiv[_ngcontent-%COMP%]{height:94%}#businessDivs[_ngcontent-%COMP%]{margin-top:10px;height:92%;overflow:auto}.business[_ngcontent-%COMP%]{height:66px;width:100%;display:flex;flex-direction:row;flex-wrap:wrap;align-content:center;align-items:center;transition:.2s;padding-left:12%}.business[_ngcontent-%COMP%]:hover{background-color:#dfdfdf}.business[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:nth-child(2){margin-left:20px}.business[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]:nth-child(1){width:56px;height:39px}"]}),n})();function X(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"app-file-upload",14),t.NdJ("fileName",function(s){return t.CHM(e),t.oxw(2).changeImage(s)}),t.qZA()}}function $(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"img",15),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).editName()}),t.qZA()}}function K(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"img",15),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).editNumberOfStudents()}),t.qZA()}}function tt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).updateLocation()}),t._uU(1,"Guardar localizaci\xf3n"),t.qZA()}}function et(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).selectTutor=!0}),t._uU(1,"A\xf1adir tutor"),t.qZA()}}function nt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"app-select-tutor-whitoutBusiness",20),t.NdJ("dni",function(s){return t.CHM(e),t.oxw(3).addTutor(s)}),t.qZA()}}function it(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",18),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).closeAll()}),t.YNc(1,nt,1,0,"app-select-tutor-whitoutBusiness",19),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.selectTutor)}}function ot(n,o){if(1&n&&(t.TgZ(0,"div",1),t.TgZ(1,"div",2),t._UZ(2,"div",3),t.TgZ(3,"p",4),t._uU(4),t.qZA(),t._UZ(5,"img",5),t.YNc(6,X,1,0,"app-file-upload",6),t.qZA(),t.TgZ(7,"div",7),t.TgZ(8,"p"),t._uU(9),t.YNc(10,$,1,0,"img",8),t.qZA(),t.TgZ(11,"p"),t._uU(12),t.YNc(13,K,1,0,"img",8),t.qZA(),t.TgZ(14,"div",9),t._UZ(15,"div",10),t.qZA(),t.YNc(16,tt,2,0,"button",11),t.YNc(17,et,2,0,"button",12),t.qZA(),t.YNc(18,it,2,1,"div",13),t.qZA()),2&n){const e=t.oxw();t.xp6(4),t.Oqu(e.business.name),t.xp6(1),t.s9C("src",e.business.image,t.LSH),t.xp6(1),t.Q6J("ngIf",e.isAdmin),t.xp6(3),t.hij("",e.business.name," "),t.xp6(1),t.Q6J("ngIf",e.isAdmin),t.xp6(2),t.hij("Pueden matricularse este a\xf1o ",e.business.numberOfStudents," estudiantes "),t.xp6(1),t.Q6J("ngIf",e.isAdmin),t.xp6(3),t.Q6J("ngIf",e.showSaveUbication&&e.isAdmin),t.xp6(1),t.Q6J("ngIf",e.isAdmin),t.xp6(1),t.Q6J("ngIf",e.selectTutor)}}const at=[{path:"search-business",component:N},{path:"new-business",component:G},{path:"ubication/:latitude/:longitude",component:S.p},{path:"search-business/edit/:cif",component:(()=>{class n{constructor(e,i,s,r){this.rutaActiva=e,this.businessService=i,this.router=s,this.userSrv=r,this.selectTutor=!1,this.mapbox=l,this.map=null,this.showSaveUbication=!1,this.isAdmin=!1}ngOnInit(){var e;this.mapbox.accessToken=g.N.mapBoxToken,(null===(e=this.userSrv.getPerson())||void 0===e?void 0:e.rol)+""=="ROLE_ADMIN"&&(this.isAdmin=!0),this.loadBusiness()}loadUbication(){this.businessService.getUbication(this.business).subscribe({next:e=>{this.business.location=e},error:e=>{c().fire({icon:"error",title:"Oops...",text:null==e.error.mensaje?"Servidor no disponible":e.error.mensaje})}})}loadBusiness(){this.businessService.getBusiness(this.rutaActiva.snapshot.params.cif).subscribe({next:i=>{this.business=i,this.loadMap(i)},error:()=>{history.back()}})}changeImage(e){this.business.image=g.N.serverFileAddress+"/files/"+e,this.businessService.editBusiness(this.business).subscribe({next:i=>{this.business=i,this.loadUbication()},error:i=>{c().fire({icon:"error",title:"Oops...",text:null==i.error.mensaje?"Servidor no disponible":i.error.mensaje})}})}editNumberOfStudents(){c().fire({title:"Indique n\xfamero de estudiantes que se pueden matricular este a\xf1o",input:"number",inputValue:this.business.numberOfStudents,inputAttributes:{autocapitalize:"on",min:"0"},showCancelButton:!0,confirmButtonText:"Cambiar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0,allowOutsideClick:()=>!c().isLoading()}).then(e=>{isNaN(e.value)||(this.business.numberOfStudents=parseInt(e.value),this.businessService.editBusiness(this.business).subscribe({next:i=>{this.business=i,this.loadUbication()},error:i=>{c().fire({icon:"error",title:"Oops...",text:null==i.error.mensaje?"Servidor no disponible":i.error.mensaje})}}))})}editName(){c().fire({title:"Indique nuevo nombre",input:"text",inputAttributes:{autocapitalize:"on"},showCancelButton:!0,confirmButtonText:"Cambiar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0,allowOutsideClick:()=>!c().isLoading()}).then(e=>{0==e.value.trim().length?c().showValidationMessage("Indique un nombre v\xe1lido"):(this.business.name=e.value,this.businessService.editBusiness(this.business).subscribe({next:i=>{this.business=i,this.loadUbication()},error:i=>{c().fire({icon:"error",title:"Oops...",text:null==i.error.mensaje?"Servidor no disponible":i.error.mensaje})}}))})}loadMap(e){this.businessService.getUbication(e).subscribe({next:i=>{this.business.location=i,this.map=new l.Map({container:"map",style:"mapbox://styles/mapbox/light-v10",zoom:15,center:[i.longitude,i.latitude]}),new l.Marker({draggable:this.isAdmin,color:"#ff8000"}).setLngLat([i.longitude,i.latitude]).addTo(this.map).on("drag",r=>{this.business.location.latitude=r.target._lngLat.lat,this.business.location.longitude=r.target._lngLat.lng,this.showSaveUbication=!0})},error:i=>{c().fire({icon:"error",title:"Oops...",text:null==i.error.mensaje?"Servidor no disponible":i.error.mensaje})}})}updateLocation(){this.businessService.editUbication(this.business).subscribe({next:()=>{this.showSaveUbication=!1,c().fire({icon:"success",title:"\xa1Guardado!"})},error:e=>{c().fire({icon:"error",title:"Oops...",text:null==e.error.mensaje?"Servidor no disponible":e.error.mensaje})}})}addTutor(e){this.businessService.setBusinessToTutor(e,this.business).subscribe({next:()=>{c().fire({icon:"success",title:"\xa1Guardado!"})},error:i=>{c().fire({icon:"error",title:"Oops...",text:null==i.error.mensaje?"Servidor no disponible":i.error.mensaje})}})}closeAll(){this.selectTutor=!1}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.gz),t.Y36(_.m),t.Y36(d.F0),t.Y36(x.K))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-edit-business"]],decls:1,vars:1,consts:[["id","mainContainerEditBusiness","class","inNewIntro",4,"ngIf"],["id","mainContainerEditBusiness",1,"inNewIntro"],["id","image"],["id","ddarkZone"],["id","titleBusiness"],[3,"src"],["id","fileUpload",3,"fileName",4,"ngIf"],["id","contentEditBusiness"],["class","editIcon","src","assets/img/edit.png",3,"click",4,"ngIf"],["id","mapContainerBusiness"],["id","map"],["id","saveLocation",3,"click",4,"ngIf"],["id","addTutor",3,"click",4,"ngIf"],["id","modal-zone",3,"click",4,"ngIf"],["id","fileUpload",3,"fileName"],["src","assets/img/edit.png",1,"editIcon",3,"click"],["id","saveLocation",3,"click"],["id","addTutor",3,"click"],["id","modal-zone",3,"click"],["class","selectModal",3,"dni",4,"ngIf"],[1,"selectModal",3,"dni"]],template:function(e,i){1&e&&t.YNc(0,ot,19,10,"div",0),2&e&&t.Q6J("ngIf",i.business)},directives:[u.O5,v.Y,W],styles:["#mainContainerEditBusiness[_ngcontent-%COMP%]{width:100%;height:100%;overflow:auto;padding-bottom:20px}#image[_ngcontent-%COMP%]{width:100%;height:133px;overflow:hidden;display:flex;justify-content:center;align-items:center;position:relative}#image[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:100%;min-width:350px}#fileUpload[_ngcontent-%COMP%]{position:absolute;top:0;opacity:0;width:100%;height:133px}#contentEditBusiness[_ngcontent-%COMP%]{width:100%;position:relative}#contentEditBusiness[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:nth-child(1){display:inline-block;font-size:20px;margin-top:31px;margin-left:37px}.editIcon[_ngcontent-%COMP%]{width:16px}@media (max-width: 600px){#contentEditBusiness[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:nth-child(1){display:block}}#contentEditBusiness[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:nth-child(2){position:absolute;right:10px;top:20px;margin-top:14px;margin-right:10px}#mapContainerBusiness[_ngcontent-%COMP%]{width:100%;height:500px;display:flex;justify-content:center;align-items:center;margin-top:40px}#mapContainerBusiness[_ngcontent-%COMP%] > #map[_ngcontent-%COMP%]{width:90%;height:100%}#saveLocation[_ngcontent-%COMP%], #addTutor[_ngcontent-%COMP%]{background-color:var(--color);height:35px;color:#fff;border:none;width:150px;margin-left:40px;margin-top:40px}#ddarkZone[_ngcontent-%COMP%]{position:absolute;top:0;width:100%;height:100%;background-color:#0000005f}#titleBusiness[_ngcontent-%COMP%]{position:absolute;left:60px;color:#fff;font-size:25px}#modal-zone[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;display:flex;background-color:#00000072;justify-content:center;align-items:center;top:0}#modal-zone[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{height:461px;background-color:#fff;max-width:400px;width:90%;transition:1s;animation-name:introSlow;animation-duration:.2s}"]}),n})()}];let rt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[d.Bz.forChild(at)],d.Bz]}),n})();var ct=a(4466);let pt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[u.ez,rt,ct.m,p.u5,p.UX]]}),n})()}}]);
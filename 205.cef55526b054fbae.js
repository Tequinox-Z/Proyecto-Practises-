"use strict";(self.webpackChunkPractises_Management=self.webpackChunkPractises_Management||[]).push([[205],{2205:(S,b,u)=>{u.r(b),u.d(b,{PersonModule:()=>de});var f=u(9808),d=u(1451),m=(()=>{return(r=m||(m={}))[r.ROLE_ADMIN=0]="ROLE_ADMIN",r[r.ROLE_STUDENT=1]="ROLE_STUDENT",r[r.ROLE_TEACHER=2]="ROLE_TEACHER",r[r.ROLE_LABOR_TUTOR=3]="ROLE_LABOR_TUTOR",m;var r})(),O=u(5226),a=u.n(O),l=u(2382),h=u(2340),e=u(1223),T=u(9275),v=u(4004),x=u(262),w=u(515),M=u(3958),Z=u(5295),A=u(520);let y=(()=>{class r{constructor(t,n,i){this.userService=t,this.authService=n,this.http=i}validate(t){return this.http.get(h.N.serverAddress+"/exist-person/"+t.value,this.authService.getHeadersToken()).pipe((0,T.g)(1500),(0,v.U)(n=>{var i,o;return""==n.mensaje?(null===(i=t.get("dni"))||void 0===i||i.setErrors(null),null):(null===(o=t.get("dni"))||void 0===o||o.setErrors({exist:!0}),{exist:!0})}),(0,x.K)(n=>w.E))}createPerson(t){return this.http.post(h.N.serverAddress+"/auth/register/",t,this.authService.getHeadersToken())}disable(t){let n={};return n.dni=t,this.http.post(h.N.serverAddress+"/disable-user",n,this.authService.getHeadersToken())}enable(t){let n={};return n.dni=t,this.http.post(h.N.serverAddress+"/enable-user/",n,this.authService.getHeadersToken())}getLaborTutor(){return this.http.get(h.N.serverAddress+"/labor-tutor/",this.authService.getHeadersToken())}getTeachers(){return this.http.get(h.N.serverAddress+"/teacher/",this.authService.getHeadersToken())}getStudentsFind(t){return this.http.get(h.N.serverAddress+"/student?name="+t,this.authService.getHeadersToken())}getLaborTutorFind(t){return this.http.get(h.N.serverAddress+"/labor-tutor?name="+t,this.authService.getHeadersToken())}getTeachersFind(t){return this.http.get(h.N.serverAddress+"/teacher?name="+t,this.authService.getHeadersToken())}getStudents(){return this.http.get(h.N.serverAddress+"/student/",this.authService.getHeadersToken())}removeStudent(t){return this.http.delete(h.N.serverAddress+"/student/"+t,this.authService.getHeadersToken())}removeTeacher(t){return this.http.delete(h.N.serverAddress+"/teacher/"+t,this.authService.getHeadersToken())}removeLaborTutor(t){return this.http.delete(h.N.serverAddress+"/labor-tutor/"+t,this.authService.getHeadersToken())}getPersonByDni(t){return this.http.get(h.N.serverAddress+"/person/"+t,this.authService.getHeadersToken())}editTeacher(t){return this.http.put(h.N.serverAddress+"/teacher/"+t.dni,t,this.authService.getHeadersToken())}editAdmin(t){return this.http.put(h.N.serverAddress+"/administrator/"+t.dni,t,this.authService.getHeadersToken())}editStudent(t){return this.http.put(h.N.serverAddress+"/student/"+t.dni,t,this.authService.getHeadersToken())}editTutor(t){return this.http.put(h.N.serverAddress+"/labor-tutor/"+t.dni,t,this.authService.getHeadersToken())}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(M.K),e.LFG(Z.e),e.LFG(A.eN))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var E=u(8212),U=u(8083),N=u(9976);function q(r,s){1&r&&e._UZ(0,"img",45)}function I(r,s){1&r&&(e.TgZ(0,"p",46),e._uU(1,"Sin personas"),e.qZA())}function k(r,s){1&r&&(e.TgZ(0,"p",47),e._uU(1,"No hay personas registradas con el rol elegido"),e.qZA())}function L(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"img",54),e.NdJ("click",function(i){return e.CHM(t),e.oxw(2).showMenu(i)}),e.qZA()}}function F(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"p",44),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit;return e.oxw().toggleDisable(i.dni,i.enabled)}),e._uU(1),e.qZA()}if(2&r){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.enabled?"Deshabilitar":"Habilitar")}}function D(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",48),e.TgZ(1,"div"),e._UZ(2,"img",49),e.qZA(),e.TgZ(3,"p"),e._uU(4),e.qZA(),e.TgZ(5,"p"),e._uU(6),e.qZA(),e.TgZ(7,"p"),e._uU(8),e.qZA(),e.YNc(9,L,1,0,"img",50),e.TgZ(10,"div",51),e.TgZ(11,"p",44),e.NdJ("click",function(i){const c=e.CHM(t).$implicit;return e.oxw().edit(i,c.dni)}),e._uU(12,"Editar"),e.qZA(),e.YNc(13,F,2,1,"p",52),e.TgZ(14,"p",53),e.NdJ("click",function(i){const c=e.CHM(t).$implicit;return e.oxw().remove(i,c.dni)}),e._uU(15,"Borrar"),e.qZA(),e.qZA(),e.qZA()}if(2&r){const t=s.$implicit;e.xp6(2),e.s9C("src",t.image,e.LSH),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.lastName),e.xp6(2),e.Oqu(t.dni),e.xp6(1),e.Q6J("ngIf","ROLE_ADMIN"!=t.rol.toString()),e.xp6(4),e.Q6J("ngIf","ROLE_TEACHER"==t.rol.toString())}}function R(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"app-file-upload",55),e.NdJ("fileName",function(i){return e.CHM(t),e.oxw().setImage(i)}),e.qZA()}}function H(r,s){1&r&&e._UZ(0,"img",56)}function J(r,s){1&r&&e._UZ(0,"img",57)}function G(r,s){1&r&&e._UZ(0,"img",58)}function Y(r,s){if(1&r&&e._UZ(0,"img",59),2&r){const t=e.oxw();e.s9C("title",t.existPerson)}}function j(r,s){1&r&&e._UZ(0,"img",60)}function B(r,s){1&r&&e._UZ(0,"img",61)}function Q(r,s){1&r&&e._UZ(0,"img",62)}function z(r,s){1&r&&e._UZ(0,"img",63)}const V=function(r){return{noData:r}};function X(r,s){1&r&&e._UZ(0,"img",29)}function ee(r,s){1&r&&e._UZ(0,"img",30)}function te(r,s){1&r&&e._UZ(0,"img",31)}function ne(r,s){1&r&&e._UZ(0,"img",32)}function re(r,s){1&r&&e._UZ(0,"img",33)}function ie(r,s){1&r&&e._UZ(0,"img",34)}function oe(r,s){if(1&r&&(e.TgZ(0,"form",10),e.TgZ(1,"p",11),e._uU(2,"Datos del usuario"),e.qZA(),e.TgZ(3,"div",12),e.TgZ(4,"div"),e.TgZ(5,"label"),e._uU(6,"Nombre"),e.qZA(),e._UZ(7,"input",13),e.YNc(8,X,1,0,"img",14),e.TgZ(9,"label"),e._uU(10,"Apellidos"),e.qZA(),e._UZ(11,"input",15),e.YNc(12,ee,1,0,"img",16),e.TgZ(13,"label",17),e._uU(14,"Nacimiento"),e.qZA(),e._UZ(15,"input",18),e.ALo(16,"date"),e.YNc(17,te,1,0,"img",19),e.TgZ(18,"label",20),e._uU(19,"Direcci\xf3n"),e.qZA(),e._UZ(20,"input",21),e.YNc(21,ne,1,0,"img",22),e.qZA(),e.TgZ(22,"div"),e.TgZ(23,"label",23),e._uU(24,"Tel\xe9fono"),e.qZA(),e._UZ(25,"input",24),e.YNc(26,re,1,0,"img",25),e.TgZ(27,"label",26),e._uU(28,"Correo"),e.qZA(),e._UZ(29,"input",27),e.YNc(30,ie,1,0,"img",28),e.qZA(),e.qZA(),e.qZA()),2&r){const t=e.oxw();let n,i,o,c,p,g;e.Q6J("formGroup",t.formGroup),e.xp6(8),e.Q6J("ngIf",t.formGroup.get("name").touched&&(null==(n=t.formGroup.get("name"))?null:n.errors)),e.xp6(4),e.Q6J("ngIf",t.formGroup.get("lastName").touched&&(null==(i=t.formGroup.get("lastName"))?null:i.errors)),e.xp6(3),e.s9C("max",e.xi3(16,8,t.date,"yyyy-MM-dd")),e.xp6(2),e.Q6J("ngIf",t.formGroup.get("birthDate").touched&&(null==(o=t.formGroup.get("birthDate"))?null:o.errors)),e.xp6(4),e.Q6J("ngIf",t.formGroup.get("address").touched&&(null==(c=t.formGroup.get("address"))?null:c.errors)),e.xp6(5),e.Q6J("ngIf",t.formGroup.get("telefone").touched&&(null==(p=t.formGroup.get("telefone"))?null:p.errors)),e.xp6(4),e.Q6J("ngIf",t.formGroup.get("email").touched&&(null==(g=t.formGroup.get("email"))?null:g.errors))}}const se=[{path:"management",component:(()=>{class r{constructor(t,n,i,o,c,p,g,_){this.personSvr=t,this.userService=n,this.authService=i,this.http=o,this.formBuilder=c,this.dashboardService=p,this.router=g,this.route=_,this.rolSelected=m.ROLE_TEACHER,this.rolSelectedString="",this.rolAdmin=m.ROLE_ADMIN,this.imageSelected="",this.date=new Date,this.persons=[]}ngOnInit(){this.buildForm(),this.getPersons()}setImage(t){this.imageSelected=h.N.serverFileAddress+"/files/"+t}showFileInput(){return!document.querySelector("#newPersonContainer").classList.contains("noShow")}closeModal(){this.getPersons(),this.formGroup.reset(),this.imageSelected="",document.querySelector("#newPersonContainer").classList.add("noShow")}buildForm(){this.formGroup=this.formBuilder.group({name:["",[l.kI.required]],lastName:["",[l.kI.required]],birthDate:["",[l.kI.required]],dni:["",[l.kI.required,l.kI.pattern("[0-9]{8}[A-Za-z]{1}")],[this.personSvr]],address:["",[l.kI.required]],telefone:["",[l.kI.required,l.kI.pattern("^[0-9]{9}$")]],email:["",[l.kI.required,l.kI.email]],password:["",[l.kI.required,l.kI.minLength(8)]]})}get existPerson(){var t;return(null===(t=this.formGroup.get("dni"))||void 0===t?void 0:t.errors).exist?"Dni registrado":"Indique un dni v\xe1lido"}getPersons(){this.rolSelected==m.ROLE_TEACHER?(this.rolSelectedString="Profesores",this.dashboardService.setTitle("Profesores"),this.personSvr.getTeachers().subscribe({next:t=>{this.persons=t}})):this.rolSelected==m.ROLE_STUDENT?(this.rolSelectedString="Estudiantes",this.dashboardService.setTitle("Estudiantes"),this.personSvr.getStudents().subscribe({next:t=>{this.persons=t}})):this.rolSelected==m.ROLE_LABOR_TUTOR&&(this.rolSelectedString="Tutores",this.dashboardService.setTitle("Tutores laborales"),this.personSvr.getLaborTutor().subscribe({next:t=>{this.persons=t}}))}find(t){this.rolSelected==m.ROLE_TEACHER?(this.rolSelectedString="Profesores",this.personSvr.getTeachersFind(t).subscribe({next:n=>{this.persons=n}})):this.rolSelected==m.ROLE_STUDENT?(this.rolSelectedString="Estudiantes",this.personSvr.getStudentsFind(t).subscribe({next:n=>{this.persons=n}})):this.rolSelected==m.ROLE_LABOR_TUTOR&&(this.rolSelectedString="Tutores",this.personSvr.getLaborTutorFind(t).subscribe({next:n=>{this.persons=n}}))}setPerson(t){let n=t.target.value;"teacher"==n?this.rolSelected=m.ROLE_TEACHER:"student"==n?this.rolSelected=m.ROLE_STUDENT:"labor-tutor"==n&&(this.rolSelected=m.ROLE_LABOR_TUTOR),this.getPersons()}showMenu(t){var n;null===(n=t.target.parentElement)||void 0===n||n.classList.add("viewMenu")}noShowMenu(t){t.target.classList.contains("options")||document.querySelectorAll(".person").forEach(o=>{o.classList.remove("viewMenu")})}toggleDisable(t,n){n?this.personSvr.disable(t).subscribe({next:()=>{a().fire({icon:"success",title:"\xa1Hecho!",text:"El usuario con dni "+t+" se ha deshabilitado"}),this.getPersons()},error:i=>{a().fire({icon:"error",title:"Oops...",text:i.error.mensaje}),this.getPersons()}}):this.personSvr.enable(t).subscribe({next:()=>{a().fire({icon:"success",title:"\xa1Hecho!",text:"El usuario con dni "+t+" se ha habilitado"}),this.getPersons()},error:i=>{a().fire({icon:"error",title:"Oops...",text:i.error.mensaje}),this.getPersons()}})}remove(t,n){a().fire({title:"Borrar usuario",text:"Se borrar\xe1n todos los datos relacionados irreversiblemente",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Borrar"}).then(i=>{if(i.isConfirmed)switch(this.rolSelected){case m.ROLE_TEACHER:this.personSvr.removeTeacher(n).subscribe({next:()=>{a().fire({icon:"success",title:"\xa1Hecho!",text:"Borrado"}),this.getPersons()},error:o=>{a().fire({icon:"error",title:"Oops...",text:o.error.mensaje})}});break;case m.ROLE_LABOR_TUTOR:this.personSvr.removeLaborTutor(n).subscribe({next:()=>{a().fire({icon:"success",title:"\xa1Hecho!",text:"Borrado"}),this.getPersons()},error:o=>{a().fire({title:"Oops...",text:o.error.mensaje})}});break;case m.ROLE_STUDENT:this.personSvr.removeStudent(n).subscribe({next:()=>{a().fire({icon:"success",title:"\xa1Hecho!",text:"Borrado"}),this.getPersons()},error:o=>{a().fire({icon:"error",title:"Oops...",text:o.error.mensaje})}})}})}addPerson(t){this.rolToCreate=t,console.log(this.rolToCreate),document.querySelector("#newPersonContainer").classList.remove("noShow")}createUser(){if(this.formGroup.valid)if(""==this.imageSelected)a().fire({icon:"error",title:"Ooops...",text:"Seleccione una imagen de perfil"});else{let t=this.formGroup.value;t.image=this.imageSelected,t.rol=this.rolToCreate,this.personSvr.createPerson(t).subscribe({next:()=>{this.getPersons()},error:i=>{this.getPersons(),a().fire({icon:"error",title:"Ooops...",text:i.error.mensaje})}}),this.formGroup.reset(),this.imageSelected="",document.querySelector("#newPersonContainer").classList.add("noShow")}else a().fire({icon:"error",title:"Ooops...",text:"Rellene el formulario correctamente"})}edit(t,n){this.router.navigate([n+"/edit"],{relativeTo:this.route})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(y),e.Y36(M.K),e.Y36(Z.e),e.Y36(A.eN),e.Y36(l.qu),e.Y36(E.s),e.Y36(d.F0),e.Y36(d.gz))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-person-management"]],decls:68,vars:23,consts:[["id","searchDivMain"],["id","bienvenida"],["id","text"],["id","addPerson","src","assets/img/add-icon.png","alt","A\xf1adir","title","A\xf1adir",3,"click"],["id","addPerson","src","assets/img/add-icon.png","alt","A\xf1adir","title","A\xf1adir administrador",1,"adminIcon",3,"click"],[3,"change"],["value","teacher"],["value","student"],["value","labor-tutor"],["id","searchElement",3,"query"],["id","containerElement",3,"ngClass","click"],["id","noDataImg","src","assets/img/students.png",4,"ngIf"],["id","noDataPTittle",4,"ngIf"],["id","noDataP",4,"ngIf"],["class","person",4,"ngFor","ngForOf"],["id","newPersonContainer",1,"noShow"],["id","newperson"],["id","close","src","assets/img/close.png","title","Cerrar","alt","Cerrar",3,"click"],["id","fileUser"],["id","file",3,"fileName",4,"ngIf"],[3,"formGroup"],["name","name","formControlName","name","type","text"],["class","warning","src","assets/img/warning.png","title","Nombre es requerido",4,"ngIf"],["name","lastName","formControlName","lastName","type","text"],["class","warning","src","assets/img/warning.png","title","Apellidos requeridos",4,"ngIf"],["for","birthDate"],["name","birthDate","formControlName","birthDate","type","date",3,"max"],["class","warning","src","assets/img/warning.png","title","La fecha de nacimiento es requerido",4,"ngIf"],["for","dni"],["name","dni","formControlName","dni","type","dni"],["class","warning","src","assets/img/warning.png",3,"title",4,"ngIf"],["for","address"],["name","address","formControlName","address","type","text"],["class","warning","src","assets/img/warning.png","title","La direcci\xf3n es requerida",4,"ngIf"],["for","telefone"],["name","telefone","formControlName","telefone","type","tel"],["class","warning","src","assets/img/warning.png","title","El tel\xe9fono es requerido",4,"ngIf"],["for","email"],["name","email","formControlName","email","type","email"],["class","warning","src","assets/img/warning.png","title","El correo es requerido",4,"ngIf"],["for","password"],["name","password","formControlName","password","type","password"],["class","warning","src","assets/img/warning.png","title","La contrase\xf1a es requerida",4,"ngIf"],["id","createUser"],[3,"click"],["id","noDataImg","src","assets/img/students.png"],["id","noDataPTittle"],["id","noDataP"],[1,"person"],[3,"src"],["class","options","src","assets/img/points.png","alt","Opciones","title","Opciones",3,"click",4,"ngIf"],[1,"more-option"],[3,"click",4,"ngIf"],[1,"danger",3,"click"],["src","assets/img/points.png","alt","Opciones","title","Opciones",1,"options",3,"click"],["id","file",3,"fileName"],["src","assets/img/warning.png","title","Nombre es requerido",1,"warning"],["src","assets/img/warning.png","title","Apellidos requeridos",1,"warning"],["src","assets/img/warning.png","title","La fecha de nacimiento es requerido",1,"warning"],["src","assets/img/warning.png",1,"warning",3,"title"],["src","assets/img/warning.png","title","La direcci\xf3n es requerida",1,"warning"],["src","assets/img/warning.png","title","El tel\xe9fono es requerido",1,"warning"],["src","assets/img/warning.png","title","El correo es requerido",1,"warning"],["src","assets/img/warning.png","title","La contrase\xf1a es requerida",1,"warning"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"p"),e._uU(4,"Administraci\xf3n de personas"),e.qZA(),e.TgZ(5,"p"),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"img",3),e.NdJ("click",function(){return n.addPerson(n.rolSelected)}),e.qZA(),e.TgZ(8,"img",4),e.NdJ("click",function(){return n.addPerson(n.rolAdmin)}),e.qZA(),e.TgZ(9,"select",5),e.NdJ("change",function(o){return n.setPerson(o)}),e.TgZ(10,"option",6),e._uU(11,"Profesores"),e.qZA(),e.TgZ(12,"option",7),e._uU(13,"Estudiantes"),e.qZA(),e.TgZ(14,"option",8),e._uU(15,"Tutores"),e.qZA(),e.qZA(),e.TgZ(16,"search",9),e.NdJ("query",function(o){return n.find(o)}),e.qZA(),e.qZA(),e.TgZ(17,"div",10),e.NdJ("click",function(o){return n.noShowMenu(o)}),e.YNc(18,q,1,0,"img",11),e.YNc(19,I,2,0,"p",12),e.YNc(20,k,2,0,"p",13),e.YNc(21,D,16,6,"div",14),e.qZA(),e.qZA(),e.TgZ(22,"div",15),e.TgZ(23,"div",16),e.TgZ(24,"img",17),e.NdJ("click",function(){return n.closeModal()}),e.qZA(),e.TgZ(25,"p"),e._uU(26),e.qZA(),e.TgZ(27,"div",18),e.TgZ(28,"p"),e._uU(29,"Foto de perfil"),e.qZA(),e.YNc(30,R,1,0,"app-file-upload",19),e.qZA(),e.TgZ(31,"form",20),e.TgZ(32,"label"),e._uU(33,"Nombre"),e.qZA(),e._UZ(34,"input",21),e.YNc(35,H,1,0,"img",22),e.TgZ(36,"label"),e._uU(37,"Apellidos"),e.qZA(),e._UZ(38,"input",23),e.YNc(39,J,1,0,"img",24),e.TgZ(40,"label",25),e._uU(41,"Fecha de nacimiento"),e.qZA(),e._UZ(42,"input",26),e.ALo(43,"date"),e.YNc(44,G,1,0,"img",27),e.TgZ(45,"label",28),e._uU(46,"Dni"),e.qZA(),e._UZ(47,"input",29),e.YNc(48,Y,1,1,"img",30),e.TgZ(49,"label",31),e._uU(50,"Direcci\xf3n"),e.qZA(),e._UZ(51,"input",32),e.YNc(52,j,1,0,"img",33),e.TgZ(53,"label",34),e._uU(54,"Tel\xe9fono"),e.qZA(),e._UZ(55,"input",35),e.YNc(56,B,1,0,"img",36),e.TgZ(57,"label",37),e._uU(58,"Correo"),e.qZA(),e._UZ(59,"input",38),e.YNc(60,Q,1,0,"img",39),e.TgZ(61,"label",40),e._uU(62,"Contrase\xf1a"),e.qZA(),e._UZ(63,"input",41),e.YNc(64,z,1,0,"img",42),e.qZA(),e.TgZ(65,"div",43),e.TgZ(66,"button",44),e.NdJ("click",function(){return n.createUser()}),e._uU(67,"Crear usuario"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){let i,o,c,p,g,_,C,P;e.xp6(6),e.hij(" ",n.rolSelectedString," de la aplicaci\xf3n "),e.xp6(11),e.Q6J("ngClass",e.VKq(21,V,0==n.persons.length)),e.xp6(1),e.Q6J("ngIf",0==n.persons.length),e.xp6(1),e.Q6J("ngIf",0==n.persons.length),e.xp6(1),e.Q6J("ngIf",0==n.persons.length),e.xp6(1),e.Q6J("ngForOf",n.persons),e.xp6(5),e.hij("Creaci\xf3n de ",n.rolToCreate==n.rolAdmin?"administradores":n.rolSelectedString,""),e.xp6(4),e.Q6J("ngIf",n.showFileInput),e.xp6(1),e.Q6J("formGroup",n.formGroup),e.xp6(4),e.Q6J("ngIf",n.formGroup.get("name").touched&&(null==(i=n.formGroup.get("name"))?null:i.errors)),e.xp6(4),e.Q6J("ngIf",n.formGroup.get("lastName").touched&&(null==(o=n.formGroup.get("lastName"))?null:o.errors)),e.xp6(3),e.s9C("max",e.xi3(43,18,n.date,"yyyy-MM-dd")),e.xp6(2),e.Q6J("ngIf",n.formGroup.get("birthDate").touched&&(null==(c=n.formGroup.get("birthDate"))?null:c.errors)),e.xp6(4),e.Q6J("ngIf",n.formGroup.get("dni").touched&&(null==(p=n.formGroup.get("dni"))?null:p.errors)),e.xp6(4),e.Q6J("ngIf",n.formGroup.get("address").touched&&(null==(g=n.formGroup.get("address"))?null:g.errors)),e.xp6(4),e.Q6J("ngIf",n.formGroup.get("telefone").touched&&(null==(_=n.formGroup.get("telefone"))?null:_.errors)),e.xp6(4),e.Q6J("ngIf",n.formGroup.get("email").touched&&(null==(C=n.formGroup.get("email"))?null:C.errors)),e.xp6(4),e.Q6J("ngIf",n.formGroup.get("password").touched&&(null==(P=n.formGroup.get("password"))?null:P.errors))}},directives:[l.YN,l.Kr,U.g,f.mk,f.O5,f.sg,N.Y,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u],pipes:[f.uU],styles:["#searchDivMain[_ngcontent-%COMP%]{height:100%;overflow:auto}#bienvenida[_ngcontent-%COMP%]{height:160px;position:relative;display:flex}#bienvenida[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:50%;display:flex;flex-direction:column;justify-content:center}#bienvenida[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){align-items:flex-end}#text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(1){font-weight:600;margin-bottom:5px;font-size:20px}#text[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:nth-child(2){opacity:.7}#text[_ngcontent-%COMP%]{padding-left:5%}#containerTable[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%}table[_ngcontent-%COMP%]{width:80%}#containerElement[_ngcontent-%COMP%]{width:100%;height:60%;display:flex;justify-content:center;gap:42px;flex-wrap:wrap}.person[_ngcontent-%COMP%]{overflow:hidden;position:relative;justify-content:center;display:flex;flex-direction:column;align-content:center;align-items:center;max-width:168px;background-color:#efefef;height:229px;width:90%;border-radius:5px;box-shadow:0 5px 5px #bebebe}.person[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){border-radius:50%;width:110px;height:110px;overflow:hidden;display:flex;justify-content:center;align-items:center;margin-bottom:10px}.person[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(2){font-size:20px}.person[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(3){opacity:.7;font-size:12px}.person[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(4){position:relative;top:10px;font-size:13px}.person[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1)   img[_ngcontent-%COMP%]{height:100%}select[_ngcontent-%COMP%]{position:absolute;top:104px;right:48px;border:none;background-color:#ececec;width:128px;height:30px}#addPerson[_ngcontent-%COMP%]{position:absolute;top:109px;right:193px;width:20px}.options[_ngcontent-%COMP%]{width:14px;position:absolute;top:11px;right:7px}.more-option[_ngcontent-%COMP%]{border-radius:5px;overflow:hidden;position:absolute;top:5px;right:0;width:125px;box-shadow:0 5px 5px #46464621;height:max-content;display:none}.viewMenu[_ngcontent-%COMP%]   .more-option[_ngcontent-%COMP%]{display:initial!important}.more-option[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-top:5px;font-size:initial!important;opacity:initial!important;width:100%;height:30px;padding-left:15px;transition:.2s;background-color:#fff}.more-option[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{background-color:#e6e6e6}.danger[_ngcontent-%COMP%]:hover{background-color:#ff6060!important;color:#fff}#searchElement[_ngcontent-%COMP%]{position:absolute;right:20px;top:53px}#newPersonContainer[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;bottom:0;left:0;right:0;background-color:#00000072;display:flex;justify-content:center;align-items:center}#newperson[_ngcontent-%COMP%]{width:90%;max-width:400px;height:400px;background-color:#fff;overflow:auto;position:relative;top:-20px}.noShow[_ngcontent-%COMP%]{display:none!important}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:80%}form[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{border:none;height:30px;background-color:#e9e9e9;margin-bottom:5px;margin-top:5px;padding-right:10px;padding-left:10px}#newperson[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:20px;margin-bottom:23px;margin-top:27px;margin-left:32px}#fileUser[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;width:100%!important;height:200px!important;margin-bottom:10px}#createUser[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center}#createUser[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{border:none;height:30px;padding-left:10px;padding-right:10px;width:150px;margin-bottom:10px}#fileUser[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{margin-bottom:14px}.warning[_ngcontent-%COMP%]{width:20px!important;position:relative;bottom:29px;right:-173px}.adminIcon[_ngcontent-%COMP%]{right:220px!important}#close[_ngcontent-%COMP%]{width:11px;position:absolute;top:21px;right:16px}.noData[_ngcontent-%COMP%]{flex-direction:column!important;align-items:center!important;flex-wrap:nowrap!important;gap:12px!important}#noDataImg[_ngcontent-%COMP%]{width:90%;max-width:258px}#noDataP[_ngcontent-%COMP%]{opacity:.7;max-width:253px;text-align:center}#noDataPTittle[_ngcontent-%COMP%]{font-size:20px}"]}),r})()},{path:"management/:dni/view",component:(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-view-person"]],decls:2,vars:0,template:function(t,n){1&t&&(e.TgZ(0,"p"),e._uU(1,"view-person works!"),e.qZA())},styles:[""]}),r})()},{path:"management/:dni/edit",component:(()=>{class r{constructor(t,n,i){this.personServiceService=t,this.rutaActiva=n,this.formBuilder=i,this.currentPerson={},this.date=new Date}ngOnInit(){this.personServiceService.getPersonByDni(this.rutaActiva.snapshot.params.dni).subscribe({next:n=>{this.currentPerson=n,this.buildForm()},error:n=>{a().fire({icon:"error",title:"Oops...",text:n.error.mensaje}),this.back()}})}reloadPerson(){this.personServiceService.getPersonByDni(this.rutaActiva.snapshot.params.dni).subscribe({next:t=>{this.currentPerson=t},error:t=>{a().fire({icon:"error",title:"Oops...",text:t.error.mensaje}),this.back()}})}setNewImage(t){this.personServiceService.getPersonByDni(this.currentPerson.dni).subscribe({next:n=>{var i,o,c,p;let g=n;g.password=void 0,g.image=h.N.serverFileAddress+"/files/"+t,"ROLE_TEACHER"==(null===(i=this.currentPerson.rol)||void 0===i?void 0:i.toString())?this.personServiceService.editTeacher(g).subscribe({next:()=>{this.reloadPerson(),a().fire({icon:"success",title:"\xa1Hecho!"})},error:_=>{a().fire({icon:"error",title:"Oops...",text:_.error.mensaje})}}):"ROLE_STUDENT"==(null===(o=this.currentPerson.rol)||void 0===o?void 0:o.toString())?this.personServiceService.editStudent(g).subscribe({next:()=>{this.reloadPerson(),a().fire({icon:"success",title:"\xa1Hecho!"})},error:_=>{a().fire({icon:"error",title:"Oops...",text:_.error.mensaje})}}):"ROLE_LABOR_TUTOR"==(null===(c=this.currentPerson.rol)||void 0===c?void 0:c.toString())?this.personServiceService.editTutor(g).subscribe({next:()=>{this.reloadPerson(),a().fire({icon:"success",title:"\xa1Hecho!"})},error:_=>{a().fire({icon:"error",title:"Oops...",text:_.error.mensaje})}}):"ROLE_ADMIN"==(null===(p=this.currentPerson.rol)||void 0===p?void 0:p.toString())&&this.personServiceService.editAdmin(g).subscribe({next:()=>{this.reloadPerson(),a().fire({icon:"success",title:"\xa1Hecho!"})},error:_=>{a().fire({icon:"error",title:"Oops...",text:_.error.mensaje})}})},error:n=>{a().fire({icon:"error",title:"Oops...",text:n.error.mensaje}),this.back()}})}buildForm(){var t;let n=null===(t=this.currentPerson.birthDate)||void 0===t?void 0:t.toString().split("T")[0];this.formGroup=this.formBuilder.group({name:[this.currentPerson.name,[l.kI.required]],lastName:[this.currentPerson.lastName,[l.kI.required]],birthDate:[n,[l.kI.required]],address:[this.currentPerson.address,[l.kI.required]],telefone:[this.currentPerson.telefone,[l.kI.required,l.kI.pattern("^[0-9]{9}$")]],email:[this.currentPerson.email,[l.kI.required,l.kI.email]]})}back(){history.back()}save(){this.formGroup.valid?this.editPerson():a().fire({icon:"error",title:"Oops...",text:"Rellene todos los campos correctamente"})}changePassword(){a().fire({title:"Indique nueva contrase\xf1a",input:"password",inputAttributes:{autocapitalize:"off"},preConfirm:t=>{t.length<8&&a().showValidationMessage("La contrase\xf1a debe ser igual o superior a 8 car\xe1cteres")},showCancelButton:!0,confirmButtonText:"Cambiar",showLoaderOnConfirm:!0,allowOutsideClick:()=>!a().isLoading()}).then(t=>{var n,i,o,c;let p=this.currentPerson;p.password=t.value,"ROLE_TEACHER"==(null===(n=this.currentPerson.rol)||void 0===n?void 0:n.toString())?this.personServiceService.editTeacher(p).subscribe({next:()=>{this.reloadPerson(),a().fire({icon:"success",title:"\xa1Hecho!"})},error:g=>{a().fire({icon:"error",title:"Oops...",text:g.error.mensaje})}}):"ROLE_STUDENT"==(null===(i=this.currentPerson.rol)||void 0===i?void 0:i.toString())?this.personServiceService.editStudent(p).subscribe({next:()=>{this.reloadPerson(),a().fire({icon:"success",title:"\xa1Hecho!"})},error:g=>{a().fire({icon:"error",title:"Oops...",text:g.error.mensaje})}}):"ROLE_LABOR_TUTOR"==(null===(o=this.currentPerson.rol)||void 0===o?void 0:o.toString())?this.personServiceService.editTutor(p).subscribe({next:()=>{this.reloadPerson(),a().fire({icon:"success",title:"\xa1Hecho!"})},error:g=>{a().fire({icon:"error",title:"Oops...",text:g.error.mensaje})}}):"ROLE_ADMIN"==(null===(c=this.currentPerson.rol)||void 0===c?void 0:c.toString())&&this.personServiceService.editAdmin(p).subscribe({next:()=>{this.reloadPerson(),a().fire({icon:"success",title:"\xa1Hecho!"})},error:g=>{a().fire({icon:"error",title:"Oops...",text:g.error.mensaje})}})})}editPerson(){var t,n,i,o;let c=this.formGroup.value;c.dni=this.currentPerson.dni,c.password=void 0,"ROLE_TEACHER"==(null===(t=this.currentPerson.rol)||void 0===t?void 0:t.toString())?this.personServiceService.editTeacher(c).subscribe({next:()=>{this.reloadPerson(),a().fire({icon:"success",title:"\xa1Hecho!"})},error:p=>{a().fire({icon:"error",title:"Oops...",text:p.error.mensaje})}}):"ROLE_STUDENT"==(null===(n=this.currentPerson.rol)||void 0===n?void 0:n.toString())?this.personServiceService.editStudent(c).subscribe({next:()=>{this.reloadPerson(),a().fire({icon:"success",title:"\xa1Hecho!"})},error:p=>{a().fire({icon:"error",title:"Oops...",text:p.error.mensaje})}}):"ROLE_LABOR_TUTOR"==(null===(i=this.currentPerson.rol)||void 0===i?void 0:i.toString())?this.personServiceService.editTutor(c).subscribe({next:()=>{this.reloadPerson(),a().fire({icon:"success",title:"\xa1Hecho!"})},error:p=>{this.reloadPerson(),a().fire({icon:"error",title:"Oops...",text:p.error.mensaje})}}):"ROLE_ADMIN"==(null===(o=this.currentPerson.rol)||void 0===o?void 0:o.toString())&&this.personServiceService.editAdmin(c).subscribe({next:()=>{this.reloadPerson(),a().fire({icon:"success",title:"\xa1Hecho!"})},error:p=>{this.reloadPerson(),a().fire({icon:"error",title:"Oops...",text:p.error.mensaje})}})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(y),e.Y36(d.gz),e.Y36(l.qu))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-edit-person"]],decls:17,vars:4,consts:[["id","mainDiv"],["id","title"],[1,"degreesText",3,"click"],["id","content"],["id","image"],["id","imageUpload",3,"fileName"],[3,"src"],[3,"formGroup",4,"ngIf"],["id","save",3,"click"],["id","save2",3,"click"],[3,"formGroup"],["id","titleData"],["id","formContainer"],["name","name","formControlName","name","type","text"],["class","warning","src","assets/img/warning.png","title","Nombre es requerido",4,"ngIf"],["name","lastName","formControlName","lastName","type","text"],["class","warning","src","assets/img/warning.png","title","Apellidos requeridos",4,"ngIf"],["for","birthDate"],["name","birthDate","formControlName","birthDate","type","date",3,"max"],["class","warning","src","assets/img/warning.png","title","La fecha de nacimiento es requerido",4,"ngIf"],["for","address"],["name","address","formControlName","address","type","text"],["class","warning","src","assets/img/warning.png","title","La direcci\xf3n es requerida",4,"ngIf"],["for","telefone"],["name","telefone","formControlName","telefone","type","tel"],["class","warning","src","assets/img/warning.png","title","El tel\xe9fono es requerido",4,"ngIf"],["for","email"],["name","email","formControlName","email","type","email"],["class","warning","src","assets/img/warning.png","title","El correo es requerido",4,"ngIf"],["src","assets/img/warning.png","title","Nombre es requerido",1,"warning"],["src","assets/img/warning.png","title","Apellidos requeridos",1,"warning"],["src","assets/img/warning.png","title","La fecha de nacimiento es requerido",1,"warning"],["src","assets/img/warning.png","title","La direcci\xf3n es requerida",1,"warning"],["src","assets/img/warning.png","title","El tel\xe9fono es requerido",1,"warning"],["src","assets/img/warning.png","title","El correo es requerido",1,"warning"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"p"),e.TgZ(3,"span",2),e.NdJ("click",function(){return n.back()}),e._uU(4,"Personas > "),e.qZA(),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"div",3),e.TgZ(7,"div"),e.TgZ(8,"div",4),e.TgZ(9,"app-file-upload",5),e.NdJ("fileName",function(o){return n.setNewImage(o)}),e.qZA(),e._UZ(10,"img",6),e.qZA(),e.qZA(),e.TgZ(11,"div"),e.YNc(12,oe,31,11,"form",7),e.TgZ(13,"button",8),e.NdJ("click",function(){return n.save()}),e._uU(14,"Guardar"),e.qZA(),e.TgZ(15,"button",9),e.NdJ("click",function(){return n.changePassword()}),e._uU(16,"Cambiar Contrase\xf1a"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.AsE("",n.currentPerson.name," ",n.currentPerson.lastName,""),e.xp6(5),e.s9C("src",n.currentPerson.image,e.LSH),e.xp6(2),e.Q6J("ngIf",n.formGroup))},directives:[N.Y,f.O5,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u],pipes:[f.uU],styles:["#mainDiv[_ngcontent-%COMP%]{width:100%;height:100%;overflow:auto}#title[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{padding-left:4%}#title[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:nth-child(1){font-size:20px;font-weight:600}#title[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:nth-child(2){opacity:.7}#title[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:nth-child(1){margin-top:40px}.degreesText[_ngcontent-%COMP%]{opacity:.7}#content[_ngcontent-%COMP%]{display:flex;width:100%;margin-top:7%!important;height:70%;margin-top:40px}#content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:50%;height:100%;align-items:center;display:flex;align-content:center;justify-content:center}#image[_ngcontent-%COMP%]{border-radius:50%;overflow:hidden;height:250px;width:250px;margin-top:8%;position:relative}#image[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:100%}.warning[_ngcontent-%COMP%]{width:20px;position:relative;top:-24px;left:83%;margin-bottom:-20px}form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:50%}#content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){flex-direction:column}#content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2) > form[_ngcontent-%COMP%]{width:90%;display:flex;flex-direction:column}#titleData[_ngcontent-%COMP%]{font-size:20px;margin-bottom:20px}input[_ngcontent-%COMP%]{border:none;height:30px;width:80%;margin-top:5px;background-color:#e7e7e7;padding-left:5px;padding-right:5px}label[_ngcontent-%COMP%]{margin-bottom:5px;margin-top:5px}#formContainer[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;flex-wrap:wrap}#formContainer[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:50%;display:flex;flex-direction:column;min-width:220px}#content[_ngcontent-%COMP%]{margin-top:20px!important}#save[_ngcontent-%COMP%]{height:30px;margin-top:20px;width:100px;border:none}#save2[_ngcontent-%COMP%]{height:30px;margin-top:20px;width:150px;border:none}@media (max-width: 1034px){#content[_ngcontent-%COMP%]{flex-direction:column;width:100%;display:flex;align-items:center}#content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1){width:100%}#content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){width:100%;margin-top:40px}#image[_ngcontent-%COMP%]{margin-top:2%}}@media (max-width: 560px){form[_ngcontent-%COMP%]{margin-top:100px}#formContainer[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%}#save[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:31px}}#imageUpload[_ngcontent-%COMP%]{width:100%;height:100%;opacity:0;position:absolute;top:0}"]}),r})()}];let ae=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[d.Bz.forChild(se)],d.Bz]}),r})();!function(){function r(s,t,n){this.el=s,this.vcr=t,this.renderer=n,this.dtOptions={}}r.prototype.ngOnInit=function(){var s=this;this.dtTrigger?this.dtTrigger.subscribe(function(t){s.displayTable(t)}):this.displayTable(null)},r.prototype.ngOnDestroy=function(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.dt&&this.dt.destroy(!0)},r.prototype.displayTable=function(s){var t=this;s&&(this.dtOptions=s),this.dtInstance=new Promise(function(n,i){Promise.resolve(t.dtOptions).then(function(o){0===Object.keys(o).length&&0===$("tbody tr",t.el.nativeElement).length?i("Both the table and dtOptions cannot be empty"):setTimeout(function(){var p={rowCallback:function(g,_,C){if(o.columns){var P=o.columns;t.applyNgPipeTransform(g,P),t.applyNgRefTemplate(g,P,_)}o.rowCallback&&o.rowCallback(g,_,C)}};p=Object.assign({},o,p),t.dt=$(t.el.nativeElement).DataTable(p),n(t.dt)})})})},r.prototype.applyNgPipeTransform=function(s,t){t.filter(function(i){return i.ngPipeInstance&&!i.ngTemplateRef}).forEach(function(i){var o=i.ngPipeInstance,c=i.ngPipeArgs||[],p=t.findIndex(function(P){return P.data===i.data}),g=s.childNodes.item(p),_=$(g).text(),C=o.transform.apply(o,function(r,s,t){if(t||2===arguments.length)for(var o,n=0,i=s.length;n<i;n++)(o||!(n in s))&&(o||(o=Array.prototype.slice.call(s,0,n)),o[n]=s[n]);return r.concat(o||Array.prototype.slice.call(s))}([_],c,!1));$(g).text(C)})},r.prototype.applyNgRefTemplate=function(s,t,n){var i=this;t.filter(function(c){return c.ngTemplateRef&&!c.ngPipeInstance}).forEach(function(c){var p=c.ngTemplateRef,g=p.ref,_=p.context,C=t.findIndex(function(me){return me.data===c.data}),P=s.childNodes.item(C);$(P).html("");var ge=Object.assign({},_,null==_?void 0:_.userData,{adtData:n}),ue=i.vcr.createEmbeddedView(g,ge);i.renderer.appendChild(P,ue.rootNodes[0])})},r.\u0275fac=function(t){return new(t||r)(e.Y36(e.SBq),e.Y36(e.s_b),e.Y36(e.Qsj))},r.\u0275dir=e.lG2({type:r,selectors:[["","datatable",""]],inputs:{dtOptions:"dtOptions",dtTrigger:"dtTrigger"}})}();var ce=function(){function r(){}return r.forRoot=function(){return{ngModule:r}},r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[f.ez]]}),r}(),pe=u(4466);let de=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[f.ez,ce,ae,pe.m,l.UX,l.u5]]}),r})()},8083:(S,b,u)=>{u.d(b,{g:()=>d});var f=u(1223);let d=(()=>{class m{constructor(){this.query=new f.vpe}ngOnInit(){}send(a){this.query.emit(a.target.value)}}return m.\u0275fac=function(a){return new(a||m)},m.\u0275cmp=f.Xpm({type:m,selectors:[["search"]],outputs:{query:"query"},decls:3,vars:0,consts:[["id","input-div"],["autocomplete","off","name","search","type","text","placeholder","Buscar",3,"keyup"],["src","assets/img/find.png","id","find-img"]],template:function(a,l){1&a&&(f.TgZ(0,"div",0),f.TgZ(1,"input",1),f.NdJ("keyup",function(e){return l.send(e)}),f.qZA(),f._UZ(2,"img",2),f.qZA())},styles:["input[_ngcontent-%COMP%]{border:none;background-color:#f0f0f0;height:39px;width:100%;max-width:230px;border-radius:7px;padding-left:50px}#input-div[_ngcontent-%COMP%]{position:relative}#find-img[_ngcontent-%COMP%]{width:19px;position:absolute;top:10px;left:15px}input[_ngcontent-%COMP%]:focus{outline:none!important}"]}),m})()},9976:(S,b,u)=>{u.d(b,{Y:()=>h});var f=u(520),d=u(1223),m=u(2340);let O=(()=>{class e{constructor(v){this.http=v}upload(v){const x=new FormData;x.append("file",v);const w=new f.aW("POST",`${m.N.serverFileAddress}/upload`,x,{reportProgress:!0,responseType:"json"});return this.http.request(w)}}return e.\u0275fac=function(v){return new(v||e)(d.LFG(f.eN))},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var a=u(9808);function l(e,T){if(1&e&&(d.TgZ(0,"p",4),d._uU(1),d.qZA()),2&e){const v=d.oxw();d.xp6(1),d.hij("",v.progress," %")}}let h=(()=>{class e{constructor(v){this.fileService=v,this.textToShow="",this.fileName=new d.vpe,this.progress=0,this.message=""}ngOnInit(){}selectFile(v){this.selectedFiles=v.target.files,this.upload()}upload(){if(this.progress=0,this.selectedFiles){const v=this.selectedFiles.item(0);v&&(this.currentFile=v,this.fileService.upload(this.currentFile).subscribe({next:x=>{x.type===f.dt.UploadProgress?this.progress=Math.round(100*x.loaded/x.total):x instanceof f.Zn&&(console.log(x),this.fileName.emit(x.body.id))},error:x=>{console.log(x),this.progress=0,this.message=x.error&&x.error.message?x.error.message:"Error al subir",this.currentFile=void 0}})),this.selectedFiles=void 0}}}return e.\u0275fac=function(v){return new(v||e)(d.Y36(O))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-file-upload"]],inputs:{textToShow:"textToShow"},outputs:{fileName:"fileName"},decls:5,vars:2,consts:[[1,"custom-input-file","col-md-6","col-sm-6","col-xs-6"],["type","file","accept",".bmp,.jpg,.png",1,"input-file",3,"change"],["src","assets/img/upload.png"],["id","progress",4,"ngIf"],["id","progress"]],template:function(v,x){1&v&&(d.TgZ(0,"div",0),d.TgZ(1,"input",1),d.NdJ("change",function(M){return x.selectFile(M)}),d.qZA(),d._uU(2),d._UZ(3,"img",2),d.YNc(4,l,2,1,"p",3),d.qZA()),2&v&&(d.xp6(2),d.hij(" ",x.textToShow," "),d.xp6(2),d.Q6J("ngIf",0!=x.progress))},directives:[a.O5],styles:[".custom-input-file[_ngcontent-%COMP%]{background-color:#f6f6f6;cursor:pointer;margin:0 auto;border:1px dashed grey;overflow:hidden;position:relative;text-align:center;width:100%;height:100%}.custom-input-file[_ngcontent-%COMP%]   .input-file[_ngcontent-%COMP%]{border:10000px solid transparent;cursor:pointer;font-size:10000px;margin:0;opacity:0;outline:0 none;padding:0;position:absolute;right:-1000px;top:-1000px}.input-file[_ngcontent-%COMP%]{z-index:10}img[_ngcontent-%COMP%]{width:70px;margin-top:20px;animation-duration:2s;animation-name:animate;margin-bottom:20px;animation-iteration-count:infinite}div[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:5px;align-items:center;justify-content:center;padding:20px}@keyframes animate{0%{transform:translateY(0)}50%{transform:translateY(-10px)}to{transform:translateY(0)}}"]}),e})()}}]);
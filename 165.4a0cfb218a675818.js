"use strict";(self.webpackChunkPractises_Management=self.webpackChunkPractises_Management||[]).push([[165],{8165:(I,u,o)=>{o.r(u),o.d(u,{BusinessModule:()=>N});var d=o(9808),p=o(8118),h=o(5226),g=o.n(h),l=o(2340),r=(o(1002),o(9898)),m=o(8545),t=o(1223),v=o(3958),x=o(5295),f=o(520);let M=(()=>{class e{constructor(n,i,a){this.userService=n,this.authService=i,this.http=a}getAllBusiness(){return this.http.get(l.N.serverAddress+"/business/",this.authService.getHeadersToken())}getBusinessByName(n){return this.http.get(l.N.serverAddress+"/location/business/?name="+n,this.authService.getHeadersToken())}getAllLocations(){return this.http.get(l.N.serverAddress+"/location/business/",this.authService.getHeadersToken())}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(v.K),t.LFG(x.e),t.LFG(f.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var C=o(8212),b=o(8083),O=o(2886);function Z(e,s){if(1&e&&(t.TgZ(0,"div",12),t._UZ(1,"img",13),t.TgZ(2,"p"),t._uU(3),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.qZA(),t._UZ(6,"img",14),t._UZ(7,"img",15),t._UZ(8,"img",16),t.qZA()),2&e){const n=s.$implicit;t.xp6(1),t.s9C("src",n.image,t.LSH),t.xp6(2),t.Oqu(n.name),t.xp6(2),t.Oqu(n.cif),t.xp6(1),t.hYB("routerLink","../ubication/",n.latitude,"/",n.longitude,"")}}function P(e,s){if(1&e&&(t.TgZ(0,"div",10),t.YNc(1,Z,9,5,"div",11),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",n.locations)}}function _(e,s){1&e&&(t.TgZ(0,"div",17),t._UZ(1,"img",18),t.TgZ(2,"p"),t._uU(3,"Ninguna empresa coincide con la b\xfasqueda"),t.qZA(),t.qZA())}function T(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"div",2),t.TgZ(1,"div",3),t.TgZ(2,"div",4),t.TgZ(3,"p"),t._uU(4,"Empresas"),t.qZA(),t.TgZ(5,"p"),t._uU(6," Vea las empresas registradas en la plataforma e obtenga informaci\xf3n sobre su localizaci\xf3n, trabajadores de contacto y m\xe1s "),t.qZA(),t.qZA(),t.TgZ(7,"div",5),t.TgZ(8,"search",6),t.NdJ("query",function(a){return t.CHM(n),t.oxw().buscar(a)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"div"),t.YNc(10,P,2,1,"div",7),t.YNc(11,_,4,0,"div",8),t.qZA(),t.TgZ(12,"app-map-button",9),t.NdJ("mapMode",function(){return t.CHM(n),t.oxw().showMap()}),t.qZA(),t.qZA()}if(2&e){const n=t.oxw();t.xp6(10),t.Q6J("ngIf",0!=n.locations.length),t.xp6(1),t.Q6J("ngIf",0==n.locations.length)}}function B(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"div",19),t.TgZ(1,"img",20),t.NdJ("click",function(){return t.CHM(n),t.oxw().showListOfSchool()}),t.qZA(),t.TgZ(2,"div",3),t.TgZ(3,"div",4),t.TgZ(4,"p"),t._uU(5,"Seleccionar en mapa"),t.qZA(),t.TgZ(6,"p"),t._uU(7," Seleccione su centro conociendo la ubicaci\xf3n en la que se encuentra el mismo, por defecto se mostrar\xe1 la ubicaci\xf3n actual del dispositivo "),t.qZA(),t.qZA(),t._UZ(8,"div",5),t.qZA(),t.TgZ(9,"div",21),t._UZ(10,"div",22),t.qZA(),t.qZA()}}const y=[{path:"search-business",component:(()=>{class e{constructor(n,i,a,c){this.businessSvr=n,this.dashboardSvr=i,this.router=a,this.route=c,this.mapbox=r,this.map=null,this.locations=[],this.mapMode=!1}ngOnInit(){this.dashboardSvr.setTitle("Empresas"),this.mapbox.accessToken=l.N.mapBoxToken,this.businessSvr.getAllLocations().subscribe({next:n=>{this.locations=n},error:n=>{g().fire({icon:"error",title:"Oops...",text:null==n.error.mensaje?"Servidor no disponible":n.error.mensaje})}})}buscar(n){this.businessSvr.getBusinessByName(n).subscribe({next:i=>{this.locations=i},error:i=>{g().fire({icon:"error",title:"Oops...",text:null==i.error.mensaje?"Servidor no disponible":i.error.mensaje})}})}showListOfSchool(){this.mapMode=!1}showMap(){this.mapMode=!0,this.businessSvr.getAllLocations().subscribe({next:n=>{this.locations=n,navigator.geolocation.getCurrentPosition(i=>{this.map=new r.Map({container:"mapCenters",style:"mapbox://styles/mapbox/light-v10",zoom:15,center:[i.coords.longitude,i.coords.latitude]}),this.map.addControl(new r.NavigationControl),this.map.addControl(new r.FullscreenControl),this.map.addControl(new m({accessToken:l.N.mapBoxToken})),document.querySelector(".mapboxgl-ctrl-geocoder--input").placeholder="Buscar",n.forEach(c=>{console.log(c);const j=new r.Popup({offset:25}).setHTML("<span>"+c.name+"</span><div class='enginepop'></div>");new r.Marker({draggable:!1,color:"#ff8000"}).setPopup(j).setLngLat([c.longitude,c.latitude]).addTo(this.map)})})},error:n=>{g().fire({icon:"error",title:"Oops...",text:null==n.error.mensaje?"Servidor no disponible":n.error.mensaje})}})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(M),t.Y36(C.s),t.Y36(p.F0),t.Y36(p.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-search-business"]],decls:2,vars:2,consts:[["id","searchDivMain",4,"ngIf"],["id","searchDivMain","class","mapView",4,"ngIf"],["id","searchDivMain"],["id","bienvenida"],["id","text"],["id","searchDiv"],[3,"query"],["id","schools",4,"ngIf"],["id","no-centers",4,"ngIf"],[3,"mapMode"],["id","schools"],["class","school",4,"ngFor","ngForOf"],[1,"school"],[3,"src"],["src","assets/img/location.png",3,"routerLink"],["src","assets/img/call.png",1,"leftIcon"],["src","assets/img/curso.png",1,"rightIcon"],["id","no-centers"],["src","assets/img/school.png"],["id","searchDivMain",1,"mapView"],["id","back","src","assets/img/back-map.png",3,"click"],["id","map"],["id","mapCenters"]],template:function(n,i){1&n&&(t.YNc(0,T,13,2,"div",0),t.YNc(1,B,11,0,"div",1)),2&n&&(t.Q6J("ngIf",!i.mapMode),t.xp6(1),t.Q6J("ngIf",i.mapMode))},directives:[d.O5,b.g,d.sg,p.rH,O.$],styles:["#searchDivMain[_ngcontent-%COMP%]{height:100%;overflow:auto}#bienvenida[_ngcontent-%COMP%]{height:160px;display:flex}#bienvenida[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:50%;display:flex;flex-direction:column;justify-content:center}#bienvenida[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){align-items:flex-end}#text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(1){font-weight:600;margin-bottom:5px;font-size:20px}#text[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:nth-child(2){opacity:.7}#text[_ngcontent-%COMP%]{padding-left:5%}#searchDiv[_ngcontent-%COMP%]{padding-right:5%}#no-centers[_ngcontent-%COMP%]{display:flex;height:350px;width:100%;flex-direction:column;align-content:center;justify-content:center;align-items:center}#no-centers[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:130px}#no-centers[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:17px;margin-top:20px}app-map-button[_ngcontent-%COMP%]{position:absolute;bottom:30px;right:50px}.school[_ngcontent-%COMP%]{background-color:#dfdfdf;box-shadow:0 2px 5px #a1a1a1}#schools[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;flex-wrap:wrap;justify-content:center}.school[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:nth-child(1){height:180px;position:relative;top:-20px}.school[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(2){font-size:18px;position:absolute;left:25px;top:175px}.school[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(3){opacity:.5;margin-left:25px;position:absolute;top:200px;left:0px}.school[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;position:relative;overflow:hidden;align-items:center;margin-left:3%;margin-right:3%;margin-bottom:40px;width:240px;height:290px;border-radius:10px}.school[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:nth-child(4){width:24px;position:absolute;bottom:15px}#map[_ngcontent-%COMP%]{display:flex;width:100%;height:70%;justify-content:center}#mapCenters[_ngcontent-%COMP%]{width:90%;height:100%}.marker[_ngcontent-%COMP%]{background-image:url(https://pmmciex.com/wp-content/uploads/2020/07/ubicacionnaranja.png);background-size:cover;width:50px;height:50px;border-radius:50%;cursor:pointer}#back[_ngcontent-%COMP%]{position:absolute;top:42px;width:25px;left:1.5%}@media (max-width: 600px){#bienvenida[_ngcontent-%COMP%]{flex-direction:column;justify-content:center;align-items:center;margin-top:40px;margin-bottom:40px}#text[_ngcontent-%COMP%]{width:90%!important;margin-bottom:30px;padding-left:unset!important}#searchDiv[_ngcontent-%COMP%]{width:100%!important;align-items:flex-start!important;padding-left:30px;padding-right:unset!important}.mapView[_ngcontent-%COMP%]{height:60%}#back[_ngcontent-%COMP%]{top:20px;left:5%}}.leftIcon[_ngcontent-%COMP%]{width:20px;position:absolute;bottom:19px;left:40px}.rightIcon[_ngcontent-%COMP%]{width:20px;position:absolute;bottom:19px;right:40px}"]}),e})()},{path:"ubication/:latitude/:longitude",component:o(699).p}];let A=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[p.Bz.forChild(y)],p.Bz]}),e})();var F=o(4466);let N=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.ez,A,F.m]]}),e})()}}]);
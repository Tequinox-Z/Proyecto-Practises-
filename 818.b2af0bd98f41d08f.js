"use strict";(self.webpackChunkPractises_Management=self.webpackChunkPractises_Management||[]).push([[818],{6818:(j,g,o)=>{o.r(g),o.d(g,{BusinessModule:()=>A});var l=o(9808),p=o(1451),u=o(5226),d=o.n(u),m=o(2340),r=(o(1002),o(9898)),h=o(8545),n=o(1223),x=o(164),f=o(8212),v=o(8083),M=o(2886);function C(e,s){if(1&e&&(n.TgZ(0,"div",12),n._UZ(1,"img",13),n.TgZ(2,"p"),n._uU(3),n.qZA(),n.TgZ(4,"p"),n._uU(5),n.qZA(),n._UZ(6,"img",14),n._UZ(7,"img",15),n._UZ(8,"img",16),n.qZA()),2&e){const t=s.$implicit;n.xp6(1),n.s9C("src",t.image,n.LSH),n.xp6(2),n.Oqu(t.name),n.xp6(2),n.Oqu(t.cif),n.xp6(1),n.hYB("routerLink","../ubication/",t.latitude,"/",t.longitude,"")}}function b(e,s){if(1&e&&(n.TgZ(0,"div",10),n.YNc(1,C,9,5,"div",11),n.qZA()),2&e){const t=n.oxw(2);n.xp6(1),n.Q6J("ngForOf",t.locations)}}function O(e,s){1&e&&(n.TgZ(0,"div",17),n._UZ(1,"img",18),n.TgZ(2,"p"),n._uU(3,"Ninguna empresa coincide con la b\xfasqueda"),n.qZA(),n.qZA())}function Z(e,s){if(1&e){const t=n.EpF();n.TgZ(0,"div",2),n.TgZ(1,"div",3),n.TgZ(2,"div",4),n.TgZ(3,"p"),n._uU(4,"Empresas"),n.qZA(),n.TgZ(5,"p"),n._uU(6," Vea las empresas registradas en la plataforma e obtenga informaci\xf3n sobre su localizaci\xf3n, trabajadores de contacto y m\xe1s "),n.qZA(),n.qZA(),n.TgZ(7,"div",5),n.TgZ(8,"search",6),n.NdJ("query",function(a){return n.CHM(t),n.oxw().buscar(a)}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(9,"div"),n.YNc(10,b,2,1,"div",7),n.YNc(11,O,4,0,"div",8),n.qZA(),n.TgZ(12,"app-map-button",9),n.NdJ("mapMode",function(){return n.CHM(t),n.oxw().showMap()}),n.qZA(),n.qZA()}if(2&e){const t=n.oxw();n.xp6(10),n.Q6J("ngIf",0!=t.locations.length),n.xp6(1),n.Q6J("ngIf",0==t.locations.length)}}function _(e,s){if(1&e){const t=n.EpF();n.TgZ(0,"div",19),n.TgZ(1,"img",20),n.NdJ("click",function(){return n.CHM(t),n.oxw().showListOfSchool()}),n.qZA(),n.TgZ(2,"div",3),n.TgZ(3,"div",4),n.TgZ(4,"p"),n._uU(5,"Ver en mapa"),n.qZA(),n.TgZ(6,"p"),n._uU(7," Vea las empresas disponibles conociendo la ubicaci\xf3n en la que se encuentra el mismo, por defecto se mostrar\xe1 la ubicaci\xf3n actual del dispositivo "),n.qZA(),n.qZA(),n._UZ(8,"div",5),n.qZA(),n.TgZ(9,"div",21),n._UZ(10,"div",22),n.qZA(),n.qZA()}}const w=[{path:"search-business",component:(()=>{class e{constructor(t,i,a,c){this.businessSvr=t,this.dashboardSvr=i,this.router=a,this.route=c,this.mapbox=r,this.map=null,this.locations=[],this.mapMode=!1}ngOnInit(){this.dashboardSvr.setTitle("Empresas"),this.mapbox.accessToken=m.N.mapBoxToken,this.businessSvr.getAllLocations().subscribe({next:t=>{this.locations=t},error:t=>{d().fire({icon:"error",title:"Oops...",text:null==t.error.mensaje?"Servidor no disponible":t.error.mensaje})}})}buscar(t){this.businessSvr.getBusinessByName(t).subscribe({next:i=>{this.locations=i},error:i=>{d().fire({icon:"error",title:"Oops...",text:null==i.error.mensaje?"Servidor no disponible":i.error.mensaje})}})}showListOfSchool(){this.mapMode=!1}showMap(){this.mapMode=!0,this.businessSvr.getAllLocations().subscribe({next:t=>{this.locations=t,navigator.geolocation.getCurrentPosition(i=>{this.map=new r.Map({container:"mapCenters",style:"mapbox://styles/mapbox/light-v10",zoom:15,center:[i.coords.longitude,i.coords.latitude]}),this.map.addControl(new r.NavigationControl),this.map.addControl(new r.FullscreenControl),this.map.addControl(new h({accessToken:m.N.mapBoxToken})),document.querySelector(".mapboxgl-ctrl-geocoder--input").placeholder="Buscar",t.forEach(c=>{console.log(c);const S=new r.Popup({offset:25}).setHTML("<span>"+c.name+"</span><div class='enginepop'></div>");new r.Marker({draggable:!1,color:"#ff8000"}).setPopup(S).setLngLat([c.longitude,c.latitude]).addTo(this.map)})})},error:t=>{d().fire({icon:"error",title:"Oops...",text:null==t.error.mensaje?"Servidor no disponible":t.error.mensaje})}})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(x.m),n.Y36(f.s),n.Y36(p.F0),n.Y36(p.gz))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-search-business"]],decls:2,vars:2,consts:[["id","searchDivMain",4,"ngIf"],["id","searchDivMain","class","mapView",4,"ngIf"],["id","searchDivMain"],["id","bienvenida"],["id","text"],["id","searchDiv"],[3,"query"],["id","schools",4,"ngIf"],["id","no-centers",4,"ngIf"],[3,"mapMode"],["id","schools"],["class","school",4,"ngFor","ngForOf"],[1,"school"],[3,"src"],["src","assets/img/location.png",3,"routerLink"],["src","assets/img/call.png",1,"leftIcon"],["src","assets/img/curso.png",1,"rightIcon"],["id","no-centers"],["src","assets/img/business.png"],["id","searchDivMain",1,"mapView"],["id","back","src","assets/img/back-map.png",3,"click"],["id","map"],["id","mapCenters"]],template:function(t,i){1&t&&(n.YNc(0,Z,13,2,"div",0),n.YNc(1,_,11,0,"div",1)),2&t&&(n.Q6J("ngIf",!i.mapMode),n.xp6(1),n.Q6J("ngIf",i.mapMode))},directives:[l.O5,v.g,l.sg,p.rH,M.$],styles:["#searchDivMain[_ngcontent-%COMP%]{height:100%;overflow:auto}#bienvenida[_ngcontent-%COMP%]{height:160px;display:flex}#bienvenida[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:50%;display:flex;flex-direction:column;justify-content:center}#bienvenida[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){align-items:flex-end}#text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(1){font-weight:600;margin-bottom:5px;font-size:20px}#text[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:nth-child(2){opacity:.7}#text[_ngcontent-%COMP%]{padding-left:5%}#searchDiv[_ngcontent-%COMP%]{padding-right:5%}#no-centers[_ngcontent-%COMP%]{display:flex;height:350px;width:100%;flex-direction:column;align-content:center;justify-content:center;align-items:center}#no-centers[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:261px}#no-centers[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:17px;margin-top:20px}app-map-button[_ngcontent-%COMP%]{position:absolute;bottom:64px;right:50px}.school[_ngcontent-%COMP%]{background-color:#dfdfdf;box-shadow:0 2px 5px #a1a1a1}#schools[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;flex-wrap:wrap;justify-content:center}.school[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:nth-child(1){height:180px;position:relative;top:-20px}.school[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(2){font-size:18px;position:absolute;left:25px;top:175px}.school[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(3){opacity:.5;margin-left:25px;position:absolute;top:200px;left:0px}.school[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;position:relative;overflow:hidden;align-items:center;margin-left:3%;margin-right:3%;margin-bottom:40px;width:240px;height:290px;border-radius:10px}.school[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:nth-child(4){width:24px;position:absolute;bottom:15px}#map[_ngcontent-%COMP%]{display:flex;width:100%;height:70%;justify-content:center}#mapCenters[_ngcontent-%COMP%]{width:90%;height:100%}.marker[_ngcontent-%COMP%]{background-image:url(https://pmmciex.com/wp-content/uploads/2020/07/ubicacionnaranja.png);background-size:cover;width:50px;height:50px;border-radius:50%;cursor:pointer}#back[_ngcontent-%COMP%]{position:absolute;top:42px;width:25px;margin-left:10px}@media (max-width: 600px){#bienvenida[_ngcontent-%COMP%]{flex-direction:column;justify-content:center;align-items:center;margin-top:40px;margin-bottom:40px}#text[_ngcontent-%COMP%]{width:90%!important;margin-bottom:30px;padding-left:unset!important}#searchDiv[_ngcontent-%COMP%]{width:100%!important;align-items:flex-start!important;padding-left:30px;padding-right:unset!important}.mapView[_ngcontent-%COMP%]{height:60%}#back[_ngcontent-%COMP%]{top:20px;left:5%}}.leftIcon[_ngcontent-%COMP%]{width:20px;position:absolute;bottom:19px;left:40px}.rightIcon[_ngcontent-%COMP%]{width:20px;position:absolute;bottom:19px;right:40px}"]}),e})()},{path:"ubication/:latitude/:longitude",component:o(699).p}];let B=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[p.Bz.forChild(w)],p.Bz]}),e})();var y=o(4466);let A=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[l.ez,B,y.m]]}),e})()}}]);
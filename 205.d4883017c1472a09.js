"use strict";(self.webpackChunkPractises_Management=self.webpackChunkPractises_Management||[]).push([[205],{2205:(M,_,c)=>{c.r(_),c.d(_,{PersonModule:()=>L});var d=c(9808),x=c(8118),a=(()=>{return(n=a||(a={}))[n.ROLE_STUDENT=0]="ROLE_STUDENT",n[n.ROLE_TEACHER=1]="ROLE_TEACHER",n[n.ROLE_ADMIN=2]="ROLE_ADMIN",n[n.ROLE_LABOR_TUTOR=3]="ROLE_LABOR_TUTOR",a;var n})(),T=c(5226),l=c.n(T),e=c(1223),m=c(2340),C=c(3958),P=c(5295),O=c(520);let y=(()=>{class n{constructor(t,o,i){this.userService=t,this.authService=o,this.http=i}getLaborTutor(){return this.http.get(m.N.serverAddress+"/labor-tutor/",this.authService.getHeadersToken())}getTeachers(){return this.http.get(m.N.serverAddress+"/teacher/",this.authService.getHeadersToken())}getStudents(){return this.http.get(m.N.serverAddress+"/student/",this.authService.getHeadersToken())}removeStudent(t){return this.http.delete(m.N.serverAddress+"/student/"+t,this.authService.getHeadersToken())}removeTeacher(t){return this.http.delete(m.N.serverAddress+"/teacher/"+t,this.authService.getHeadersToken())}removeLaborTutor(t){return this.http.delete(m.N.serverAddress+"/labor-tutor/"+t,this.authService.getHeadersToken())}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(C.K),e.LFG(P.e),e.LFG(O.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var b=c(8083);function S(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",11),e.TgZ(1,"div"),e._UZ(2,"img",12),e.qZA(),e.TgZ(3,"p"),e._uU(4),e.qZA(),e.TgZ(5,"p"),e._uU(6),e.qZA(),e.TgZ(7,"p"),e._uU(8),e.qZA(),e.TgZ(9,"img",13),e.NdJ("click",function(i){return e.CHM(t),e.oxw().showMenu(i)}),e.qZA(),e.TgZ(10,"div",14),e.TgZ(11,"p",15),e.NdJ("click",function(i){const p=e.CHM(t).$implicit;return e.oxw().view(i,p.dni)}),e._uU(12,"Ver"),e.qZA(),e.TgZ(13,"p",15),e.NdJ("click",function(i){const p=e.CHM(t).$implicit;return e.oxw().edit(i,p.dni)}),e._uU(14,"Editar"),e.qZA(),e.TgZ(15,"p",16),e.NdJ("click",function(i){const p=e.CHM(t).$implicit;return e.oxw().remove(i,p.dni)}),e._uU(16,"Borrar"),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=r.$implicit;e.xp6(2),e.s9C("src",t.image,e.LSH),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.lastName),e.xp6(2),e.Oqu(t.dni)}}const E=[{path:"management",component:(()=>{class n{constructor(t,o,i,s){this.personSvr=t,this.userService=o,this.authService=i,this.http=s,this.rolSelected=a.ROLE_TEACHER,this.rolSelectedString="",this.persons=[]}ngOnInit(){this.getPersons()}getPersons(){this.rolSelected==a.ROLE_TEACHER?(this.rolSelectedString="Profesores",this.personSvr.getTeachers().subscribe({next:t=>{this.persons=t}})):this.rolSelected==a.ROLE_STUDENT?(this.rolSelectedString="Estudiantes",this.personSvr.getStudents().subscribe({next:t=>{this.persons=t}})):this.rolSelected==a.ROLE_LABOR_TUTOR&&(this.rolSelectedString="Tutores",this.personSvr.getLaborTutor().subscribe({next:t=>{this.persons=t}}))}find(t){}setPerson(t){let o=t.target.value;"teacher"==o?this.rolSelected=a.ROLE_TEACHER:"student"==o?this.rolSelected=a.ROLE_STUDENT:"labor-tutor"==o&&(this.rolSelected=a.ROLE_LABOR_TUTOR),this.getPersons()}showMenu(t){var o;null===(o=t.target.parentElement)||void 0===o||o.classList.add("viewMenu")}noShowMenu(t){var o,i;null===(i=null===(o=t.target.parentElement)||void 0===o?void 0:o.parentElement)||void 0===i||i.classList.remove("viewMenu")}view(t,o){this.noShowMenu(t)}edit(t,o){this.noShowMenu(t)}remove(t,o){this.noShowMenu(t),l().fire({title:"Borrar usuario",text:"Se borrar\xe1n todos los datos relacionados irreversiblemente",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Borrar"}).then(i=>{if(i.isConfirmed)switch(this.rolSelected){case a.ROLE_TEACHER:this.personSvr.removeTeacher(o).subscribe({next:()=>{l().fire({icon:"error",title:"\xa1Hecho!",text:"Borrado"}),this.getPersons()},error:s=>{l().fire({icon:"error",title:"Oops...",text:s.error.mensaje})}});break;case a.ROLE_LABOR_TUTOR:this.personSvr.removeLaborTutor(o).subscribe({next:()=>{l().fire({icon:"error",title:"\xa1Hecho!",text:"Borrado"}),this.getPersons()},error:s=>{l().fire({icon:"error",title:"Oops...",text:s.error.mensaje})}});break;case a.ROLE_STUDENT:this.personSvr.removeStudent(o).subscribe({next:()=>{l().fire({icon:"error",title:"\xa1Hecho!",text:"Borrado"}),this.getPersons()},error:s=>{l().fire({icon:"error",title:"Oops...",text:s.error.mensaje})}})}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(y),e.Y36(C.K),e.Y36(P.e),e.Y36(O.eN))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-person-management"]],decls:18,vars:2,consts:[["id","searchDivMain"],["id","bienvenida"],["id","text"],["id","addPerson","src","assets/img/add-icon.png","alt","A\xf1adir","title","A\xf1adir"],[3,"change"],["value","teacher"],["value","student"],["value","labor-tutor"],["id","searchElement",3,"query"],["id","containerElement"],["class","person",4,"ngFor","ngForOf"],[1,"person"],[3,"src"],["src","assets/img/points.png","alt","Opciones","title","Opciones",1,"options",3,"click"],[1,"more-option"],[3,"click"],[1,"danger",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"p"),e._uU(4,"Administraci\xf3n de personas"),e.qZA(),e.TgZ(5,"p"),e._uU(6),e.qZA(),e.qZA(),e._UZ(7,"img",3),e.TgZ(8,"select",4),e.NdJ("change",function(s){return o.setPerson(s)}),e.TgZ(9,"option",5),e._uU(10,"Profesores"),e.qZA(),e.TgZ(11,"option",6),e._uU(12,"Estudiantes"),e.qZA(),e.TgZ(13,"option",7),e._uU(14,"Tutores"),e.qZA(),e.qZA(),e.TgZ(15,"search",8),e.NdJ("query",function(s){return o.find(s)}),e.qZA(),e.qZA(),e.TgZ(16,"div",9),e.YNc(17,S,17,4,"div",10),e.qZA(),e.qZA()),2&t&&(e.xp6(6),e.hij(" ",o.rolSelectedString," de la aplicaci\xf3n "),e.xp6(11),e.Q6J("ngForOf",o.persons))},directives:[b.g,d.sg],styles:["#searchDivMain[_ngcontent-%COMP%]{height:100%;overflow:auto}#bienvenida[_ngcontent-%COMP%]{height:160px;position:relative;display:flex}#bienvenida[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:50%;display:flex;flex-direction:column;justify-content:center}#bienvenida[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){align-items:flex-end}#text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(1){font-weight:600;margin-bottom:5px;font-size:20px}#text[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:nth-child(2){opacity:.7}#text[_ngcontent-%COMP%]{padding-left:5%}#containerTable[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%}table[_ngcontent-%COMP%]{width:80%}#containerElement[_ngcontent-%COMP%]{width:100%;height:60%;display:flex;justify-content:center;gap:42px;flex-wrap:wrap}.person[_ngcontent-%COMP%]{overflow:hidden;position:relative;justify-content:center;display:flex;flex-direction:column;align-content:center;align-items:center;max-width:168px;background-color:#efefef;height:229px;width:90%;border-radius:5px;box-shadow:0 5px 5px #bebebe}.person[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){border-radius:50%;width:110px;height:110px;overflow:hidden;display:flex;justify-content:center;align-items:center;margin-bottom:10px}.person[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(2){font-size:20px}.person[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(3){opacity:.7;font-size:12px}.person[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(4){position:relative;top:10px;font-size:13px}.person[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1)   img[_ngcontent-%COMP%]{height:100%}select[_ngcontent-%COMP%]{position:absolute;top:104px;right:48px;border:none;background-color:#ececec;width:128px;height:30px}#addPerson[_ngcontent-%COMP%]{position:absolute;top:109px;right:193px;width:20px}.options[_ngcontent-%COMP%]{width:14px;position:absolute;top:11px;right:7px}.more-option[_ngcontent-%COMP%]{border-radius:5px;overflow:hidden;position:absolute;top:5px;right:0;width:100px;box-shadow:0 5px 5px #46464621;height:max-content;display:none}.viewMenu[_ngcontent-%COMP%]   .more-option[_ngcontent-%COMP%]{display:initial!important}.more-option[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-top:5px;font-size:initial!important;opacity:initial!important;width:100%;height:30px;padding-left:15px;transition:.2s;background-color:#fff}.more-option[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{background-color:#e6e6e6}.danger[_ngcontent-%COMP%]:hover{background-color:#ff6060!important;color:#fff}#searchElement[_ngcontent-%COMP%]{position:absolute;right:20px;top:53px}"]}),n})()},{path:"management/:dni/view",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-view-person"]],decls:2,vars:0,template:function(t,o){1&t&&(e.TgZ(0,"p"),e._uU(1,"view-person works!"),e.qZA())},styles:[""]}),n})()},{path:"management/:dni/edit",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-edit-person"]],decls:2,vars:0,template:function(t,o){1&t&&(e.TgZ(0,"p"),e._uU(1,"edit-person works!"),e.qZA())},styles:[""]}),n})()}];let w=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[x.Bz.forChild(E)],x.Bz]}),n})();!function(){function n(r,t,o){this.el=r,this.vcr=t,this.renderer=o,this.dtOptions={}}n.prototype.ngOnInit=function(){var r=this;this.dtTrigger?this.dtTrigger.subscribe(function(t){r.displayTable(t)}):this.displayTable(null)},n.prototype.ngOnDestroy=function(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.dt&&this.dt.destroy(!0)},n.prototype.displayTable=function(r){var t=this;r&&(this.dtOptions=r),this.dtInstance=new Promise(function(o,i){Promise.resolve(t.dtOptions).then(function(s){0===Object.keys(s).length&&0===$("tbody tr",t.el.nativeElement).length?i("Both the table and dtOptions cannot be empty"):setTimeout(function(){var u={rowCallback:function(h,g,v){if(s.columns){var f=s.columns;t.applyNgPipeTransform(h,f),t.applyNgRefTemplate(h,f,g)}s.rowCallback&&s.rowCallback(h,g,v)}};u=Object.assign({},s,u),t.dt=$(t.el.nativeElement).DataTable(u),o(t.dt)})})})},n.prototype.applyNgPipeTransform=function(r,t){t.filter(function(i){return i.ngPipeInstance&&!i.ngTemplateRef}).forEach(function(i){var s=i.ngPipeInstance,p=i.ngPipeArgs||[],u=t.findIndex(function(f){return f.data===i.data}),h=r.childNodes.item(u),g=$(h).text(),v=s.transform.apply(s,function(n,r,t){if(t||2===arguments.length)for(var s,o=0,i=r.length;o<i;o++)(s||!(o in r))&&(s||(s=Array.prototype.slice.call(r,0,o)),s[o]=r[o]);return n.concat(s||Array.prototype.slice.call(r))}([g],p,!1));$(h).text(v)})},n.prototype.applyNgRefTemplate=function(r,t,o){var i=this;t.filter(function(p){return p.ngTemplateRef&&!p.ngPipeInstance}).forEach(function(p){var u=p.ngTemplateRef,h=u.ref,g=u.context,v=t.findIndex(function(U){return U.data===p.data}),f=r.childNodes.item(v);$(f).html("");var N=Object.assign({},g,null==g?void 0:g.userData,{adtData:o}),k=i.vcr.createEmbeddedView(h,N);i.renderer.appendChild(f,k.rootNodes[0])})},n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(e.s_b),e.Y36(e.Qsj))},n.\u0275dir=e.lG2({type:n,selectors:[["","datatable",""]],inputs:{dtOptions:"dtOptions",dtTrigger:"dtTrigger"}})}();var Z=function(){function n(){}return n.forRoot=function(){return{ngModule:n}},n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez]]}),n}(),R=c(4466);let L=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,Z,w,R.m]]}),n})()},8083:(M,_,c)=>{c.d(_,{g:()=>x});var d=c(1223);let x=(()=>{class a{constructor(){this.query=new d.vpe}ngOnInit(){}send(l){this.query.emit(l.target.value)}}return a.\u0275fac=function(l){return new(l||a)},a.\u0275cmp=d.Xpm({type:a,selectors:[["search"]],outputs:{query:"query"},decls:3,vars:0,consts:[["id","input-div"],["autocomplete","off","name","search","type","text","placeholder","Buscar",3,"keyup"],["src","assets/img/find.png","id","find-img"]],template:function(l,e){1&l&&(d.TgZ(0,"div",0),d.TgZ(1,"input",1),d.NdJ("keyup",function(C){return e.send(C)}),d.qZA(),d._UZ(2,"img",2),d.qZA())},styles:["input[_ngcontent-%COMP%]{border:none;background-color:#f0f0f0;height:39px;width:100%;max-width:230px;border-radius:7px;padding-left:50px}#input-div[_ngcontent-%COMP%]{position:relative}#find-img[_ngcontent-%COMP%]{width:19px;position:absolute;top:10px;left:15px}input[_ngcontent-%COMP%]:focus{outline:none!important}"]}),a})()}}]);
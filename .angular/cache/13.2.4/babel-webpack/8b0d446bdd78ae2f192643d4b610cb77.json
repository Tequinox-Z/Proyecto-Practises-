{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport Swal from 'sweetalert2';\nimport * as CryptoJS from 'crypto-js';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../Services/Centers-service/Centers.service\";\nimport * as i2 from \"@angular/common\";\n\nfunction FindCentersComponent_h1_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h1\", 19);\n    i0.ɵɵtext(1, \"Elija un centro\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction FindCentersComponent_h1_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h1\", 19);\n    i0.ɵɵtext(1, \"Centros educativos\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction FindCentersComponent_input_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"input\", 20);\n    i0.ɵɵlistener(\"keyup\", function FindCentersComponent_input_5_Template_input_keyup_0_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.find($event);\n    });\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction FindCentersComponent_div_8_a_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"a\", 25);\n    i0.ɵɵlistener(\"click\", function FindCentersComponent_div_8_a_8_Template_a_click_0_listener($event) {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext(2);\n      return ctx_r12.setSchool($event);\n    });\n    i0.ɵɵtext(1, \" Administrar \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction FindCentersComponent_div_8_a_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"a\", 25);\n    i0.ɵɵlistener(\"click\", function FindCentersComponent_div_8_a_9_Template_a_click_0_listener($event) {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext(2);\n      return ctx_r14.getInfo($event);\n    });\n    i0.ɵɵtext(1, \" Informaci\\u00F3n \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction FindCentersComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵlistener(\"contextmenu\", function FindCentersComponent_div_8_Template_div_contextmenu_0_listener($event) {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return ctx_r16.updateMenuData($event);\n    });\n    i0.ɵɵelement(1, \"img\", 22);\n    i0.ɵɵelementStart(2, \"div\", 23);\n    i0.ɵɵelementStart(3, \"h4\");\n    i0.ɵɵelementStart(4, \"b\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(8, FindCentersComponent_div_8_a_8_Template, 2, 0, \"a\", 24);\n    i0.ɵɵtemplate(9, FindCentersComponent_div_8_a_9_Template, 2, 0, \"a\", 24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const school_r9 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵpropertyInterpolate(\"id\", school_r9.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", school_r9.image ? school_r9.image : \"assets/img/noPhotoSchool.jpg\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(school_r9.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(school_r9.address);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.setSchoolMode);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r3.setSchoolMode);\n  }\n}\n\nfunction FindCentersComponent_div_9_p_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \"Actualmente no administras ning\\u00FAn centro, elige cual deseas administrar\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction FindCentersComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵelement(1, \"img\", 27);\n    i0.ɵɵelementStart(2, \"h1\");\n    i0.ɵɵtext(3, \"No se han encontrado centros\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, FindCentersComponent_div_9_p_4_Template, 2, 0, \"p\", 28);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.setSchoolMode);\n  }\n}\n\nfunction FindCentersComponent_p_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 29);\n    i0.ɵɵtext(1, \"Sin administradores\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction FindCentersComponent_div_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"p\", 30);\n    i0.ɵɵelement(2, \"i\", 31);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"br\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const administrator_r19 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\" \", administrator_r19.name, \" - \", administrator_r19.telefone, \" \");\n  }\n}\n\nexport let FindCentersComponent = /*#__PURE__*/(() => {\n  class FindCentersComponent {\n    constructor(centersService) {\n      this.centersService = centersService;\n      this.setSchoolMode = false;\n      this.emitSchool = new EventEmitter();\n      this.idSchoolForMenu = \"\";\n    }\n\n    ngOnInit() {\n      var _a, _b;\n\n      this.getAllCenters();\n      (_a = document.querySelector('#schoolsElements')) === null || _a === void 0 ? void 0 : _a.addEventListener(\"contextmenu\", event => {\n        event.preventDefault();\n\n        if (event.target === document.querySelector('#schoolsElements')) {\n          this.hiddenMenu();\n        } else {\n          this.showMenu();\n        }\n      });\n      (_b = document.querySelector('#schoolsElements')) === null || _b === void 0 ? void 0 : _b.addEventListener(\"contextmenu\", event => {\n        this.menu.style.top = event.clientY + \"px\";\n        this.menu.style.left = event.clientX + \"px\";\n      });\n      this.menu = document.querySelector('#context-menu');\n    }\n\n    updateMenuData(event) {\n      this.idSchoolForMenu = event.currentTarget.getAttribute('id') + '';\n    }\n\n    hiddenMenu() {\n      this.menu.classList.add('minimized');\n      setTimeout(() => {\n        this.menu.style.display = \"none\";\n      }, 100);\n    }\n\n    showMenu() {\n      this.menu.style.display = \"inline-block\";\n      setTimeout(() => {\n        this.menu.classList.remove('minimized');\n      }, 100);\n    }\n\n    find(event) {\n      let text = event.target.value.trim();\n\n      if (text.length == 0) {\n        this.getAllCenters();\n      } else {\n        this.getAllCentersByName(text);\n      }\n    }\n\n    setSchool(event) {\n      var _a, _b;\n\n      let schoolId;\n\n      if (typeof event == \"string\") {\n        schoolId = event;\n      } else {\n        schoolId = ((_b = (_a = event.target.parentElement) === null || _a === void 0 ? void 0 : _a.parentElement) === null || _b === void 0 ? void 0 : _b.getAttribute(\"id\")) + '';\n      }\n\n      this.centersService.getCenter(schoolId).subscribe({\n        next: school => {\n          Swal.fire({\n            title: 'Introduzca la contraseña',\n            input: 'password',\n            inputAttributes: {\n              autocapitalize: 'off'\n            },\n            showCancelButton: true,\n            confirmButtonText: 'Administrar',\n            cancelButtonText: 'Cancelar',\n            cancelButtonColor: 'transparent',\n            showLoaderOnConfirm: true,\n            preConfirm: login => {\n              let passwordEncrypt = CryptoJS.MD5(login).toString();\n\n              if (passwordEncrypt != school.password) {\n                Swal.showValidationMessage(\"Contraseña incorrecta\");\n              }\n            },\n            allowOutsideClick: () => !Swal.isLoading()\n          }).then(result => {\n            if (result.isConfirmed) {\n              this.centersService.setCenter(schoolId).subscribe({\n                next: response => {\n                  this.emitSchool.emit(response);\n                },\n                error: error => {\n                  this.message(error.error.mensaje);\n                }\n              });\n            }\n          });\n        },\n        error: error => {\n          this.message(error.error.mensaje);\n        }\n      });\n    }\n\n    getAllCentersByName(text) {\n      this.centersService.getAllByName(text).subscribe({\n        next: response => {\n          this.schools = response;\n        },\n        error: error => {\n          this.schools = [];\n          this.message(error.error.mensaje);\n        }\n      });\n    }\n\n    getAllCenters() {\n      this.centersService.getAll().subscribe({\n        next: response => {\n          if (this.findEnable == null) {\n            if (response) {\n              this.findEnable = true;\n            } else {\n              this.findEnable = false;\n            }\n          }\n\n          this.schools = response;\n        },\n        error: error => {\n          this.message(error.error.mensaje);\n        }\n      });\n    }\n\n    message(error) {\n      Swal.fire({\n        icon: 'error',\n        title: 'Oops...',\n        text: error == undefined ? 'Servidor no disponible' : error\n      });\n    }\n\n    getInfo(event) {\n      var _a, _b;\n\n      this.changeVisiblityOfInfo();\n      let schoolId;\n\n      if (typeof event == \"string\") {\n        schoolId = event;\n      } else {\n        schoolId = ((_b = (_a = event.target.parentElement) === null || _a === void 0 ? void 0 : _a.parentElement) === null || _b === void 0 ? void 0 : _b.getAttribute(\"id\")) + '';\n      }\n\n      this.centersService.getAdministratorsFromCenter(schoolId).subscribe({\n        next: response => {\n          this.adminInfo = response;\n        },\n        error: error => {\n          this.adminInfo = [];\n        }\n      });\n    }\n\n    changeVisiblityOfInfo() {\n      document.querySelector(\"#information\").classList.toggle(\"noShow\");\n    }\n\n  }\n\n  FindCentersComponent.ɵfac = function FindCentersComponent_Factory(t) {\n    return new (t || FindCentersComponent)(i0.ɵɵdirectiveInject(i1.CentersService));\n  };\n\n  FindCentersComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: FindCentersComponent,\n    selectors: [[\"app-find-centers\"]],\n    inputs: {\n      setSchoolMode: \"setSchoolMode\"\n    },\n    outputs: {\n      emitSchool: \"emitSchool\"\n    },\n    decls: 29,\n    vars: 7,\n    consts: [[\"id\", \"find\", 3, \"click\"], [\"id\", \"schools\"], [\"class\", \"title\", 4, \"ngIf\"], [\"id\", \"search\", \"autocomplete\", \"off\", \"placeholder\", \"Buscar\", \"type\", \"text\", 3, \"keyup\", 4, \"ngIf\"], [\"id\", \"schoolsElements\"], [\"class\", \"school\", 3, \"id\", \"contextmenu\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"no-content\", 4, \"ngIf\"], [\"id\", \"context-menu\"], [1, \"item\"], [1, \"fa-solid\", \"fa-circle-info\"], [1, \"item\", 3, \"click\"], [1, \"fa-solid\", \"fa-bars-progress\"], [\"id\", \"information\", 1, \"noShow\"], [\"id\", \"modal\"], [\"id\", \"close\", 3, \"click\"], [1, \"fa-solid\", \"fa-xmark\"], [\"id\", \"admins\"], [\"id\", \"noAdmins\", 4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [1, \"title\"], [\"id\", \"search\", \"autocomplete\", \"off\", \"placeholder\", \"Buscar\", \"type\", \"text\", 3, \"keyup\"], [1, \"school\", 3, \"id\", \"contextmenu\"], [\"alt\", \"Avatar\", 2, \"width\", \"100%\", 3, \"src\"], [1, \"container\"], [3, \"click\", 4, \"ngIf\"], [3, \"click\"], [\"id\", \"no-content\"], [\"src\", \"assets/img/school.png\"], [4, \"ngIf\"], [\"id\", \"noAdmins\"], [1, \"name\"], [1, \"fa-solid\", \"fa-user\", \"c-primary\"]],\n    template: function FindCentersComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵlistener(\"click\", function FindCentersComponent_Template_div_click_0_listener() {\n          return ctx.hiddenMenu();\n        });\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\");\n        i0.ɵɵtemplate(3, FindCentersComponent_h1_3_Template, 2, 0, \"h1\", 2);\n        i0.ɵɵtemplate(4, FindCentersComponent_h1_4_Template, 2, 0, \"h1\", 2);\n        i0.ɵɵtemplate(5, FindCentersComponent_input_5_Template, 1, 0, \"input\", 3);\n        i0.ɵɵelement(6, \"br\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"div\", 4);\n        i0.ɵɵtemplate(8, FindCentersComponent_div_8_Template, 10, 6, \"div\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(9, FindCentersComponent_div_9_Template, 5, 1, \"div\", 6);\n        i0.ɵɵelementStart(10, \"div\", 7);\n        i0.ɵɵelementStart(11, \"div\", 8);\n        i0.ɵɵelementStart(12, \"p\");\n        i0.ɵɵelement(13, \"i\", 9);\n        i0.ɵɵtext(14, \" Informaci\\u00F3n \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"div\", 10);\n        i0.ɵɵlistener(\"click\", function FindCentersComponent_Template_div_click_15_listener() {\n          return ctx.setSchool(ctx.idSchoolForMenu);\n        });\n        i0.ɵɵelementStart(16, \"p\");\n        i0.ɵɵelement(17, \"i\", 11);\n        i0.ɵɵtext(18, \" Administrar \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"div\", 12);\n        i0.ɵɵelementStart(20, \"div\", 13);\n        i0.ɵɵelementStart(21, \"a\", 14);\n        i0.ɵɵlistener(\"click\", function FindCentersComponent_Template_a_click_21_listener() {\n          return ctx.changeVisiblityOfInfo();\n        });\n        i0.ɵɵelement(22, \"i\", 15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"h3\");\n        i0.ɵɵelement(24, \"i\", 9);\n        i0.ɵɵtext(25, \" Administradores \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"div\", 16);\n        i0.ɵɵtemplate(27, FindCentersComponent_p_27_Template, 2, 0, \"p\", 17);\n        i0.ɵɵtemplate(28, FindCentersComponent_div_28_Template, 5, 2, \"div\", 18);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.setSchoolMode && ctx.findEnable);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.setSchoolMode && ctx.findEnable);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.findEnable);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.schools);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.schools);\n        i0.ɵɵadvance(18);\n        i0.ɵɵproperty(\"ngIf\", ctx.adminInfo && ctx.adminInfo.length == 0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.adminInfo);\n      }\n    },\n    directives: [i2.NgIf, i2.NgForOf],\n    styles: [\"#no-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;height:100%;font-feature-settings:\\\"smcp\\\";font-variant:small-caps;font-size:.8em;text-shadow:2px 2px 6px black;color:#fff;margin-top:20vh;margin-left:5vw;margin-right:5vw}.school[_ngcontent-%COMP%]:hover{box-shadow:0 8px 16px #0003}.container[_ngcontent-%COMP%]{padding:2px 16px}#no-content[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:80%;position:relative;top:-5%;max-width:300px}#no-content[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:1.2em;width:24%;position:relative;top:1%}#schools[_ngcontent-%COMP%]{text-align:center;width:100%}#no-content[_ngcontent-%COMP%] > h1[_ngcontent-%COMP%]{margin-top:2%}.school[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:60%}.school[_ngcontent-%COMP%]{border-radius:2%;box-shadow:0 4px 8px #0003;transition:.3s;display:inline-block;background-color:#00000081;height:19em;margin:1em;color:#fff;width:40%;min-width:200px;overflow:hidden;max-width:250px;transition:.5s;animation-name:introSchool;animation-duration:.5s}@keyframes introSchool{0%{opacity:0}to{opacity:1}}.container[_ngcontent-%COMP%] > h4[_ngcontent-%COMP%]{text-align:left;font-size:1.1em;padding:.6em}.container[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{background-color:#fff;color:#000;padding:10px 50px;position:relative;top:1.2em}.container[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{text-align:left;padding-left:5%;color:#d0d0d0;font-size:.8em;position:relative;top:-.5em}@media (max-width: 1000px){#no-content[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{width:40%}}@media (max-width: 600px){#no-content[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{width:70%}.school[_ngcontent-%COMP%]{margin:5%}.container[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{position:relative!important;width:100%;left:-3.5%}.container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-left:0%!important}}#search[_ngcontent-%COMP%]:focus{outline:none}#search[_ngcontent-%COMP%]{background-color:#00000057;margin-top:-10%;border:none;border-radius:5px;padding:10px 5%;text-align:center;position:relative;top:-.5em;width:40%;max-width:320px;margin-bottom:.5em;color:#fff}#search[_ngcontent-%COMP%]::placeholder{color:#d6d6d6}#context-menu[_ngcontent-%COMP%]{position:fixed;z-index:1000;border-radius:7px;width:158px;background-color:#00000081;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);transition:.4s;overflow:hidden;transform:rotateX(0);display:none}.minimized[_ngcontent-%COMP%]{transform:rotateX(90deg)!important}#context-menu[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{padding:10px 20px;font-size:15px;color:#fff}#context-menu[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:hover{border-radius:7px;background-color:#6363634b!important}#context-menu[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:inline-block;margin-right:5px;color:var(--color)}#context-menu[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin:2px 0;border-color:#555}#modal[_ngcontent-%COMP%]{width:70%;background-color:#ffffff29;max-width:40em;border:1px solid rgb(211,211,211);top:30vh;padding-bottom:1em;transition:.5s;max-width:22em}.noShow[_ngcontent-%COMP%]   #modal[_ngcontent-%COMP%]{transform:rotateX(90deg)}.noShow[_ngcontent-%COMP%]{visibility:hidden;z-index:-10}#information.noShow[_ngcontent-%COMP%]{opacity:0}#information[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:left;color:#fff;padding:1.5em}#information[_ngcontent-%COMP%]{background-color:#00000058;transition:.5s;width:100%!important;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);height:100vh;top:0;left:0;right:0;position:fixed;z-index:200;display:flex;justify-content:center;align-items:center;text-align:center}#admins[_ngcontent-%COMP%]{color:#fff}.name[_ngcontent-%COMP%]{margin-bottom:2%}@media (max-width: 700px){#modal[_ngcontent-%COMP%]{margin-left:12%}}#noAdmins[_ngcontent-%COMP%]{margin-bottom:4%}\"]\n  });\n  return FindCentersComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}
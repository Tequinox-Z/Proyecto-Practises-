{"ast":null,"code":"import Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../Services/Auth-service/auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../../../../shared/Services/Keyboard-service/keyboard-service\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"../../../../shared/Components/Loading/loading.component\";\n\nfunction LoginComponent_img_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 27);\n  }\n}\n\nfunction LoginComponent_img_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 28);\n  }\n}\n\nfunction LoginComponent_app_loading_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-loading\");\n  }\n}\n\nconst _c0 = function (a0) {\n  return {\n    \"disabled\": a0\n  };\n};\n\nexport let LoginComponent = /*#__PURE__*/(() => {\n  class LoginComponent {\n    constructor(auth, router, route, keyboardService) {\n      this.auth = auth;\n      this.router = router;\n      this.route = route;\n      this.keyboardService = keyboardService;\n      this.model = {\n        \"dni\": \"\",\n        \"password\": \"\"\n      };\n      this.loading = false; // Indica si la pantalla de carga debe mostrarse u ocultarse\n    }\n\n    ngOnInit() {\n      if (this.auth.getToken() != null) {\n        this.router.navigateByUrl('/'); // Si tiene token lo redirigimos a la aplicación\n      }\n    }\n\n    ngAfterViewInit() {\n      setTimeout(() => {\n        let transition = document.querySelector(\"#transition-login\");\n        transition.style.display = \"none\";\n      }, 1000);\n    }\n\n    show() {\n      this.keyboardService.showKeyboard(true);\n    }\n    /**\n     * Inicia sesión\n     */\n\n\n    submit() {\n      this.loading = true; // Mostramos la pantalla de carga\n\n      this.auth.login(this.model).subscribe({\n        next: response => {\n          this.loading = false; // Ocultamos la pantalla de carga\n\n          this.auth.setToken(response.jwt_token + ''); // Establecemos el token\n\n          this.router.navigate(['/']); // Navegamos hasta la aplicación\n        },\n        error: response => {\n          this.loading = false; // En caso de error ocultamos la pantalla de carga\n          // Indicamos el error ocurrido\n\n          Swal.fire({\n            icon: 'error',\n            title: 'Oops...',\n            text: response.error.mensaje == undefined ? 'Servidor no disponible' : response.error.mensaje\n            /*footer: '<a href=\"\">Why do I have this issue?</a>'*/\n\n          });\n        }\n      });\n    }\n\n    back() {\n      this.router.navigate(['../welcome'], {\n        relativeTo: this.route\n      });\n    }\n\n    restorePassword() {\n      let inputDNI = document.querySelector(\"#dni.ng-valid\");\n\n      if (inputDNI != undefined) {}\n    }\n\n  }\n\n  LoginComponent.ɵfac = function LoginComponent_Factory(t) {\n    return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.KeyboardService));\n  };\n\n  LoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginComponent,\n    selectors: [[\"app-login\"]],\n    decls: 30,\n    vars: 11,\n    consts: [[\"id\", \"transition-login\"], [\"id\", \"page-container\"], [\"id\", \"container\"], [\"autocomplete\", \"off\", 3, \"ngSubmit\"], [\"login\", \"ngForm\"], [\"id\", \"title\"], [\"id\", \"box-login\"], [1, \"inputBox\"], [\"pattern\", \"[0-9]{8}[A-Za-z]{1}\", \"name\", \"dni\", \"id\", \"dni\", \"placeholder\", \"Usuario\", \"type\", \"text\", \"required\", \"\", 1, \"text\", 3, \"ngModel\", \"ngModelChange\"], [\"dni\", \"ngModel\"], [\"src\", \"assets/img/user-icon.png\", \"alt\", \"Usuario\", \"title\", \"Usuario\", 1, \"icon-input\"], [\"class\", \"err\", \"title\", \"Indique un dni con formato 8 n\\u00FAmeros y una letra\", \"src\", \"assets/img/err.png\", 4, \"ngIf\"], [\"name\", \"password\", \"id\", \"contrase\\u00F1a\", \"placeholder\", \"Contrase\\u00F1a\", \"type\", \"password\", \"required\", \"\", 1, \"text\", 3, \"ngModel\", \"ngModelChange\"], [\"password\", \"ngModel\"], [\"src\", \"assets/img/password-icon.png\", \"alt\", \"Contrase\\u00F1a\", \"title\", \"Contrase\\u00F1a-\", 1, \"icon-input\"], [\"class\", \"err\", \"title\", \"La contrase\\u00F1a debe de tener m\\u00EDnimo 8 car\\u00E1cteres\", \"src\", \"assets/img/err.png\", 4, \"ngIf\"], [\"id\", \"submit\", \"type\", \"submit\", \"value\", \"Iniciar sesi\\u00F3n\", 3, \"disabled\"], [\"id\", \"login-functions\"], [\"id\", \"actions\"], [3, \"click\"], [\"src\", \"assets/img/back.png\", \"alt\", \"Atr\\u00E1s\", \"title\", \"Atr\\u00E1s\"], [\"id\", \"password-restore\", 3, \"ngClass\"], [\"src\", \"assets/img/restart-password.png\"], [\"id\", \"keyboard\", 3, \"click\"], [\"src\", \"assets/img/keyboard.png\", \"alt\", \"Teclado en pantalla\"], [\"src\", \"assets/img/google.png\", \"alt\", \"Iniciar con Google\", \"title\", \"Iniciar con Google\"], [4, \"ngIf\"], [\"title\", \"Indique un dni con formato 8 n\\u00FAmeros y una letra\", \"src\", \"assets/img/err.png\", 1, \"err\"], [\"title\", \"La contrase\\u00F1a debe de tener m\\u00EDnimo 8 car\\u00E1cteres\", \"src\", \"assets/img/err.png\", 1, \"err\"]],\n    template: function LoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"form\", 3, 4);\n        i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_3_listener() {\n          return ctx.submit();\n        });\n        i0.ɵɵelementStart(5, \"p\", 5);\n        i0.ɵɵtext(6, \"Iniciar sesi\\u00F3n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"div\", 6);\n        i0.ɵɵelementStart(8, \"div\", 7);\n        i0.ɵɵelementStart(9, \"input\", 8, 9);\n        i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_9_listener($event) {\n          return ctx.model.dni = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(11, \"img\", 10);\n        i0.ɵɵtemplate(12, LoginComponent_img_12_Template, 1, 0, \"img\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"div\", 7);\n        i0.ɵɵelementStart(14, \"input\", 12, 13);\n        i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_14_listener($event) {\n          return ctx.model.password = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(16, \"img\", 14);\n        i0.ɵɵtemplate(17, LoginComponent_img_17_Template, 1, 0, \"img\", 15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(18, \"input\", 16);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"div\", 17);\n        i0.ɵɵelementStart(20, \"div\", 18);\n        i0.ɵɵelementStart(21, \"div\", 19);\n        i0.ɵɵlistener(\"click\", function LoginComponent_Template_div_click_21_listener() {\n          return ctx.back();\n        });\n        i0.ɵɵelement(22, \"img\", 20);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"div\", 21);\n        i0.ɵɵelement(24, \"img\", 22);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"div\", 23);\n        i0.ɵɵlistener(\"click\", function LoginComponent_Template_div_click_25_listener() {\n          return ctx.keyboardService.showKeyboard(true);\n        });\n        i0.ɵɵelement(26, \"img\", 24);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"div\");\n        i0.ɵɵelement(28, \"img\", 25);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(29, LoginComponent_app_loading_29_Template, 1, 0, \"app-loading\", 26);\n      }\n\n      if (rf & 2) {\n        const _r0 = i0.ɵɵreference(4);\n\n        const _r1 = i0.ɵɵreference(10);\n\n        const _r3 = i0.ɵɵreference(15);\n\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngModel\", ctx.model.dni);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", _r1.invalid && _r1.touched);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.model.password);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", _r3.invalid && _r3.touched);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"disabled\", _r0.invalid);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(9, _c0, _r1.invalid));\n        i0.ɵɵadvance(1);\n        i0.ɵɵattribute(\"alt\", _r1.invalid ? \"Inserte su dni para recuperar contrase\\u00F1a\" : \"Recuperar contrase\\u00F1a\")(\"title\", _r1.invalid ? \"Inserte su dni para recuperar contrase\\u00F1a\" : \"Recuperar contrase\\u00F1a\");\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ctx.loading);\n      }\n    },\n    directives: [i4.ɵNgNoValidate, i4.NgControlStatusGroup, i4.NgForm, i4.DefaultValueAccessor, i4.PatternValidator, i4.RequiredValidator, i4.NgControlStatus, i4.NgModel, i5.NgIf, i5.NgClass, i6.LoadingComponent],\n    styles: [\"#container[_ngcontent-%COMP%]{display:flex;height:100vh;width:100%;flex-direction:column;flex-wrap:nowrap;align-content:center;justify-content:center;align-items:center}.disabled[_ngcontent-%COMP%]{filter:opacity(.3)}.disabled[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{animation-name:unset!important}#submit[_ngcontent-%COMP%]:enabled:hover{background-color:#ebebeb}.disabled[_ngcontent-%COMP%]:hover{animation-name:unset!important}form[_ngcontent-%COMP%]{background-color:#fff;box-shadow:0 7px 7px #b5b5b5;height:315px;display:flex;flex-direction:column;justify-content:center;align-content:center;align-items:center;position:relative;width:85%;max-width:347px;border-bottom:4px solid var(--color)}#box-login[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px;align-items:center;text-align:center;width:100%}.inputBox[_ngcontent-%COMP%]{width:78%;position:relative}#box-login[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding-left:45px;height:37px;border:none;background-color:#f0f0f0}#box-login[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#353535}#box-login[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none!important}#submit[_ngcontent-%COMP%]{position:absolute;bottom:35px;border:none;width:60%;height:39px;transition:.5s}#title[_ngcontent-%COMP%]{font-family:\\\"Exo 2\\\",sans-serif;position:absolute;font-size:22px;font-weight:100!important;top:45px}#transition-login[_ngcontent-%COMP%]{background-color:#172477;position:absolute;top:0;bottom:0;left:0;right:0;transition:.83s;animation-name:intro-login;z-index:20;animation-duration:1s}@keyframes intro-login{0%{opacity:1}to{opacity:0}}#page-container[_ngcontent-%COMP%]{width:100%;height:100vh;background-color:#f1f1f1}.icon-input[_ngcontent-%COMP%]{width:13px;position:absolute;top:11px;left:17px}.err[_ngcontent-%COMP%]{width:20px;position:absolute;top:8px;right:8px;transition:1s;animation-duration:1s;animation-name:errimage}@keyframes errimage{0%{transform:rotate(180deg);width:0}to{transform:rotate(0);width:20px}}#login-functions[_ngcontent-%COMP%]{position:absolute;bottom:20px;width:100%;display:flex;height:40px;text-align:right;justify-content:right}#keyboard[_ngcontent-%COMP%]{position:relative;bottom:2px}@media (max-width: 600px){#login-functions[_ngcontent-%COMP%]{text-align:center;justify-content:center}#actions[_ngcontent-%COMP%]{right:unset!important}}#actions[_ngcontent-%COMP%]{position:relative;right:30px;background:white;box-shadow:0 7px 7px #b5b5b5;border-radius:5px;width:150px;display:flex;text-align:center;justify-content:center;align-items:center}#actions[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;text-align:center;justify-content:center;align-items:center;height:100%;width:33.3%}#actions[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}#actions[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:55%}#actions[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transition:.5s;animation-name:clickme;animation-iteration-count:infinite;animation-duration:1.5s}@keyframes clickme{0%{transform:translateY(0)}50%{transform:translateY(-10px)}to{transform:translateY(0)}}\"]\n  });\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}